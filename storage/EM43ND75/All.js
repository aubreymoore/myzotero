!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=43)}([function(t,e,i){var n,r,o;window,r=[i(2),i(16),i(18),i(19),i(20),i(21),i(22)],void 0===(o="function"==typeof(n=function(t){return t})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(a,s){n=[i(12)],void 0===(r=function(t){return function(t,e){"use strict";var i={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},n=Array.prototype.slice;i.makeArray=function(t){if(Array.isArray(t))return t;if(null==t)return[];var e="object"==o(t)&&"number"==typeof t.length;return e?n.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var r=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){e(t,n)&&r.push(t);for(var i=t.querySelectorAll(n),o=0;o<i.length;o++)r.push(i[o])}else r.push(t)}),r},i.debounceMethod=function(t,e,i){i=i||100;var n=t.prototype[e],r=e+"Timeout";t.prototype[e]=function(){var t=this[r];clearTimeout(t);var e=arguments,o=this;this[r]=setTimeout(function(){n.apply(o,e),delete o[r]},i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var r=t.console;return i.htmlInit=function(e,n){i.docReady(function(){var o=i.toDashed(n),a="data-"+o,s=document.querySelectorAll("["+a+"]"),l=document.querySelectorAll(".js-"+o),u=i.makeArray(s).concat(i.makeArray(l)),c=a+"-options",h=t.jQuery;u.forEach(function(t){var i,o=t.getAttribute(a)||t.getAttribute(c);try{i=o&&JSON.parse(o)}catch(e){return void(r&&r.error("Error parsing "+a+" on "+t.className+": "+e))}var s=new e(t,i);h&&h.data(t,n,s)})})},i}(a,t)}.apply(e,n))||(t.exports=r)}(window)},function(t,e,i){var n,r;!function(o,a){n=[i(5),i(7),i(1),i(13),i(14),i(15)],void 0===(r=function(t,e,i,n,r,a){return function(t,e,i,n,r,o,a){"use strict";var s=t.jQuery,l=t.getComputedStyle,u=t.console;function c(t,e){for(t=n.makeArray(t);t.length;)e.appendChild(t.shift())}var h=0,d={};function f(t,e){var i=n.getQueryElement(t);if(i){if(this.element=i,this.element.flickityGUID){var r=d[this.element.flickityGUID];return r.option(e),r}s&&(this.$element=s(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e),this._create()}else u&&u.error("Bad element for Flickity: "+(i||t))}f.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},f.createMethods=[];var p=f.prototype;n.extend(p,e.prototype),p._create=function(){var e=this.guid=++h;for(var i in this.element.flickityGUID=e,d[e]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&t.addEventListener("resize",this),this.options.on){var n=this.options.on[i];this.on(i,n)}f.createMethods.forEach(function(t){this[t]()},this),this.options.watchCSS?this.watchCSS():this.activate()},p.option=function(t){n.extend(this.options,t)},p.activate=function(){if(!this.isActive){this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize();var t=this._filterFindCellElements(this.element.children);c(t,this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready")}},p._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},p._filterFindCellElements=function(t){return n.filterFindElements(t,this.options.cellSelector)},p.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},p._makeCells=function(t){var e=this._filterFindCellElements(t),i=e.map(function(t){return new r(t,this)},this);return i},p.getLastCell=function(){return this.cells[this.cells.length-1]},p.getLastSlide=function(){return this.slides[this.slides.length-1]},p.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},p._positionCells=function(t){t=t||0,this.maxCellHeight=t&&this.maxCellHeight||0;var e=0;if(t>0){var i=this.cells[t-1];e=i.x+i.size.outerWidth}for(var n=this.cells.length,r=t;r<n;r++){var o=this.cells[r];o.setPosition(e),e+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=e,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},p._sizeCells=function(t){t.forEach(function(t){t.getSize()})},p.updateSlides=function(){if(this.slides=[],this.cells.length){var t=new o(this);this.slides.push(t);var e="left"==this.originSide,i=e?"marginRight":"marginLeft",n=this._getCanCellFit();this.cells.forEach(function(e,r){if(t.cells.length){var a=t.outerWidth-t.firstMargin+(e.size.outerWidth-e.size[i]);n.call(this,r,a)?t.addCell(e):(t.updateTarget(),t=new o(this),this.slides.push(t),t.addCell(e))}else t.addCell(e)},this),t.updateTarget(),this.updateSelectedSlide()}},p._getCanCellFit=function(){var t=this.options.groupCells;if(!t)return function(){return!1};if("number"==typeof t){var e=parseInt(t,10);return function(t){return t%e!=0}}var i="string"==typeof t&&t.match(/^(\d+)%$/),n=i?parseInt(i[1],10)/100:1;return function(t,e){return e<=(this.size.innerWidth+1)*n}},p._init=p.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},p.getSize=function(){this.size=i(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var y={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};p.setCellAlign=function(){var t=y[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},p.setGallerySize=function(){if(this.options.setGallerySize){var t=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=t+"px"}},p._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var t=this.cursorPosition,e=this.cells.length-1;this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1)}},p._getGapCells=function(t,e,i){for(var n=[];t>0;){var r=this.cells[e];if(!r)break;n.push(r),e+=i,t-=r.size.outerWidth}return n},p._containSlides=function(){if(this.options.contain&&!this.options.wrapAround&&this.cells.length){var t=this.options.rightToLeft,e=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight",n=this.slideableWidth-this.getLastCell().size[i],r=n<this.size.innerWidth,o=this.cursorPosition+this.cells[0].size[e],a=n-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(t){r?t.target=n*this.cellAlign:(t.target=Math.max(t.target,o),t.target=Math.min(t.target,a))},this)}},p.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),s&&this.$element){var r=t+=this.options.namespaceJQueryEvents?".flickity":"";if(e){var o=s.Event(e);o.type=t,r=o}this.$element.trigger(r,i)}},p.select=function(t,e,i){if(this.isActive&&(t=parseInt(t,10),this._wrapSelect(t),(this.options.wrapAround||e)&&(t=n.modulo(t,this.slides.length)),this.slides[t])){var r=this.selectedIndex;this.selectedIndex=t,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[t]),t!=r&&this.dispatchEvent("change",null,[t]),this.dispatchEvent("cellSelect")}},p._wrapSelect=function(t){var e=this.slides.length;if(!(this.options.wrapAround&&e>1))return t;var i=n.modulo(t,e),r=Math.abs(i-this.selectedIndex),o=Math.abs(i+e-this.selectedIndex),a=Math.abs(i-e-this.selectedIndex);!this.isDragSelect&&o<r?t+=e:!this.isDragSelect&&a<r&&(t-=e),t<0?this.x-=this.slideableWidth:t>=e&&(this.x+=this.slideableWidth)},p.previous=function(t,e){this.select(this.selectedIndex-1,t,e)},p.next=function(t,e){this.select(this.selectedIndex+1,t,e)},p.updateSelectedSlide=function(){var t=this.slides[this.selectedIndex];t&&(this.unselectSelectedSlide(),this.selectedSlide=t,t.select(),this.selectedCells=t.cells,this.selectedElements=t.getCellElements(),this.selectedCell=t.cells[0],this.selectedElement=this.selectedElements[0])},p.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},p.selectInitialIndex=function(){var t=this.options.initialIndex;if(this.isInitActivated)this.select(this.selectedIndex,!1,!0);else{if(t&&"string"==typeof t&&this.queryCell(t))return void this.selectCell(t,!1,!0);var e=0;t&&this.slides[t]&&(e=t),this.select(e,!1,!0)}},p.selectCell=function(t,e,i){var n=this.queryCell(t);if(n){var r=this.getCellSlideIndex(n);this.select(r,e,i)}},p.getCellSlideIndex=function(t){for(var e=0;e<this.slides.length;e++)if(-1!=this.slides[e].cells.indexOf(t))return e},p.getCell=function(t){for(var e=0;e<this.cells.length;e++){var i=this.cells[e];if(i.element==t)return i}},p.getCells=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getCell(t);i&&e.push(i)},this),e},p.getCellElements=function(){return this.cells.map(function(t){return t.element})},p.getParentCell=function(t){var e=this.getCell(t);return e||(t=n.getParent(t,".flickity-slider > *"),this.getCell(t))},p.getAdjacentCellElements=function(t,e){if(!t)return this.selectedSlide.getCellElements();e=void 0===e?this.selectedIndex:e;var i=this.slides.length;if(1+2*t>=i)return this.getCellElements();for(var r=[],o=e-t;o<=e+t;o++){var a=this.options.wrapAround?n.modulo(o,i):o,s=this.slides[a];s&&(r=r.concat(s.getCellElements()))}return r},p.queryCell=function(t){if("number"==typeof t)return this.cells[t];if("string"==typeof t){if(t.match(/^[#\.]?[\d\/]/))return;t=this.element.querySelector(t)}return this.getCell(t)},p.uiChange=function(){this.emitEvent("uiChange")},p.childUIPointerDown=function(t){"touchstart"!=t.type&&t.preventDefault(),this.focus()},p.onresize=function(){this.watchCSS(),this.resize()},n.debounceMethod(f,"onresize",150),p.resize=function(){if(this.isActive){this.getSize(),this.options.wrapAround&&(this.x=n.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");var t=this.selectedElements&&this.selectedElements[0];this.selectCell(t,!1,!0)}},p.watchCSS=function(){this.options.watchCSS&&(-1!=l(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},p.onkeydown=function(t){var e=document.activeElement&&document.activeElement!=this.element;if(this.options.accessibility&&!e){var i=f.keyboardHandlers[t.keyCode];i&&i.call(this)}},f.keyboardHandlers={37:function(){var t=this.options.rightToLeft?"next":"previous";this.uiChange(),this[t]()},39:function(){var t=this.options.rightToLeft?"previous":"next";this.uiChange(),this[t]()}},p.focus=function(){var e=t.pageYOffset;this.element.focus({preventScroll:!0}),t.pageYOffset!=e&&t.scrollTo(t.pageXOffset,e)},p.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(t){t.destroy()}),this.element.removeChild(this.viewport),c(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},p.destroy=function(){this.deactivate(),t.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),s&&this.$element&&s.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete d[this.guid]},n.extend(p,a),f.data=function(t){var e=(t=n.getQueryElement(t))&&t.flickityGUID;return e&&d[e]},n.htmlInit(f,"flickity"),s&&s.bridget&&s.bridget("flickity",f);return f.setJQuery=function(t){s=t},f.Cell=r,f.Slide=o,f}(o,t,e,i,n,r,a)}.apply(e,n))||(t.exports=r)}(window)},,function(t,e,i){!function(e){"use strict";var n=i(23),r=function(t,e,i){var r,o,a,s,l={},u=0,c=0,h={sensitivity:7,interval:100,timeout:0};function d(e,i,n){var l=function(t){r=t.clientX,o=t.clientY};return c&&(c=clearTimeout(c)),n?(a=e.clientX,s=e.clientY,t.addEventListener("mousemove",l,!1),1!==u&&(c=setTimeout(function(){!function t(e,i,n){c&&(c=clearTimeout(c));if(Math.abs(a-r)+Math.abs(s-o)<h.sensitivity)return u=1,i.call(e,n);a=r,s=o,c=setTimeout(function(){t(e,i,n)},h.interval)}(t,i,e)},h.interval))):(t.removeEventListener("mousemove",l,!1),1===u&&(c=setTimeout(function(){!function(t,e,i){c&&(c=clearTimeout(c)),u=0,e.call(t,i)}(t,i,e)},h.timeout))),this}function f(t){d(t,e,!0)}function p(t){d(t,i)}return l.options=function(t){h=n({},h,t)},l.remove=function(){t&&(t.removeEventListener("mouseover",f,!1),t.removeEventListener("mouseout",p,!1))},t&&(t.addEventListener("mouseover",f,!1),t.addEventListener("mouseout",p,!1)),l};e.hoverintent=r,t.exports&&(t.exports=r)}(this)},function(t,e,i){var n,r;"undefined"!=typeof window&&window,void 0===(r="function"==typeof(n=function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],r=0;r<i.length;r++){var o=i[r];n&&n[o]&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})?n.call(e,i,e,t):n)||(t.exports=r)},function(t,e,i){var n,r;
/*!
 * Unipointer v2.3.0
 * base class for doing one thing with pointer event
 * MIT license
 */
!function(o,a){n=[i(5)],void 0===(r=function(t){return function(t,e){"use strict";function i(){}var n=i.prototype=Object.create(e.prototype);n.bindStartEvent=function(t){this._bindStartEvent(t,!0)},n.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},n._bindStartEvent=function(e,i){var n=(i=void 0===i||i)?"addEventListener":"removeEventListener",r="mousedown";t.PointerEvent?r="pointerdown":"ontouchstart"in t&&(r="touchstart"),e[n](r,this)},n.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},n.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},n.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},n.onpointerdown=function(t){this._pointerDown(t,t)},n._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},n.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var r={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return n._bindPostStartEvents=function(e){if(e){var i=r[e.type];i.forEach(function(e){t.addEventListener(e,this)},this),this._boundPointerEvents=i}},n._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){t.removeEventListener(e,this)},this),delete this._boundPointerEvents)},n.onmousemove=function(t){this._pointerMove(t,t)},n.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},n.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},n._pointerMove=function(t,e){this.pointerMove(t,e)},n.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},n.onmouseup=function(t){this._pointerUp(t,t)},n.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},n.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},n._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},n._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},n._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},n.pointerDone=function(){},n.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},n.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},n._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},n.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},i.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},i}(o,t)}.apply(e,n))||(t.exports=r)}(window)},function(t,e,i){var n,r;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */window,void 0===(r="function"==typeof(n=function(){"use strict";function t(t){var e=parseFloat(t),i=-1==t.indexOf("%")&&!isNaN(e);return i&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},i=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],n=i.length;function r(t){var i=getComputedStyle(t);return i||e("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),i}var a,s=!1;function l(e){if(function(){if(!s){s=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var n=r(e);a=200==Math.round(t(n.width)),l.isBoxSizeOuter=a,i.removeChild(e)}}(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==o(e)&&e.nodeType){var u=r(e);if("none"==u.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<n;e++){var r=i[e];t[r]=0}return t}();var c={};c.width=e.offsetWidth,c.height=e.offsetHeight;for(var h=c.isBorderBox="border-box"==u.boxSizing,d=0;d<n;d++){var f=i[d],p=u[f],y=parseFloat(p);c[f]=isNaN(y)?0:y}var v=c.paddingLeft+c.paddingRight,g=c.paddingTop+c.paddingBottom,m=c.marginLeft+c.marginRight,b=c.marginTop+c.marginBottom,A=c.borderLeftWidth+c.borderRightWidth,w=c.borderTopWidth+c.borderBottomWidth,S=h&&a,k=t(u.width);!1!==k&&(c.width=k+(S?0:v+A));var E=t(u.height);return!1!==E&&(c.height=E+(S?0:g+w)),c.innerWidth=c.width-(v+A),c.innerHeight=c.height-(g+w),c.outerWidth=c.width+m,c.outerHeight=c.height+b,c}}return l})?n.call(e,i,e,t):n)||(t.exports=r)},,,function(t,e,i){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){"use strict";function i(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style&&!0!==t.__forceSmoothScrollPolyfill__)){var i,r=t.HTMLElement||t.Element,o=468,a={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:r.prototype.scroll||u,scrollIntoView:r.prototype.scrollIntoView},s=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,l=(i=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(i)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?y.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):a.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!==n(arguments[0])?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(c(arguments[0])?a.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!==n(arguments[0])?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):y.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},r.prototype.scroll=r.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==c(arguments[0])){var t=arguments[0].left,e=arguments[0].top;y.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");a.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!==n(arguments[0])?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},r.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):a.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},r.prototype.scrollIntoView=function(){if(!0!==c(arguments[0])){var i=function(t){for(;t!==e.body&&!1===f(t);)t=t.parentNode||t.host;return t}(this),n=i.getBoundingClientRect(),r=this.getBoundingClientRect();i!==e.body?(y.call(this,i,i.scrollLeft+r.left-n.left,i.scrollTop+r.top-n.top),"fixed"!==t.getComputedStyle(i).position&&t.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})}else a.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function u(t,e){this.scrollLeft=t,this.scrollTop=e}function c(t){if(null===t||"object"!==n(t)||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"===n(t)&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function h(t,e){return"Y"===e?t.clientHeight+l<t.scrollHeight:"X"===e?t.clientWidth+l<t.scrollWidth:void 0}function d(e,i){var n=t.getComputedStyle(e,null)["overflow"+i];return"auto"===n||"scroll"===n}function f(t){var e=h(t,"Y")&&d(t,"Y"),i=h(t,"X")&&d(t,"X");return e||i}function p(e){var i,n,r,a,l=(s()-e.startTime)/o;a=l=l>1?1:l,i=.5*(1-Math.cos(Math.PI*a)),n=e.startX+(e.x-e.startX)*i,r=e.startY+(e.y-e.startY)*i,e.method.call(e.scrollable,n,r),n===e.x&&r===e.y||t.requestAnimationFrame(p.bind(t,e))}function y(i,n,r){var o,l,c,h,d=s();i===e.body?(o=t,l=t.scrollX||t.pageXOffset,c=t.scrollY||t.pageYOffset,h=a.scroll):(o=i,l=i.scrollLeft,c=i.scrollTop,h=u),p({scrollable:o,method:h,startTime:d,startX:l,startY:c,x:n,y:r})}}"object"===n(e)&&void 0!==t?t.exports={polyfill:i}:i()}()},function(t,e,i){},function(t,e,i){var n,r;!function(o,a){"use strict";void 0===(r="function"==typeof(n=a)?n.call(e,i,e,t):n)||(t.exports=r)}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(e,i){return e[t](i)}})},function(t,e,i){var n,r;window,n=[i(7)],void 0===(r=function(t){return function(t,e){"use strict";function i(t,e){this.element=t,this.parent=e,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0},n.destroy=function(){this.unselect(),this.element.style.position="";var t=this.parent.originSide;this.element.style[t]=""},n.getSize=function(){this.size=e(this.element)},n.setPosition=function(t){this.x=t,this.updateTarget(),this.renderPosition(t)},n.updateTarget=n.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},n.renderPosition=function(t){var e=this.parent.originSide;this.element.style[e]=this.parent.getPositionValue(t)},n.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},n.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},n.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}(0,t)}.apply(e,n))||(t.exports=r)},function(t,e,i){var n,r;window,void 0===(r="function"==typeof(n=function(){"use strict";function t(t){this.parent=t,this.isOriginLeft="left"==t.originSide,this.cells=[],this.outerWidth=0,this.height=0}var e=t.prototype;return e.addCell=function(t){if(this.cells.push(t),this.outerWidth+=t.size.outerWidth,this.height=Math.max(t.size.outerHeight,this.height),1==this.cells.length){this.x=t.x;var e=this.isOriginLeft?"marginLeft":"marginRight";this.firstMargin=t.size[e]}},e.updateTarget=function(){var t=this.isOriginLeft?"marginRight":"marginLeft",e=this.getLastCell(),i=e?e.size[t]:0,n=this.outerWidth-(this.firstMargin+i);this.target=this.x+this.firstMargin+n*this.parent.cellAlign},e.getLastCell=function(){return this.cells[this.cells.length-1]},e.select=function(){this.cells.forEach(function(t){t.select()})},e.unselect=function(){this.cells.forEach(function(t){t.unselect()})},e.getCellElements=function(){return this.cells.map(function(t){return t.element})},t})?n.call(e,i,e,t):n)||(t.exports=r)},function(t,e,i){var n,r;window,n=[i(1)],void 0===(r=function(t){return function(t,e){"use strict";var i={startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var t=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating){var e=this;requestAnimationFrame(function(){e.animate()})}},positionSlider:function(){var t=this.x;this.options.wrapAround&&this.cells.length>1&&(t=e.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),this.setTranslateX(t,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(t,e){t+=this.cursorPosition,t=this.options.rightToLeft?-t:t;var i=this.getPositionValue(t);this.slider.style.transform=e?"translate3d("+i+",0,0)":"translateX("+i+")"},dispatchScrollEvent:function(){var t=this.slides[0];if(t){var e=-this.x-t.target,i=e/this.slidesWidth;this.dispatchEvent("scroll",null,[i,e])}},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},settle:function(t){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*t)||this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(t){var e=this.cursorPosition+t;this._shiftCells(this.beforeShiftCells,e,-1);var i=this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,i,1)},_shiftCells:function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n],o=e>0?i:0;r.wrapShift(o),e-=r.size.outerWidth}},_unshiftCells:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)t[e].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(t){this.velocity+=t},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){if(this.isDraggable&&this.isPointerDown){var t=this.dragX-this.x-this.velocity;this.applyForce(t)}},applySelectedAttraction:function(){if((!this.isDraggable||!this.isPointerDown)&&!this.isFreeScrolling&&this.slides.length){var t=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction;this.applyForce(t)}}};return i}(0,t)}.apply(e,n))||(t.exports=r)},function(t,e,i){var n,r;!function(o,a){n=[i(2),i(17),i(1)],void 0===(r=function(t,e,i){return function(t,e,i,n){"use strict";n.extend(e.defaults,{draggable:">1",dragThreshold:3}),e.createMethods.push("_createDrag");var r=e.prototype;n.extend(r,i.prototype),r._touchActionValue="pan-y";var o="createTouch"in document,a=!1;r._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),o&&!a&&(t.addEventListener("touchmove",function(){}),a=!0)},r.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},r.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},r.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=this.slides.length>1:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},r.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},r.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},r._uiChangeDrag=function(){delete this.isFreeScrolling},r.pointerDown=function(e,i){if(this.isDraggable){var n=this.okayPointerDown(e);n&&(this._pointerDownPreventDefault(e),this.pointerDownFocus(e),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=l(),t.addEventListener("scroll",this),this._pointerDownDefault(e,i))}else this._pointerDownDefault(e,i)},r._pointerDownDefault=function(t,e){this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},this._bindPostStartEvents(t),this.dispatchEvent("pointerDown",t,[e])};var s={INPUT:!0,TEXTAREA:!0,SELECT:!0};function l(){return{x:t.pageXOffset,y:t.pageYOffset}}return r.pointerDownFocus=function(t){s[t.target.nodeName]||this.focus()},r._pointerDownPreventDefault=function(t){var e="touchstart"==t.type,i="touch"==t.pointerType,n=s[t.target.nodeName];e||i||n||t.preventDefault()},r.hasDragStarted=function(t){return Math.abs(t.x)>this.options.dragThreshold},r.pointerUp=function(t,e){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},r.pointerDone=function(){t.removeEventListener("scroll",this),delete this.pointerDownScroll},r.dragStart=function(e,i){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),t.removeEventListener("scroll",this),this.dispatchEvent("dragStart",e,[i]))},r.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},r.dragMove=function(t,e,i){if(this.isDraggable){t.preventDefault(),this.previousDragX=this.dragX;var n=this.options.rightToLeft?-1:1;this.options.wrapAround&&(i.x=i.x%this.slideableWidth);var r=this.dragStartPosition+i.x*n;if(!this.options.wrapAround&&this.slides.length){var o=Math.max(-this.slides[0].target,this.dragStartPosition);r=r>o?.5*(r+o):r;var a=Math.min(-this.getLastSlide().target,this.dragStartPosition);r=r<a?.5*(r+a):r}this.dragX=r,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",t,[e,i])}},r.dragEnd=function(t,e){if(this.isDraggable){this.options.freeScroll&&(this.isFreeScrolling=!0);var i=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var n=this.getRestingPosition();this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target}else this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",t,[e])}},r.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getSlideDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),n=this._getClosestResting(t,e,-1);return i.distance<n.distance?i.index:n.index},r._getClosestResting=function(t,e,i){for(var n=this.selectedIndex,r=1/0,o=this.options.contain&&!this.options.wrapAround?function(t,e){return t<=e}:function(t,e){return t<e};o(e,r)&&(n+=i,r=e,null!==(e=this.getSlideDistance(-t,n)));)e=Math.abs(e);return{distance:r,index:n-i}},r.getSlideDistance=function(t,e){var i=this.slides.length,r=this.options.wrapAround&&i>1,o=r?n.modulo(e,i):e,a=this.slides[o];if(!a)return null;var s=r?this.slideableWidth*Math.floor(e/i):0;return t-(a.target+s)},r.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;var t=this.getSlideDistance(-this.dragX,this.selectedIndex),e=this.previousDragX-this.dragX;return t>0&&e>0?1:t<0&&e<0?-1:0},r.staticClick=function(t,e){var i=this.getParentCell(t.target),n=i&&i.element,r=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",t,[e,n,r])},r.onscroll=function(){var t=l(),e=this.pointerDownScroll.x-t.x,i=this.pointerDownScroll.y-t.y;(Math.abs(e)>3||Math.abs(i)>3)&&this._pointerDone()},e}(o,t,e,i)}.apply(e,n))||(t.exports=r)}(window)},function(t,e,i){var n,r;
/*!
 * Unidragger v2.3.0
 * Draggable base class
 * MIT license
 */
!function(o,a){n=[i(6)],void 0===(r=function(t){return function(t,e){"use strict";function i(){}var n=i.prototype=Object.create(e.prototype);n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},n._bindHandles=function(e){for(var i=(e=void 0===e||e)?"addEventListener":"removeEventListener",n=e?this._touchActionValue:"",r=0;r<this.handles.length;r++){var o=this.handles[r];this._bindStartEvent(o,e),o[i]("click",this),t.PointerEvent&&(o.style.touchAction=n)}},n._touchActionValue="none",n.pointerDown=function(t,e){var i=this.okayPointerDown(t);i&&(this.pointerDownPointer=e,t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var r={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},o={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return n.okayPointerDown=function(t){var e=r[t.target.nodeName],i=o[t.target.type],n=!e||i;return n||this._pointerReset(),n},n.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},n.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},n._dragPointerMove=function(t,e){var i={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(t,e),i},n.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},n._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},n._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},n.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},n._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},n.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},n._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},n.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},n.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},n._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},n.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},i.getPointerPoint=e.getPointerPoint,i}(o,t)}.apply(e,n))||(t.exports=r)}(window)},function(t,e,i){var n,r;window,n=[i(2),i(6),i(1)],void 0===(r=function(t,e,i){return function(t,e,i,n){"use strict";var r="http://www.w3.org/2000/svg";function o(t,e){this.direction=t,this.parent=e,this._create()}o.prototype=Object.create(i.prototype),o.prototype._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var t=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==t;var e=this.element=document.createElement("button");e.className="flickity-button flickity-prev-next-button",e.className+=this.isPrevious?" previous":" next",e.setAttribute("type","button"),this.disable(),e.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var i=this.createSVG();e.appendChild(i),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},o.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},o.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},o.prototype.createSVG=function(){var t=document.createElementNS(r,"svg");t.setAttribute("class","flickity-button-icon"),t.setAttribute("viewBox","0 0 100 100");var e,i=document.createElementNS(r,"path"),n="string"==typeof(e=this.parent.options.arrowShape)?e:"M "+e.x0+",50 L "+e.x1+","+(e.y1+50)+" L "+e.x2+","+(e.y2+50)+" L "+e.x3+",50  L "+e.x2+","+(50-e.y2)+" L "+e.x1+","+(50-e.y1)+" Z";return i.setAttribute("d",n),i.setAttribute("class","arrow"),this.isLeft||i.setAttribute("transform","translate(100, 100) rotate(180) "),t.appendChild(i),t},o.prototype.handleEvent=n.handleEvent,o.prototype.onclick=function(){if(this.isEnabled){this.parent.uiChange();var t=this.isPrevious?"previous":"next";this.parent[t]()}},o.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},o.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},o.prototype.update=function(){var t=this.parent.slides;if(this.parent.options.wrapAround&&t.length>1)this.enable();else{var e=t.length?t.length-1:0,i=this.isPrevious?0:e,n=this.parent.selectedIndex==i?"disable":"enable";this[n]()}},o.prototype.destroy=function(){this.deactivate(),this.allOff()},n.extend(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.createMethods.push("_createPrevNextButtons");var a=e.prototype;return a._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new o(-1,this),this.nextButton=new o(1,this),this.on("activate",this.activatePrevNextButtons))},a.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},a.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=o,e}(0,t,e,i)}.apply(e,n))||(t.exports=r)},function(t,e,i){var n,r;window,n=[i(2),i(6),i(1)],void 0===(r=function(t,e,i){return function(t,e,i,n){"use strict";function r(t){this.parent=t,this._create()}r.prototype=Object.create(i.prototype),r.prototype._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},r.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},r.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},r.prototype.setDots=function(){var t=this.parent.slides.length-this.dots.length;t>0?this.addDots(t):t<0&&this.removeDots(-t)},r.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[],n=this.dots.length,r=n+t,o=n;o<r;o++){var a=document.createElement("li");a.className="dot",a.setAttribute("aria-label","Page dot "+(o+1)),e.appendChild(a),i.push(a)}this.holder.appendChild(e),this.dots=this.dots.concat(i)},r.prototype.removeDots=function(t){var e=this.dots.splice(this.dots.length-t,t);e.forEach(function(t){this.holder.removeChild(t)},this)},r.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},r.prototype.onTap=r.prototype.onClick=function(t){var e=t.target;if("LI"==e.nodeName){this.parent.uiChange();var i=this.dots.indexOf(e);this.parent.select(i)}},r.prototype.destroy=function(){this.deactivate(),this.allOff()},e.PageDots=r,n.extend(e.defaults,{pageDots:!0}),e.createMethods.push("_createPageDots");var o=e.prototype;return o._createPageDots=function(){this.options.pageDots&&(this.pageDots=new r(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},o.activatePageDots=function(){this.pageDots.activate()},o.updateSelectedPageDots=function(){this.pageDots.updateSelected()},o.updatePageDots=function(){this.pageDots.setDots()},o.deactivatePageDots=function(){this.pageDots.deactivate()},e.PageDots=r,e}(0,t,e,i)}.apply(e,n))||(t.exports=r)},function(t,e,i){var n,r;window,n=[i(5),i(1),i(2)],void 0===(r=function(t,e,i){return function(t,e,i){"use strict";function n(t){this.parent=t,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}n.prototype=Object.create(t.prototype),n.prototype.play=function(){if("playing"!=this.state){var t=document.hidden;t?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick())}},n.prototype.tick=function(){if("playing"==this.state){var t=this.parent.options.autoPlay;t="number"==typeof t?t:3e3;var e=this;this.clear(),this.timeout=setTimeout(function(){e.parent.next(!0),e.tick()},t)}},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){var t=document.hidden;this[t?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},e.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");var r=i.prototype;return r._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},r.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},r.playPlayer=function(){this.player.play()},r.stopPlayer=function(){this.player.stop()},r.pausePlayer=function(){this.player.pause()},r.unpausePlayer=function(){this.player.unpause()},r.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},r.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},r.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}(t,e,i)}.apply(e,n))||(t.exports=r)},function(t,e,i){var n,r;window,n=[i(2),i(1)],void 0===(r=function(t,e){return function(t,e,i){"use strict";var n=e.prototype;return n.insert=function(t,e){var i=this._makeCells(t);if(i&&i.length){var n=this.cells.length;e=void 0===e?n:e;var r=function(t){var e=document.createDocumentFragment();return t.forEach(function(t){e.appendChild(t.element)}),e}(i),o=e==n;if(o)this.slider.appendChild(r);else{var a=this.cells[e].element;this.slider.insertBefore(r,a)}if(0===e)this.cells=i.concat(this.cells);else if(o)this.cells=this.cells.concat(i);else{var s=this.cells.splice(e,n-e);this.cells=this.cells.concat(i).concat(s)}this._sizeCells(i),this.cellChange(e,!0)}},n.append=function(t){this.insert(t,this.cells.length)},n.prepend=function(t){this.insert(t,0)},n.remove=function(t){var e=this.getCells(t);if(e&&e.length){var n=this.cells.length-1;e.forEach(function(t){t.remove();var e=this.cells.indexOf(t);n=Math.min(e,n),i.removeFrom(this.cells,t)},this),this.cellChange(n,!0)}},n.cellSizeChange=function(t){var e=this.getCell(t);if(e){e.getSize();var i=this.cells.indexOf(e);this.cellChange(i)}},n.cellChange=function(t,e){var i=this.selectedElement;this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize();var n=this.getCell(i);n&&(this.selectedIndex=this.getCellSlideIndex(n)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[t]),this.select(this.selectedIndex),e&&this.positionSliderAtSelected()},e}(0,t,e)}.apply(e,n))||(t.exports=r)},function(t,e,i){var n,r;window,n=[i(2),i(1)],void 0===(r=function(t,e){return function(t,e,i){"use strict";e.createMethods.push("_createLazyload");var n=e.prototype;function r(t,e){this.img=t,this.flickity=e,this.load()}return n._createLazyload=function(){this.on("select",this.lazyLoad)},n.lazyLoad=function(){var t=this.options.lazyLoad;if(t){var e="number"==typeof t?t:0,n=this.getAdjacentCellElements(e),o=[];n.forEach(function(t){var e=function(t){if("IMG"==t.nodeName){var e=t.getAttribute("data-flickity-lazyload"),n=t.getAttribute("data-flickity-lazyload-src"),r=t.getAttribute("data-flickity-lazyload-srcset");if(e||n||r)return[t]}var o=t.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]");return i.makeArray(o)}(t);o=o.concat(e)}),o.forEach(function(t){new r(t,this)},this)}},r.prototype.handleEvent=i.handleEvent,r.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var t=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),e=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=t,e&&this.img.setAttribute("srcset",e),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},r.prototype.onload=function(t){this.complete(t,"flickity-lazyloaded")},r.prototype.onerror=function(t){this.complete(t,"flickity-lazyerror")},r.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),n=i&&i.element;this.flickity.cellSizeChange(n),this.img.classList.add(e),this.flickity.dispatchEvent("lazyLoad",t,n)},e.LazyLoader=r,e}(0,t,e)}.apply(e,n))||(t.exports=r)},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t};var i=Object.prototype.hasOwnProperty},,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);i(11);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,u(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,t)})(t)}function s(t,e,i){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&l(r,i.prototype),r}).apply(null,arguments)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,u(e).apply(this,arguments))}var i,n,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,a(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){var t=this;this.querySelector("[data-dropdown-trigger]").addEventListener("click",function(e){e.preventDefault(),t.toggleDropdown()},!0),this.querySelector("[data-dropdown-close]").addEventListener("click",function(e){e.preventDefault(),t.hideDropdown()},!0),document.onkeydown=function(e){var i=e||window.event;("key"in i?"Escape"===i.key||"Esc"===i.key:27===i.keyCode)&&t.hideDropdown()},this.copyLinkFunctionality()}},{key:"copyLinkFunctionality",value:function(){var t=this,e=this.querySelector('[data-social-service="copylink"]');e&&e.addEventListener("click",function(i){i.preventDefault();var n=location.origin+location.pathname,r=t.parentNode.parentNode.parentNode.querySelector('[class$="-anchor"]');r&&(n+="#"+r.getAttribute("id"));var o=document.createElement("textarea");document.body.appendChild(o),o.value=n,o.select(),document.execCommand("copy"),document.body.removeChild(o),e.setAttribute("data-copied",!0)},!0)}},{key:"toggleDropdown",value:function(){this.isDropdownShowing()?this.hideDropdown():this.showDropdown()}},{key:"isDropdownShowing",value:function(){var t=this.querySelector(".ActionBar-dropdown");return!!t&&"true"===t.getAttribute("data-showing")}},{key:"showDropdown",value:function(){this.querySelector(".ActionBar-dropdown").setAttribute("data-showing",!0)}},{key:"hideDropdown",value:function(){this.querySelector(".ActionBar-dropdown").setAttribute("data-showing",!1)}},{key:"disconnectedCallback",value:function(){return!1}}])&&r(i.prototype,n),s&&r(i,s),e}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){var e="function"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return y(t,arguments,g(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,t)})(t)}function y(t,e,i){return(y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&v(r,i.prototype),r}).apply(null,arguments)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,g(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,p(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){this.closeButton=this.querySelector("[data-toggle-trigger]"),this.checkSessionStorage()}},{key:"checkSessionStorage",value:function(){var t=this;"noShow"!==sessionStorage.getItem("bannerStatus")&&(this.setAttribute("data-show",""),this.closeButton.addEventListener("click",function(){t.removeAttribute("data-show"),sessionStorage.setItem("bannerStatus","noShow")}))}}])&&d(i.prototype,n),r&&d(i,r),e}();function b(t,e){if(t<=0)return e;var i,n,r=0;return function(){if(n=arguments,!i){var o=this,a=+Date.now(),s=t-a+r;s<=0?(r=a,e.apply(o,n)):i=setTimeout(function(){r=a,i=null,e.apply(o,n)},s)}}}var A=i(0),w=i.n(A);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function E(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){var e="function"==typeof Map?new Map:void 0;return(P=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return O(t,arguments,C(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),L(n,t)})(t)}function O(t,e,i){return(O=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&L(r,i.prototype),r}).apply(null,arguments)}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,C(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(e,P(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){var t=this;w.a.prototype.pointerDownFocus=function(t){return!0},this.handleOptions(),this.carouselSlides=this.querySelector('[class$="-slides"]'),this.carouselSlides||(this.carouselSlides=this),this.flickity=new w.a(this.carouselSlides,this.carouselOptions),this.setTabIndexing(),this.handleSlideChange(),window.addEventListener("load",function(){t.flickity.resize()}),this.galleryId=this.getAttribute("data-gallery-id")||"",window.addEventListener("resize",b(250,function(){t.handleOptions(),t.rebuildCarouselIfChanged()}))}},{key:"setTabIndexing",value:function(){this.flickity.cells.forEach(function(t){if(t.element){var e=t.element.querySelectorAll(".Link");"true"===t.element.getAttribute("aria-hidden")?(t.element.setAttribute("tabindex","-1"),e&&e.forEach(function(t){t.setAttribute("tabindex","-1")})):(t.element.setAttribute("tabindex","0"),e&&e.forEach(function(t){t.setAttribute("tabindex","0")}))}})}},{key:"handleSlideChange",value:function(){var t=this;this.flickity.on("change",function(e){t.setTabIndexing();var i=t.flickity.selectedElement.querySelector(".CarouselSlide");i&&document.body.dispatchEvent(new CustomEvent("Carousel:onSlideUpdate",{detail:{activeSlide:{index:e+1,title:i.getAttribute("data-info-title"),attribution:i.getAttribute("data-info-attribution"),bspId:i.getAttribute("data-image-bsp-id"),galleryId:t.galleryId}}}))})}},{key:"getMediaQuery",value:function(){var t=window.getComputedStyle(document.querySelector("body"),"::before").getPropertyValue("content")||!1;return!!t&&t.replace(/["']/g,"")}},{key:"handleOptions",value:function(){this.optionsChanged=!1;var t="M22.4566257,37.2056786 L-21.4456527,71.9511488 C-22.9248661,72.9681457 -24.9073712,72.5311671 -25.8758148,70.9765924 L-26.9788683,69.2027424 C-27.9450684,67.6481676 -27.5292733,65.5646602 -26.0500598,64.5484493 L20.154796,28.2208967 C21.5532435,27.2597011 23.3600078,27.2597011 24.759951,28.2208967 L71.0500598,64.4659264 C72.5292733,65.4829232 72.9450684,67.5672166 71.9788683,69.1217913 L70.8750669,70.8956413 C69.9073712,72.4502161 67.9241183,72.8848368 66.4449048,71.8694118 L22.4566257,37.2056786 Z";this.carouselOptions={arrowShape:t,adaptiveHeight:!1,imagesLoaded:!0,pageDots:!1,lazyLoad:2},this.classList.contains("ListT")&&(this.carouselOptions={arrowShape:t,adaptiveHeight:!1,imagesLoaded:!0,pageDots:!0}),this.classList.contains("ListJ")&&(this.carouselOptions={arrowShape:t,adaptiveHeight:!1,imagesLoaded:!0,pageDots:!1,selectedAttraction:.018,groupCells:!0},"mq-md"===this.getMediaQuery()&&(this.carouselOptions.groupCells=2),"mq-lg"===this.getMediaQuery()&&(this.carouselOptions.groupCells=3),"mq-hk"===this.getMediaQuery()&&(this.carouselOptions.groupCells=3),"mq-xl"===this.getMediaQuery()&&(this.carouselOptions.groupCells=4),this.didMQChange()&&(this.optionsChanged=!0)),this.classList.contains("ListQ")&&(this.carouselOptions={arrowShape:t,adaptiveHeight:!1,imagesLoaded:!0,pageDots:!1,wrapAround:!0},"mq-xs"===this.getMediaQuery()&&(this.carouselOptions.groupCells=1,this.carouselOptions.cellAlign="left"),"mq-sm"===this.getMediaQuery()&&(this.carouselOptions.groupCells=3),"mq-md"===this.getMediaQuery()&&(this.carouselOptions.groupCells=4),"mq-lg"===this.getMediaQuery()&&(this.carouselOptions.groupCells=4),"mq-hk"!==this.getMediaQuery()&&"mq-xl"!==this.getMediaQuery()||(this.carouselOptions.groupCells=5),this.didMQChange()&&(this.optionsChanged=!0))}},{key:"didMQChange",value:function(){return this.changedBreakpoints=!1,"mq-xs"===this.getMediaQuery()&&"xs"!==this.breakpoint&&(this.changedBreakpoints=!0,this.breakpoint="xs"),"mq-sm"===this.getMediaQuery()&&"sm"!==this.breakpoint&&(this.changedBreakpoints=!0,this.breakpoint="sm"),"mq-md"===this.getMediaQuery()&&"md"!==this.breakpoint&&(this.changedBreakpoints=!0,this.breakpoint="md"),"mq-lg"===this.getMediaQuery()&&"lg"!==this.breakpoint&&(this.changedBreakpoints=!0,this.breakpoint="lg"),"mq-hk"===this.getMediaQuery()&&"hk"!==this.breakpoint&&(this.changedBreakpoints=!0,this.breakpoint="hk"),"mq-xl"===this.getMediaQuery()&&"xl"!==this.breakpoint&&(this.changedBreakpoints=!0,this.breakpoint="xl"),this.changedBreakpoints}},{key:"rebuildCarouselIfChanged",value:function(){this.optionsChanged&&(this.flickity.destroy(),this.flickity=new w.a(this.carouselSlides,this.carouselOptions),this.setTabIndexing())}},{key:"disconnectedCallback",value:function(){this.flickity.destroy()}}])&&k(i.prototype,n),r&&k(i,r),e}();function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function x(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(t){var e="function"==typeof Map?new Map:void 0;return(_=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return D(t,arguments,j(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),R(n,t)})(t)}function D(t,e,i){return(D=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&R(r,i.prototype),r}).apply(null,arguments)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var q=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,j(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(e,_(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){var t=this;window.addEventListener("load",function(){t.initCarousel(),t.handleStartButton(),t.handleAsideTrigger(),t.handleSlideChange()})}},{key:"initCarousel",value:function(){var t=this,e=this.querySelector(".GalleryPage-slides"),i=this.getAttribute("data-start-slide")||0,n={arrowShape:"M22.4566257,37.2056786 L-21.4456527,71.9511488 C-22.9248661,72.9681457 -24.9073712,72.5311671 -25.8758148,70.9765924 L-26.9788683,69.2027424 C-27.9450684,67.6481676 -27.5292733,65.5646602 -26.0500598,64.5484493 L20.154796,28.2208967 C21.5532435,27.2597011 23.3600078,27.2597011 24.759951,28.2208967 L71.0500598,64.4659264 C72.5292733,65.4829232 72.9450684,67.5672166 71.9788683,69.1217913 L70.8750669,70.8956413 C69.9073712,72.4502161 67.9241183,72.8848368 66.4449048,71.8694118 L22.4566257,37.2056786 Z",adaptiveHeight:!1,imagesLoaded:!0,initialIndex:i,pageDots:!1,lazyLoad:2};i>0&&this.setState("gallery"),this.flickity=new w.a(e,n),"mq-lg"!==this.getMediaQuery()&&"mq-xl"!==this.getMediaQuery()||"true"===this.getAttribute("data-with-aside")&&"gallery"===this.getAttribute("data-state")&&this.setAttribute("data-showing-aside",!0),window.addEventListener("load",function(){t.flickity.resize()})}},{key:"handleSlideChange",value:function(){var t=this;this.flickity.on("change",function(e){if(e>0){var i=t.flickity.selectedElement.querySelector(".GallerySlide-title"),n=t.flickity.selectedElement.querySelector(".GallerySlide-infoDescription"),r=t.flickity.selectedElement.querySelector(".GallerySlide-media"),o=t.querySelector(".GalleryPage-aside-slideContent"),a=t.querySelector(".GalleryPage-currentSlide");o.innerHTML="",i&&o&&(o.innerHTML+=i.outerHTML),n&&o&&(o.innerHTML+=n.outerHTML),a&&(a.innerHTML=e),document.body.dispatchEvent(new CustomEvent("Gallery:onSlideUpdate",{detail:{activeSlide:{index:e,title:i?i.getAttribute("data-info-title"):"",attribution:i?i.getAttribute("data-info-attribution"):"",bspId:r.getAttribute("data-image-bsp-id")}}})),t.preloadNextImage(e),t.setState("gallery")}else t.setState("start"),t.setAttribute("data-showing-aside",!0)})}},{key:"preloadNextImage",value:function(t){var e=t+1,i=null,n=null;e<=this.flickity.cells.length&&(i=this.flickity.cells[e].element)&&((n=i.querySelector('[data-lazy-load="true"]')).dataset.src&&(n.src=n.dataset.src,n.removeAttribute("data-src"),n.removeAttribute("data-lazy-load")),n.dataset.srcset&&(n.srcset=n.dataset.srcset,n.removeAttribute("data-srcset"),n.removeAttribute("data-lazy-load")))}},{key:"getMediaQuery",value:function(){var t=window.getComputedStyle(document.querySelector("body"),"::before").getPropertyValue("content")||!1;return!!t&&t.replace(/["']/g,"")}},{key:"setState",value:function(t){this.setAttribute("data-state",t),"start"===this.getAttribute("data-state")&&this.removeAttribute("data-showing-aside")}},{key:"handleAsideTrigger",value:function(){var t=this;this.querySelector(".GalleryPage-infoButton").addEventListener("click",function(e){e.preventDefault(),t.toggleAside()})}},{key:"toggleAside",value:function(){"true"===this.getAttribute("data-showing-aside")?this.setAttribute("data-showing-aside",!1):this.setAttribute("data-showing-aside",!0)}},{key:"handleStartButton",value:function(){var t=this,e=this.querySelector(".GalleryPage-start");e&&e.addEventListener("click",function(e){e.preventDefault(),t.flickity.next()})}}])&&I(i.prototype,n),r&&I(i,r),e}();var V={get:function(t){var e=document.cookie.match("(^|;) ?".concat(t,"=([^;]*)(;|$)")),i=e?unescape(e[2]):e;try{i=JSON.parse(i)}catch(t){}return i},set:function(t,e){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="".concat(t,"=").concat(escape(JSON.stringify(e)),"; path=").concat(r.path?escape(r.path):"/");return r.domain&&(o+="; domain=".concat(escape(r.domain))),r.secure&&(o+="; secure"),r.expires&&(o+="; expires=".concat(r.expires)),r.live&&(o+="; expires=".concat((i=r.live,(n=new Date).setDate(n.getDate()+parseInt(i)),n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),n.toUTCString()))),document.cookie=o,e},remove:function(t){var e=this.get(t);return this.set(t,e,{live:-1}),e}};function F(t){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?t():document.addEventListener("DOMContentLoaded",t)}function B(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function H(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"undefined"!=typeof googletag&&(this.selector=".GoogleDfpAd",this.timeout="undefined"!=typeof pbto?pbto:1500,this.restrictDataProcessing=dfpKV&&dfpKV.rdpMode&&("always"===dfpKV.rdpMode||"cookie"===dfpKV.rdpMode&&1===V.get("c_rdp")),this.amznTamEnabled="undefined"!=typeof apstag&&void 0!==dfpKV.amazonTamClientId,this.pbjsEnabled="undefined"!=typeof pbjs,this.bidders=["a9","prebid"],this.requestManager={},this.init())}var e,i,n;return e=t,(i=[{key:"init",value:function(){var t=this;if(this.currentMediaQuery=this.getMediaQuery(),this.googleAds=document.querySelectorAll(this.selector),this.googleAds.length){if(this.amznTamEnabled&&apstag.init({pubID:dfpKV.amazonTamClientId,adServer:"googletag",params:{aps_privacy:this.restrictDataProcessing?"1YY":"1YN"}}),this.posTracker={},this.removeArticleAsideAds(),window.innerWidth<560){var e=document.querySelector("#nativo_1");e&&e.remove()}this.bidResponseSizes={},this.googleAds=document.querySelectorAll(this.selector),Array.prototype.slice.call(this.googleAds).map(this.setAdPosition,this),this.initDfpEvents(),this.isSlotLazyLoadingDisabled=[].slice.call(this.googleAds).some(function(t){return t.hasAttribute("data-lazy-loading-disabled")}),this.isVisibiltyThresholdDisabled=[].slice.call(this.googleAds).some(function(t){return t.hasAttribute("data-visibility-threshold-disabled")})||!window.dfpKV.visibilityThresholdEnabled,window.dfpKV.lazyLoadingEnabled&&!this.isSlotLazyLoadingDisabled&&"IntersectionObserver"in window?(this.initAdIntersectionObserver(),this.initAdRefresh()):Promise.all(Array.prototype.slice.call(this.googleAds).map(this.processAd,this)).then(function(){t.fetchHeaderBids(t.getStaticSlots()),t.initAdRefresh()}),this.createResizeListener()}}},{key:"initDfpEvents",value:function(){var t=this;googletag.cmd.push(function(){t.restrictDataProcessing&&googletag.pubads().setPrivacySettings({restrictDataProcessing:!0}),googletag.pubads().addEventListener("slotRenderEnded",function(e){return t.onSlotRenderEnded(e)})}),this.pbjsEnabled&&pbjs&&pbjs.que.push(function(){pbjs.setConfig({consentManagement:{usp:{cmpApi:"static",consentData:{getUSPData:{uspString:t.restrictDataProcessing?"1YYN":"1YNN"}}}}}),pbjs.onEvent("bidResponse",function(e){return t.onBidResponse(e)})}),dfpKV&&dfpKV.refreshInterval&&document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this),!1)}},{key:"initAdIntersectionObserver",value:function(){var t=this,e="".concat(100*dfpKV.fetchOffset,"% 0%");this.fetchObserver=new IntersectionObserver(this.handleFetchObserver.bind(this),{rootMargin:e}),this.googleAds.forEach(function(e){t.fetchObserver.observe(e)})}},{key:"initAdRefresh",value:function(){var t=this;window.dfpKV.refreshInterval&&(!this.isVisibiltyThresholdDisabled&&"IntersectionObserver"in window?F(function(){t.initVisibilityObserver()}):(this.createScrollListener(),this.setRefreshInterval()))}},{key:"initVisibilityObserver",value:function(){var t=this,e=document.getElementsByClassName("Page-header"),i=e[0]?"-".concat(e[0].offsetHeight,"px 0px 0px 0px"):"0%";this.visibilityObserver=new IntersectionObserver(this.handleVisibilityObserver.bind(this),{threshold:[dfpKV.visibilityThreshold||.5],rootMargin:i}),window.dfpKV.lazyLoadingEnabled&&!this.isSlotLazyLoadingDisabled||this.googleAds.forEach(function(e){t.visibilityObserver.observe(e)})}},{key:"handleVisibilityChange",value:function(){var t=this;this.isVisibiltyThresholdDisabled?document.hidden?this.clearRefreshInterval():this.restoreRefreshInterval():Object.values(dfpAdSlotsObject).map(function(e){e.refreshInterval&&(document.hidden?(t.clearAdRefreshInterval(e),e.refreshInterval=!0):t.setAdRefreshInterval(e))})}},{key:"getAllSlots",value:function(){return Object.values(dfpAdSlotsObject).map(function(t){return t.slot})}},{key:"getStaticSlots",value:function(){return Object.values(staticAdSlots)}},{key:"setAdPosition",value:function(t){var e,i=t.getAttribute("data-slot-adSizeMap")||"",n=t.getAttribute("data-ad-type")||"",r=!0,o=-1,a=-1,s=window.innerWidth;if(null!=i&&i.length>0){var l;try{l=JSON.parse(i)}catch(t){console.warn("Error parsing adSizeMap",t),l=[]}l.forEach(function(t){var e=t.slice(1),i=t[0][0],n=!0;1===e.length&&0===e[0][0]&&0===e[0][1]&&(n=!1),void 0!==i&&i<=s&&(n&&i>a?a=i:!n&&i>o&&(o=i))})}o>=0&&o>a&&(r=!1,t.parentNode.setAttribute("data-hide-ad",!0)),n&&r&&(this.posTracker[n]||(this.posTracker[n]=1),e=this.posTracker[n],this.posTracker[n]++),e&&t.setAttribute("data-pos",e)}},{key:"setRefreshInterval",value:function(){var t=this;dfpKV&&dfpKV.refreshInterval&&(this.refreshSlotsInterval=setInterval(function(){return t.refreshSlots()},1e3*dfpKV.refreshInterval))}},{key:"restoreRefreshInterval",value:function(){var t=this,e=Object.values(dfpAdSlotsObject);if(e[0]){var i=function(){t.refreshSlots().then(function(){t.setRefreshInterval()})},n=1e3*dfpKV.refreshInterval-(new Date-e[0].refreshIntervalStartTime);n<=0?i():this.refreshSlotsInterval=setTimeout(i.bind(this),n)}}},{key:"clearRefreshInterval",value:function(){dfpKV&&dfpKV.refreshInterval&&(clearTimeout(this.refreshSlotsInterval),clearInterval(this.refreshSlotsInterval))}},{key:"refreshSlots",value:function(t){var e=this;return Promise.all(Object.keys(t||dfpAdSlotsObject).map(function(t){var i=dfpAdSlotsObject[t];if(i.refreshIntervalStartTime=new Date,i.hasRefreshed)return i.slot;var n=i.refreshInterval;return e.resetSlot(i.slot,i.element).then(function(e){return dfpAdSlotsObject[t].refreshInterval=n,e})})).then(function(t){(t=t.filter(function(t){return!1!==t})).length&&e.fetchHeaderBids(t)})}},{key:"resetSlot",value:function(t,e){if(e.getAttribute("data-hold-size")){var i=JSON.parse(e.getAttribute("data-hold-size"));if(this.isSizeExcludedFromRefresh(i))return Promise.resolve(!1)}return this.preserveSlotHeight(e),this.destroySlot(t,e),this.processAd(e)}},{key:"destroySlot",value:function(t,e){googletag.destroySlots([t]),e.removeAttribute("data-google-query-id"),e.innerHTML=""}},{key:"isSizeExcludedFromRefresh",value:function(t){return!!dfpKV.refreshExcludedSizes&&dfpKV.refreshExcludedSizes.some(function(e){return e[0]===t[0]&&e[1]===t[1]})}},{key:"isSizeEligibleForRefresh",value:function(t,e){return t[1]<=e[1]&&!this.isSizeExcludedFromRefresh(t)}},{key:"preserveSlotHeight",value:function(t){if(!t.getAttribute("data-hold-size")||t.parentElement.style.height)return!1;t.parentElement.style.height=t.parentElement.offsetHeight+"px",t.parentElement.style.overflow="hidden"}},{key:"getSlotEventSize",value:function(t){var e=t.size;if(e&&1===e[0]&&1===e[1]){var i=t.slot.getSlotId().getDomId();e=this.bidResponseSizes[i],delete this.bidResponseSizes[i]}return e}},{key:"setSlotHoldSize",value:function(t,e){var i=t.getAttribute("data-hold-size"),n=JSON.stringify(e);n&&(t.setAttribute("data-current-size",n),i||(dfpAdSlotsObject[t.id].hasRefreshed=!1,t.setAttribute("data-hold-size",n)))}},{key:"onSlotRenderEnded",value:function(t){if(t&&t.slot&&t.size){var e=t.slot.getSlotId().getDomId(),i=dfpAdSlotsObject[e].element;this.setSlotHoldSize(i,this.getSlotEventSize(t))}}},{key:"onBidResponse",value:function(t){this.setBidResponseSizes(t)}},{key:"setBidResponseSizes",value:function(t){if(!(t&&t.adUnitCode&&t.width&&t.height))return!1;this.bidResponseSizes[t.adUnitCode]=[t.width,t.height]}},{key:"constructRubiconSizeMapping",value:function(){for(var t=this,e={},i=this.getAllSlots(),n=0;n<i.length;n++){var r=i[n].getSlotId().getDomId(),o=document.getElementById(r),a=o.getAttribute("data-slot-adSizeMap");if(a){var s=void 0;try{s=JSON.parse(a)}catch(t){console.warn("Error parsing slotMaps",t),s=[]}for(var l=[],u=0;u<s.length;u++){var c=s[u],h=c.shift();o.getAttribute("data-hold-size")&&function(){var e=JSON.parse(o.getAttribute("data-hold-size"));c=c.filter(function(i){return t.isSizeEligibleForRefresh(i,e)})}(),l.push({minViewPort:h,sizes:c})}e[r]=l}}return e}},{key:"fetchHeaderBids",value:function(t){var e=this,i=(new Date).getTime();googletag.cmd.push(function(){if(e.pbjsEnabled&&pbjs.rp?pbjs.rp.requestBids({callback:function(){e.headerBidderBack("prebid",t,i)},gptSlotObjects:t,sizeMappings:e.constructRubiconSizeMapping()}):e.headerBidderBack("prebid",t,i),e.amznTamEnabled&&apstag){var n=Object.values(apstagSlots).filter(function(e){return t.some(function(t){return t.getSlotId().getDomId()===e.slotID})});n.length&&apstag.fetchBids({slots:n},function(){e.headerBidderBack("a9",t,i)})}else e.headerBidderBack("a9",t,i)}),window.setTimeout(function(){e.headerBidderBack("TIMEOUT",t,i)},this.timeout)}},{key:"allBiddersBack",value:function(t){var e=this,i=this.bidders.map(function(i){return e.requestManager[t][i]}).filter(Boolean).length===this.bidders.length;return i}},{key:"headerBidderBack",value:function(t,e,i){if(void 0===this.requestManager[i])this.requestManager[i]={};else if(this.requestManager[i].adserverRequestSent)return;"a9"===t?this.requestManager[i].a9=!0:"prebid"===t&&(this.requestManager[i].prebid=!0),(this.allBiddersBack(i)||"TIMEOUT"===t)&&(console.log("Sending server request",this.requestManager),this.sendAdserverRequest(e,i))}},{key:"sendAdserverRequest",value:function(t,e){var i=this;this.requestManager[e].adserverRequestSent||(this.requestManager[e].adserverRequestSent=!0,googletag.cmd.push(function(){i.amznTamEnabled&&apstag&&apstag.setDisplayBids(),googletag.pubads().refresh(t)}))}},{key:"removeArticleAsideAds",value:function(){var t=this,e=document.querySelector(".ArticlePage-main-content"),i=document.querySelector(".ArticlePage-aside-content"),n={},r=0,o=0,a=0,s=0,l=!1;if(i){if(n=i.querySelectorAll(this.selector),!e||!i)return;if(o=e.offsetHeight,r=i.offsetHeight,a=o-r,n.forEach(function(e){var i=e.parentNode;i.previousElementSibling&&i.previousElementSibling.classList.contains("GoogleDfpAd-wrapper")&&(l=!0),i.nextElementSibling&&i.nextElementSibling.classList.contains("GoogleDfpAd-wrapper")&&(l=!0),l&&("xs"===t.getMediaQuery||"sm"===t.getMediaQuery||"md"===t.getMediaQuery?i.parentNode.removeChild(i):a<0?i.parentNode.removeChild(i):(i.setAttribute("article-dynamic-aside",!0),s++))}),0!==s){if(a>600*s)return;var u=Math.floor(a/600);document.querySelectorAll('[article-dynamic-aside="true"]').forEach(function(t,e){e+1>u&&(t.parentNode.removeChild(t),s-=1)})}}}},{key:"processAd",value:function(t){var e=this;return new Promise(function(i,n){var r=t.getAttribute("data-hide-mobile")||!1,o=t.getAttribute("data-hide-desktop")||!1,a=t.parentNode.parentNode,s=window.innerWidth>560;if(s&&o||!s&&r)return s&&o&&a.classList.contains("Enhancement")&&(a.style.display="none"),t.parentNode.remove(),i(!1);var l,u=t.id,c=t.getAttribute("data-slot-name")||"",h=t.getAttribute("data-hold-size"),d=t.getAttribute("data-slot-sizes")||"",f=t.getAttribute("data-slot-adSizeMap")||"",p=t.getAttribute("data-out-of-page")||!1,y=t.getAttribute("data-pos"),v=t.getAttribute("data-module-targeting")||"",g={},m=d&&d.indexOf("[5, 1]")>-1;if(h){var b=JSON.parse(h);d=JSON.parse(d).filter(function(t){return e.isSizeEligibleForRefresh(t,b)}),d=JSON.stringify(d)}if(p){var A=d?JSON.parse(d):null;t.parentNode.setAttribute("data-hide-ad",!0),A&&Array.isArray(A)&&t.setAttribute("data-hold-size",JSON.stringify(A[0]))}"undefined"!=typeof googletag&&null!==googletag?googletag.cmd.push(function(){if((l=p?googletag.defineOutOfPageSlot(c,u):googletag.defineSlot(c,JSON.parse(d),u)).addService(googletag.pubads()),m&&t.parentNode.setAttribute("data-hide-ad",!0),g=v?JSON.parse(v):[],!Array.isArray(g))for(var n in g)l.setTargeting(n,g[n]);var r=V.get("uuid");if(r&&l.setTargeting("euuid",r),null!=f&&f.length>0){var o,a=googletag.sizeMapping();try{o=JSON.parse(f)}catch(t){console.warn("Error parsing adSizeMap",t),o=[]}o.forEach(function(t){var i=t.slice(1);if(1===i.length&&0===i[0][0]&&0===i[0][1]&&(i=[]),h){var n=JSON.parse(h);i=i.filter(function(t){return e.isSizeEligibleForRefresh(t,n)})}a.addSize(t[0],i)}),l.defineSizeMapping(a.build())}y&&l.setTargeting("position",[y]),googletag.display(u),dfpAdSlotsObject[u]={element:t,slot:l,hasRefreshed:Boolean(h),pos:y},"true"!==t.getAttribute("article-dynamic-aside")&&(staticAdSlots[u]=l),p||m||!e.amznTamEnabled||(apstagSlots[u]={slotID:u,slotName:c,sizes:JSON.parse(d)}),i(l)}):i(!1)})}},{key:"getMediaQuery",value:function(){var t=window.getComputedStyle(document.querySelector("body"),"::before").getPropertyValue("content")||!1;return!!t&&t.replace(/["']/g,"")}},{key:"createResizeListener",value:function(){var t=this;window.addEventListener("resize",b(250,function(){t.getMediaQuery()!==t.currentMediaQuery&&(t.currentMediaQuery=t.getMediaQuery(),Object.values(dfpAdSlotsObject).forEach(function(t){t.element.removeAttribute("data-hold-size"),t.element.parentElement.style.height="auto"}),t.refreshSlots())}))}},{key:"createScrollListener",value:function(){var t=document.querySelectorAll('[article-dynamic-aside="true"]'),e=this;if("IntersectionObserver"in window){var i=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){var n=t.target,r=n.id||"";dfpAdSlotsObject[r]&&e.fetchHeaderBids([dfpAdSlotsObject[r].slot]),i.unobserve(n)}})});t.forEach(function(t){i.observe(t)})}}},{key:"handleFetchObserver",value:function(t){var e=this;t.forEach(function(t){!dfpAdSlotsObject[t.target.id]&&t.isIntersecting&&(e.fetchObserver.unobserve(t.target),e.processAd(t.target).then(function(i){i&&(e.fetchHeaderBids([i]),dfpKV.refreshInterval&&!e.isVisibiltyThresholdDisabled&&(e.visibilityObserver?e.visibilityObserver.observe(t.target):F(function(){e.visibilityObserver.observe(t.target)})))}))})}},{key:"handleVisibilityObserver",value:function(t){var e=this;t.forEach(function(t){var i=dfpAdSlotsObject[t.target.id],n=t.isIntersecting&&t.intersectionRatio>=(dfpKV.visibilityThreshold||.5);i&&!i.refreshInterval&&n?e.setAdRefreshInterval(i):i&&i.refreshInterval&&!n&&e.clearAdRefreshInterval(i)})}},{key:"setAdRefreshInterval",value:function(t){var e=this;t.refreshIntervalStartTime?this.resumeAdRefreshInterval(t):(t.refreshIntervalStartTime=new Date,t.refreshInterval=setInterval(function(){e.refreshSlots(B({},t.element.id,t))},1e3*dfpKV.refreshInterval))}},{key:"resumeAdRefreshInterval",value:function(t){var e=this,i=function(t){var i=t.element.id;e.refreshSlots(B({},i,t)).then(function(){var t=dfpAdSlotsObject[i];t.refreshIntervalStartTime=null,e.setAdRefreshInterval(t)})},n=1e3*dfpKV.refreshInterval-(new Date-t.refreshIntervalStartTime);n<=0?i(t):t.refreshInterval=setTimeout(i.bind(this,t),n)}},{key:"clearAdRefreshInterval",value:function(t){clearInterval(t.refreshInterval),clearTimeout(t.refreshInterval),t.refreshInterval=null}}])&&H(e.prototype,i),n&&H(e,n),t}();function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q(t){var e="function"==typeof Map?new Map:void 0;return(Q=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return G(t,arguments,X(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Y(n,t)})(t)}function G(t,e,i){return(G=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&Y(r,i.prototype),r}).apply(null,arguments)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var J=function(t){function e(){var t,i,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=this,i=!(r=(t=X(e)).call.apply(t,[this].concat(a)))||"object"!==N(r)&&"function"!=typeof r?U(n):r,K(U(i),"settings",{autoplay:!1,muted:!1,seekSeconds:0}),K(U(i),"intervals",{playingInterval:5,playbackPosition:0,quartilePosition:-1}),K(U(i),"playerId",null),i}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(e,Q(HTMLElement)),i=e,(n=[{key:"init",value:function(){this.playerId=this.getAttribute("data-player-id"),this.platform=this.getPlatformName(),this.settings.videoId=this.getAttribute("data-video-id"),this.settings.videoTitle=this.getAttribute("data-video-title"),this.settings.autoplay=this.getAttribute("data-autoplay")||!1,this.settings.muted=this.getAttribute("data-muted"),this.settings.seekSeconds=this.getAttribute("data-seek-seconds")||0,this.settings.dfpUrl=this.getAttribute("data-dfp-url"),this.settings.inPlaylist="true"===this.parentElement.getAttribute("data-in-playlist")||!1,!0===this.settings.inPlaylist&&(this.settings.playlistPosition=this.getPlaylistPosition(this.settings.videoId))}},{key:"getVideoDuration",value:function(){}},{key:"onVideoReady",value:function(){var t=new window.CustomEvent("Video:onVideoLoaded",{bubbles:!0,detail:{playerId:this.playerId,video:this.video}});this.dispatchEvent(t)}},{key:"onVideoStart",value:function(){this.resetIntervals(),this.removeAttribute("data-playback-paused"),this.setAttribute("data-playback-started",!0),this.setAttribute("data-playback-playing",!0);var t=new window.CustomEvent("Video:onVideoPlaybackStarted",{bubbles:!0,detail:{playerId:this.playerId,videoPlatform:this.platform,video:this.video}});this.dispatchEvent(t)}},{key:"onVideoPlay",value:function(){this.removeAttribute("data-playback-paused"),this.setAttribute("data-playback-playing",!0);var t=new window.CustomEvent("Video:onVideoPlaybackPlay",{bubbles:!0,detail:{playerId:this.playerId,videoPlatform:this.platform,video:this.video}});this.dispatchEvent(t),console.log("super playing post dispatch")}},{key:"onVideoTimeUpdate",value:function(t){var e=t.secondsElapsed;this.sendVideoPlaybackIntervalEvents(e)}},{key:"onVideoMute",value:function(){this.setAttribute("data-muted",!0);var t=new window.CustomEvent("Video:onVideoPlaybackMuted",{bubbles:!0,detail:{playerId:this.playerId,videoPlatform:this.platform,video:this.video}});this.dispatchEvent(t)}},{key:"onVideoUnMute",value:function(){this.removeAttribute("data-muted");var t=new window.CustomEvent("Video:onVideoPlaybackUnMuted",{bubbles:!0,detail:{playerId:this.playerId,videoPlatform:this.platform,video:this.video}});this.dispatchEvent(t)}},{key:"onVideoPause",value:function(){this.setAttribute("data-playback-paused",!0),this.removeAttribute("data-playback-playing");var t=new window.CustomEvent("Video:onVideoPlaybackPaused",{bubbles:!0,detail:{playerId:this.playerId,videoPlatform:this.platform,video:this.video}});this.dispatchEvent(t)}},{key:"onVideoEnd",value:function(){this.removeAttribute("data-playback-paused"),this.setAttribute("data-playback-ended",!0);var t=new window.CustomEvent("Video:onVideoEnded",{bubbles:!0,detail:{playerId:this.playerId,videoPlatform:this.platform,video:this.video}});this.dispatchEvent(t)}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"playPause",value:function(){this.getAttribute("data-playback-paused")?this.play():this.pause()}},{key:"resetIntervals",value:function(){this.intervals={playingInterval:5,playbackPosition:0,quartilePosition:-1}}},{key:"sendVideoPlaybackIntervalEvents",value:function(t){var e=this.getVideoDuration();if(e&&0!==e){for(var i=t/e*100;t>this.intervals.playbackPosition+2*this.intervals.playingInterval;)this.intervals.playbackPosition+=this.intervals.playingInterval;if(t>=this.intervals.playbackPosition+this.intervals.playingInterval){this.intervals.playbackPosition+=this.intervals.playingInterval;var n=new window.CustomEvent("Video:onVideoTimeIntervalUpdate",{bubbles:!0,detail:{playerId:this.playerId,videoPlatform:this.platform,video:this.video,secondsElapsed:t}});this.dispatchEvent(n)}var r=null;if(i>=this.intervals.quartilePosition)if(-1===this.intervals.quartilePosition){if(i>=this.intervals.quartilePosition+25)for(this.intervals.quartilePosition=0;i>=this.intervals.quartilePosition;)this.intervals.quartilePosition+=25}else r=this.intervals.quartilePosition,this.intervals.quartilePosition+=25,100===this.intervals.quartilePosition&&(this.intervals.quartilePosition=95);if(null!==r){95===r&&(r=100);var o=new window.CustomEvent("Video:onVideoQuartileCompleted",{bubbles:!0,detail:{playerId:this.playerId,videoPlatform:this.platform,video:this.video,secondsElapsed:t,quartile:r}});this.dispatchEvent(o)}}}},{key:"getDisplayQuartile",value:function(t){return-1===t?0:50===t?25:75===t?50:95===t?75:100}},{key:"getCategory",value:function(){}},{key:"getCredit",value:function(){}},{key:"getDateline",value:function(){}},{key:"getIsAutoPlay",value:function(){}},{key:"getOwnerSite",value:function(){}},{key:"getPlatformName",value:function(){}},{key:"getPlayerHeight",value:function(){}},{key:"getPlayerWidth",value:function(){}},{key:"getPlayerResolution",value:function(){return this.getPlayerWidth()+" x "+this.getPlayerHeight()}},{key:"getPlaylistPosition",value:function(t){for(var e=document.querySelector("[data-playlist]"),i=e.querySelectorAll(".PlaylistItem"),n=e.querySelector("[data-video-id='".concat(t,"']")),r=0;r<i.length;r++)if(n===i[r])return r}},{key:"getSource",value:function(){}},{key:"getVideoFileType",value:function(){}},{key:"getVideoStatus",value:function(){return this.getAttribute("data-playback-playing")?"Playing":this.getAttribute("data-playback-paused")?"Paused":this.getAttribute("data-playback-ended")?"Ended":null}},{key:"getVideoUuid",value:function(){}},{key:"getVolume",value:function(){}},{key:"getStartVolume",value:function(){}},{key:"onVideoFullscreen",value:function(){}},{key:"video",get:function(){return{id:this.settings.videoId,videoPlatform:this.platform,seekSeconds:this.settings.seekSeconds,title:this.settings.videoTitle,inPlaylist:this.settings.inPlaylist,playlistPosition:this.settings.playlistPosition,duration:this.getVideoDuration(),playerWidth:this.getPlayerWidth(),playerHeight:this.getPlayerHeight(),playerResolution:this.getPlayerResolution(),isAutoPlay:this.getIsAutoPlay(),startVolume:this.getStartVolume(),volume:this.getVolume(),isFullscreen:this.onVideoFullscreen(),videoUuid:this.getVideoUuid(),videoFileType:this.getVideoFileType(),videoInitiation:this.getAttribute("data-playback-started")||!1,credit:this.getCredit(),ownerSite:this.getOwnerSite(),videoClassification:this.getCategory(),source:this.getSource(),location:this.getDateline(),videoStatus:this.getVideoStatus(),quartile:this.getDisplayQuartile(this.intervals.quartilePosition)}}}])&&W(i.prototype,n),r&&W(i,r),e}();function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function et(t,e,i){return(et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=it(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ot=function(t){function e(){var t,i,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=this,i=!(r=(t=it(e)).call.apply(t,[this].concat(a)))||"object"!==Z(r)&&"function"!=typeof r?tt(n):r,rt(tt(i),"playing",!1),rt(tt(i),"player",null),i}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(e,J),i=e,(n=[{key:"connectedCallback",value:function(){if(et(it(e.prototype),"init",this).call(this),this.player=this.querySelector("video"),this.accountId=this.player.getAttribute("data-account")||!1,this.playerId=this.player.getAttribute("data-player")||!1,this.videoId=this.player.getAttribute("data-video-id")||!1,this.category=this.getAttribute("data-category")||null,this.credit=this.getAttribute("data-credit")||null,this.location=this.getAttribute("data-location")||null,this.ownerSite=this.getAttribute("data-ownerSite")||"Global",this.source=this.getAttribute("data-source")||null,this.videoUuid=this.getAttribute("data-video-uuid")||!1,this.videoFileType=this.getAttribute("data-video-file-type")||!1,!(this.accountId&&this.playerId&&this.videoId))return console.info("Brightcove Video Player: Cannot play video, no account, player or video ID found"),!1;this.init()}},{key:"disconnectedCallback",value:function(){window.videojs.getPlayers()["brightcove-video-"+this.videoId]&&delete window.videojs.getPlayers()["brightcove-video-"+this.videoId]}},{key:"init",value:function(){this.loadBrightcoveApi(this.accountId,this.playerId)}},{key:"onBrightcoveAPIReady",value:function(){var t=this;this.videoPlayer=this.querySelector("video"),this.thePlayer=window.videojs(this.videoPlayer.id),this.prerollAdCode(),window.videojs(this.videoPlayer).on("loadedmetadata",function(){t.startVolume=t.thePlayer.volume(),t.tieIntoEvents()})}},{key:"getVideoDuration",value:function(){return this.player.duration||0}},{key:"loadBrightcoveApi",value:function(t,e){var i=document.createElement("script");i.src="https://players.brightcove.net/"+t+"/"+e+"_default/index.min.js",i.addEventListener("load",this.onBrightcoveAPIReady.bind(this));var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)}},{key:"prerollAdCode",value:function(){var t=this;this.thePlayer.ima3&&this.thePlayer.ima3.ready(function(){t.thePlayer.ima3.settings.debug=!0;var e=window.dataLayer?window.dataLayer.pixelId:"",i=V.get("uuid")||"",n="https://pubads.g.doubleclick.net/gampad/ads?",r="&clip="+t.videoId,o="&player_width="+t.videoPlayer.offsetWidth,a="&player_height="+t.videoPlayer.offsetHeight,s="&pagetype="+t.getAttribute("data-ad-ptype"),l="&epvid="+e,u="&euuid="+i,c="&cust_params="+encodeURIComponent("position=preroll&player=bc&sz=3x3&tile=13"+r+o+a+s+"&pl=false&exop=false&muted=false"+u+l);n+="position=preroll",n+="&sz=3x3",n+="&iu="+encodeURIComponent(t.getAttribute("data-ad-slot")),n+="&ciu_szs",n+="&gdfp_req=1",n+="&env=vp",n+="&output=xml_vast3",n+=s,n+="&unviewed_position_start=1",n+="&player=bc",n+="&muted=false",n+=o,n+=a,n+="&exop=false",n+="&pl=false",n+="&vd=",n+="&vt=",n+="&vc=",n+=r,n+="&correlator="+(new Date).getTime(),n+="&tile=13",n+="&pxlid="+e,n+=l,n+=u,n+=c,t.thePlayer.ima3.settings.serverUrl=n})}},{key:"tieIntoEvents",value:function(){var t=this;et(it(e.prototype),"onVideoReady",this).call(this),this.thePlayer.on("playing",function(e){t.onPlayerPlay(e)}),this.thePlayer.on("pause",function(e){t.onPlayerPause(e)}),this.thePlayer.on("timeupdate",function(e){t.onPlayerTimeUpdate(e)}),this.thePlayer.on("ended",function(e){t.onPlayerEnd(e)}),this.thePlayer.on("fullscreenchange",function(e){t.onVideoFullscreen(e)})}},{key:"onPlayerPlay",value:function(t){this.playing?et(it(e.prototype),"onVideoPlay",this).call(this,t):(this.playing=!0,et(it(e.prototype),"onVideoStart",this).call(this,t))}},{key:"onPlayerPause",value:function(t){et(it(e.prototype),"onVideoPause",this).call(this,t)}},{key:"onVideoFullscreen",value:function(t){return null!==document.fullscreenElement}},{key:"onPlayerTimeUpdate",value:function(t){et(it(e.prototype),"onVideoTimeUpdate",this).call(this,{secondsElapsed:this.thePlayer.currentTime()})}},{key:"onPlayerEnd",value:function(t){this.playing=!1,et(it(e.prototype),"onVideoEnd",this).call(this,t)}},{key:"play",value:function(){this.thePlayer.play()}},{key:"pause",value:function(){this.thePlayer.pause()}},{key:"getCategory",value:function(){return this.category}},{key:"getCredit",value:function(){return this.credit}},{key:"getDateline",value:function(){return this.location}},{key:"getIsAutoPlay",value:function(){return this.thePlayer.autoplay()}},{key:"getOwnerSite",value:function(){return this.ownerSite}},{key:"getPlatformName",value:function(){return"brightcove"}},{key:"getPlayerHeight",value:function(){return this.thePlayer.height()+"px"}},{key:"getPlayerWidth",value:function(){return this.thePlayer.width()+"px"}},{key:"getSource",value:function(){return this.source}},{key:"getVideoFileType",value:function(){return this.videoFileType}},{key:"getVideoUuid",value:function(){return this.videoUuid}},{key:"getVolume",value:function(){return this.thePlayer.volume()}},{key:"getStartVolume",value:function(){return this.startVolume}}])&&$(i.prototype,n),r&&$(i,r),e}();function at(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var st=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),window.dataLayer=window.dataLayer||{};var i=this,n="".concat(Date.now()+Math.ceil(window.crypto?window.crypto.getRandomValues(new Uint32Array(1))[0]:Math.random()));i.setLayer({pixelId:n}),document.body.addEventListener("click",function(e){if("a"===e.target.tagName.toLowerCase()&&e.target.closest("[data-click]")){var n=e.target.getAttribute("href");if(!n)return;if(!n.startsWith(window.location.origin))return void i.setLayer({externalClick:n});var r=t.getClickData(e.target);r&&e.target.setAttribute("href",n+(-1===n.indexOf("#")?"#":"")+"nt="+r)}if(e.target.closest("a[data-social-service]")){var o=e.target.closest("a[data-social-service]").getAttribute("data-social-service");i.setLayer({socialShare:o}),window.Bootstrapper&&window.Bootstrapper.ensEvent.trigger(o)}},!1);var r=window.location.hash;if(r){this.setLayer({hash:r});var o=r.split("nt=");if(o.length>1){var a=o.pop();a.startsWith("nav")?this.setLayer({navClickData:a}):this.setLayer({clickData:a}),o[0]&&"#"!==o[0]?window.location.hash=o[0]:window.history.replaceState(null,null," ")}}var s=document.referrer;if(s&&(this.setLayer({referrer:s}),s.indexOf(document.location.host)>0)){if(s.startsWith("https://www.google.com/amp/s/")){var l=s.replace("https://www.google.com/amp/s/",document.location.protocol+"//").replace("%3f_amp=true","");this.setLayer({ampReferrer:l})}}var u=document.cookie?document.cookie.length:0;this.setLayer({cookieSize:u});var c=Math.floor(u/100),h=100*c+"-"+(100*(c+1)-1);this.setLayer({binnedCookieSize:h});var d=navigator.userAgent;d&&this.setLayer({userAgent:d}),document.body.addEventListener("Comments:onCommentsOpen",function(){e.setLayer({commentsOpened:!0})}),document.body.addEventListener("NewsletterModule:subscribe",function(t){var i=t.detail.email;e.setLayer({newsletterEmail:i})}),document.body.addEventListener("Scroll:onPageScroll",function(t){e.setLayer({scrolling:t.detail.data})}),document.body.addEventListener("Search:onSearchUpdate",function(t){try{var e=document.createElement("html");e.innerHTML=t.detail.responseMarkup;var i=e.querySelector("#head-dl");if(!i)return;var n=i.innerHTML,r=JSON.parse(/var dataLayer =(.*);$/.exec(n)[1]);r&&(window.dataLayer=r)}catch(t){console.log("Failed to parse dataLayer from AJAX search",t)}}),document.body.addEventListener("Video:onVideoPlaybackStarted",function(t){var i=t.detail.video;i.action="Started",i.videoPlatform=t.detail.videoPlatform,e.setLayer({video:i})}),document.body.addEventListener("Video:onVideoLoaded",function(t){var e=t.detail.video;window.dataLayer||(window.dataLayer={}),window.dataLayer.loadedVideos||(window.dataLayer.loadedVideos=[]),window.dataLayer.loadedVideos.push(e)}),document.body.addEventListener("Video:onVideoPlaybackPlay",function(t){var i=t.detail.video;i.action="Play",i.videoPlatform=t.detail.videoPlatform,e.setLayer({video:i})}),document.body.addEventListener("Video:onVideoEnded",function(t){var i=t.detail.video;i.action="Ended",i.videoPlatform=t.detail.videoPlatform,e.setLayer({video:i})}),document.body.addEventListener("Video:onVideoQuartileCompleted",function(t){var i=null;switch(t.detail.quartile){case 25:i="Video 25% Completed";break;case 50:i="Video 50% Completed";break;case 75:i="Video 75% Completed";break;case 100:i="Video 100% Completed"}if(i){var n=t.detail.video;n.action=i,n.value=t.detail.quartile,n.videoPlatform=t.detail.videoPlatform,e.setLayer({video:n})}}),document.body.addEventListener("Video:onVideoTimeIntervalUpdate",function(t){var i=t.detail.video;i.action="Time update",i.videoPlatform=t.detail.videoPlatform,e.setLayer({video:i})}),document.body.addEventListener("Video:onVideoPlaybackMuted",function(t){var i=t.detail.video;i.action="Video muted",i.videoPlatform=t.detail.videoPlatform,e.setLayer({video:i})}),document.body.addEventListener("Video:onVideoPlaybackUnmuted",function(t){var i=t.detail.video;i.action="Video unmuted",i.videoPlatform=t.detail.videoPlatform,e.setLayer({video:i})}),document.body.addEventListener("Video:onVideoPlaybackPaused",function(t){var i=t.detail.video;i.action="Video pause",i.videoPlatform=t.detail.videoPlatform,e.setLayer({video:i})}),document.body.addEventListener("Gallery:onSlideUpdate",function(t){e.setLayer({activeSlide:t.detail.activeSlide})}),document.body.addEventListener("Carousel:onSlideUpdate",function(t){e.setLayer({activeSlide:t.detail.activeSlide})}),document.body.addEventListener("Gallery:onOverlayClose",function(){e.deleteLayer("activeSlideNumber")})}var e,i,n;return e=t,n=[{key:"getClickData",value:function(t){for(var e=[];t&&t!==document;t=t.parentNode)t.matches("[data-click]")&&e.push(t.getAttribute("data-click"));return e.length?e.join("-"):""}}],(i=[{key:"setLayer",value:function(t){window.dataLayer=Object.assign(window.dataLayer||{},t)}},{key:"deleteLayer",value:function(t){window.dataLayer&&delete window.dataLayer[t]}}])&&at(e.prototype,i),n&&at(e,n),t}();function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ht(t,e,i){return(ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dt(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ft(t,e){return(ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var yt=function(t){function e(){var t,i,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=this,i=!(r=(t=dt(e)).call.apply(t,[this].concat(a)))||"object"!==lt(r)&&"function"!=typeof r?ct(n):r,pt(ct(i),"playing",!1),pt(ct(i),"player",null),i}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ft(t,e)}(e,J),i=e,(n=[{key:"connectedCallback",value:function(){ht(dt(e.prototype),"init",this).call(this),this.init()}},{key:"init",value:function(){var t=this;this.player=this.querySelector(".HTML5VideoPlayer-video"),ht(dt(e.prototype),"onVideoReady",this).call(this),this.player.addEventListener("play",function(i){t.playing?ht(dt(e.prototype),"onVideoPlay",t).call(t,i):(t.playing=!0,ht(dt(e.prototype),"onVideoStart",t).call(t,i))}),this.player.addEventListener("pause",function(i){ht(dt(e.prototype),"onVideoPause",t).call(t,i)}),this.player.addEventListener("timeupdate",function(){ht(dt(e.prototype),"onVideoTimeUpdate",t).call(t,{secondsElapsed:t.player.currentTime})}),this.player.addEventListener("ended",function(i){t.playing=!1,ht(dt(e.prototype),"onVideoEnd",t).call(t,i)})}},{key:"getVideoDuration",value:function(){return this.player.duration||0}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"getPlatformName",value:function(){return"html5"}}])&&ut(i.prototype,n),r&&ut(i,r),e}();function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mt(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bt(t){var e="function"==typeof Map?new Map:void 0;return(bt=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return At(t,arguments,St(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),wt(n,t)})(t)}function At(t,e,i){return(At=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&wt(r,i.prototype),r}).apply(null,arguments)}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mt(this,St(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(e,bt(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){var t=this.innerHTML,e=document.createElement("iframe"),i="100%";this.innerHTML="","\x3c!--"===t.substring(0,4)&&(t=(t=t.slice(4)).slice(0,t.length-4)),e.width="100%",e.height=i,e.frameBorder="0",this.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.write("<!DOCTYPE HTML><html><head></head><body>"+t+"</body></html>"),e.contentWindow.document.close(),i=e.contentWindow.document.body.clientHeight?e.contentWindow.document.body.clientHeight:e.contentWindow.document.body.offsetHeight,e.height=i}}])&&gt(i.prototype,n),r&&gt(i,r),e}();var Et="embed-size",Pt="amp",Ot=function(t){var e=t.allowfullscreen;void 0===e&&(e=!1);var i=t.name,n=t.referrerpolicy,r=t.sandbox;void 0===r&&(r="allow-scripts");var o=t.src,a=t.title;this.container=t.container,this.src=o,this.allowfullscreen=e,this.name=i,this.referrerpolicy=n,this.sandbox=r,this.title=a,this.i=this.i.bind(this),window.addEventListener("message",this.i,!1),this.t()};function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Tt(t,e){return!e||"object"!==Lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mt(t){var e="function"==typeof Map?new Map:void 0;return(Mt=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return It(t,arguments,_t(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),xt(n,t)})(t)}function It(t,e,i){return(It=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&xt(r,i.prototype),r}).apply(null,arguments)}function xt(t,e){return(xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Ot.prototype.remove=function(){window.removeEventListener("message",this.i,!1),this.container.removeChild(this.iframe),this.iframe=null},Ot.prototype.t=function(){var t=this.iframe=document.createElement("iframe");t.setAttribute("src",this.src),t.setAttribute("width","100%"),t.setAttribute("scrolling","no"),t.setAttribute("marginheight","0"),t.setAttribute("frameborder","0"),this.allowfullscreen&&t.setAttribute("allowfullscreen",""),this.name&&t.setAttribute("name",name),this.referrerpolicy&&t.setAttribute("referrerpolicy",this.referrerpolicy),t.setAttribute("sandbox",this.sandbox),this.title&&t.setAttribute("title",this.title),this.container.appendChild(t)},Ot.prototype.i=function(t){if(t.source===this.iframe.contentWindow){var e=t.data;e.sentinel===Pt&&e.type===Et&&this.o(e.height)}},Ot.prototype.o=function(t){this.iframe.setAttribute("height",t)};var Dt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Tt(this,_t(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}(e,Mt(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){var t=this.getAttribute("use-responsive-height"),e=this.getAttribute("src");if("true"===t){new Ot({container:this,src:e});var i=this.getAttribute("width");i&&(this.parentElement.style.width="".concat(i,"px"))}}}])&&Ct(i.prototype,n),r&&Ct(i,r),e}();function Rt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var jt=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"IntersectionObserver"in window?(this.modernBrowsers(),document.body.addEventListener("Ajax:Rendered",function(){e.modernBrowsers()})):(this.oldskool(),document.body.addEventListener("Ajax:Rendered",function(){e.oldskool()}))}var e,i,n;return e=t,(i=[{key:"modernBrowsers",value:function(){var t=[].slice.call(document.querySelectorAll("[data-lazy-load]")),e=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){var i=t.target;i.dataset.src&&(i.src=i.dataset.src),i.dataset.srcset&&(i.srcset=i.dataset.srcset),i.removeAttribute("data-lazy-load"),e.unobserve(i)}})});t.forEach(function(t){e.observe(t)})}},{key:"oldskool",value:function(){var t=!1,e=[].slice.call(document.querySelectorAll("[data-lazy-load]")),i=function i(){!1===t&&(t=!0,setTimeout(function(){e.forEach(function(t){t.getBoundingClientRect().top<=window.innerHeight&&t.getBoundingClientRect().bottom>=0&&"none"!==window.getComputedStyle(t).display&&(t.dataset.src&&(t.src=t.dataset.src),t.dataset.srcset&&(t.srcset=t.dataset.srcset),t.removeAttribute("data-lazy-load"),0===(e=e.filter(function(e){return e!==t})).length&&(document.removeEventListener("scroll",i),window.removeEventListener("resize",i),window.removeEventListener("orientationchange",i)))}),t=!1},200))};document.addEventListener("scroll",i),window.addEventListener("resize",i),window.addEventListener("orientationchange",i),i()}}])&&Rt(e.prototype,i),n&&Rt(e,n),t}();function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ft(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bt(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ht(t){var e="function"==typeof Map?new Map:void 0;return(Ht=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return zt(t,arguments,Wt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Nt(n,t)})(t)}function zt(t,e,i){return(zt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&Nt(r,i.prototype),r}).apply(null,arguments)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ut={selItems:"[data-list-loadmore-items]",selPagination:"[data-list-loadmore-pagination]",pageCacheRegex:/(list-page=.*)_([0-9]*)$/},Qt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bt(this,Wt(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(e,Ht(HTMLElement)),i=e,r=[{key:"findClassNameMatches",value:function(t,e){return t.querySelectorAll("[class=".concat(e,"]"))}}],(n=[{key:"connectedCallback",value:function(t){this.el=this,this.settings=Object.assign({},Ut,t),this.el.setAttribute("data-list-loadmore",""),this.pageHrefCache=[1],this.init()}},{key:"init",value:function(){this.elItems=this.el.querySelector(this.settings.selItems),this.setBinds()}},{key:"loadMore",value:function(t,i){var n=this,r=this,o=this.el.className,a=e.findClassNameMatches(document,o),s=Array.from(a).indexOf(this.el);this.pageHrefCache.push(this.getPageNum(t)),this.el.setAttribute("data-list-loadmore","loading"),window.fetch(t,{credentials:"include"}).then(function(t){return t.text()}).then(function(t){var a=document.createElement("div");a.innerHTML=t;var l=e.findClassNameMatches(a,o),u=l[s].querySelector(r.settings.selItems),c=l[s].querySelector(r.settings.selPagination);"function"==typeof i?i(u,c,l[s]):n.render(u,c,r.elItems,r.elPagination)}).catch(function(t){console.log(t)})}},{key:"next",value:function(t){if(this.elPagination){var e=this.elPagination.querySelector("a");if(e){var i=e.dataset.paginationLink;i&&this.loadMore(i,t)}}}},{key:"setBinds",value:function(){var t=this;this.elPagination&&this.elPagination.addEventListener("click",function(e){var i=e.target;if("A"===i.nodeName.toUpperCase()){e.preventDefault();var n=i.dataset.paginationLink;n&&t.loadMore(n)}})}},{key:"getPageNum",value:function(t){try{var e=this.settings.pageCacheRegex.exec(t);return parseInt(e[2])}catch(e){return console.info("ListLoadMore","".concat(t," not a new page number")),0}}},{key:"updatePaginationDOM",value:function(t){var e=this;Vt(t.querySelectorAll(":scope > a")).forEach(function(t){var i=t.dataset.paginationLink;e.pageHrefCache.indexOf(e.getPageNum(i))>=0&&t.parentNode.removeChild(t)}),this.elPagination.innerHTML=t.innerHTML}},{key:"render",value:function(t,e){t&&this.elItems.insertAdjacentHTML("beforeend",t.innerHTML),e?this.updatePaginationDOM(e):this.elPagination.parentNode.removeChild(this.elPagination),this.el.setAttribute("data-list-loadmore",""),this.dispatchRendered()}},{key:"dispatchRendered",value:function(){var t=new window.CustomEvent("Ajax:Rendered",{bubbles:!0});document.body.dispatchEvent(t)}},{key:"elPagination",get:function(){return this.el.querySelector(this.settings.selPagination)}}])&&Ft(i.prototype,n),r&&Ft(i,r),e}(),Gt=i(10);function Yt(t){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kt(t,e){return!e||"object"!==Yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $t=function(){var t=(new window.Date).getTime();return t-t%15e3},te=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Kt(this,Jt(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(e,window.HTMLElement),i=e,(n=[{key:"connectedCallback",value:function(){Object(Gt.polyfill)(),this.locale=window.document.querySelector("html").getAttribute("lang")||"en",this.endpoint=this.getAttribute("data-posts-endpoint"),this.liveEvent=this.getAttribute("data-live-event"),this.cacheElements(),this.renderPinnedTimestamps(),this.endpoint&&this.getInitialPosts(),this.liveEvent&&this.endpoint&&this.setupLiveEvent(),this.setupAsideNavigation()}},{key:"cacheElements",value:function(){this.aside=this.querySelector(".LiveBlogPage-aside"),this.asideNav=this.querySelector(".LiveBlogPage-aside-navigation"),this.postsContainer=this.querySelector(".LiveBlogPage-posts"),this.pinnedPosts=this.querySelector(".LiveBlogPage-pinnedPosts")}},{key:"renderPinnedTimestamps",value:function(){var t=this;this.pinnedPosts&&this.pinnedPosts.querySelectorAll(".LiveBlogPost").forEach(function(e){t.renderDateTimestamp(e)})}},{key:"setupAsideNavigation",value:function(){var t=this;this.asideNav.addEventListener("click",function(e){var i=e.target.parentNode;if(i.classList.contains("LiveBlogPage-aside-navigation-link")){e.preventDefault();var n=i.getAttribute("href").split("#")[1]||!1;n&&(t.scrollToElement(n),window.history.replaceState("",window.document.title,"#"+n))}},!0)}},{key:"checkForDeeplink",value:function(){var t=window.location.hash.split("#")[1]||!1,e=this;t&&window.setTimeout(function(){e.scrollToElement(t)},1e3)}},{key:"scrollToElement",value:function(t){var e=document.getElementById(t);if(e){var i=document.querySelector("header").offsetHeight,n=e.offsetTop-i-10;window.scrollTo(0,n)}}},{key:"setupLiveEvent",value:function(){var t=this;this.liveEventInterval=setInterval(function(){t.getNewPosts()},15e3)}},{key:"getNewPosts",value:function(){var t=this,e=this.endpoint.indexOf("?")>-1?"&":"?",i=$t(),n=function(){var t=document.querySelector(".LiveBlogPage-posts"),e=t?t.querySelector(".LiveBlogPost"):null;if(e){var i=e.querySelector(".LiveBlogPost-date"),n=i?i.getAttribute("data-timestamp"):null;return n?parseFloat(n):null}return null}()||i-15e3;this.getPosts(this.endpoint+e+"since="+n+"&_="+i).then(function(e){e.querySelectorAll(".LiveBlogPost").length>0&&t.renderPosts(e)})}},{key:"getInitialPosts",value:function(){var t=this;this.setLoadingState();var e=this.endpoint.indexOf("?")>-1?"&":"?";this.getPosts(this.endpoint+e+"_="+$t()).then(function(e){t.removeLoadingState(),t.renderPosts(e),t.checkForDeeplink()})}},{key:"renderPosts",value:function(t){var e=this;t.querySelectorAll(".LiveBlogPost").forEach(function(t){e.renderDateTimestamp(t);var i=document.createRange().createContextualFragment('<div class="LiveBlogPost">'+t.innerHTML+"</div>");e.postsContainer.prepend(i),e.addNavItem(t)})}},{key:"renderDateTimestamp",value:function(t){var e=parseInt(t.querySelector(".LiveBlogPost-date").getAttribute("data-timestamp")),i=new window.Date(e);t.querySelector(".LiveBlogPost-date-time").innerHTML=i.toLocaleString(this.locale,{hour:"numeric",minute:"numeric",hour12:!0}),t.querySelector(".LiveBlogPost-date-date").innerHTML=i.toLocaleString(this.locale,{month:"long",day:"numeric"})}},{key:"addNavItem",value:function(t){var e={anchor:t.querySelector(".LiveBlogPost-anchor").getAttribute("id"),timestamp:parseInt(t.querySelector(".LiveBlogPost-date").getAttribute("data-timestamp")),headline:t.querySelector(".LiveBlogPost-headline").innerHTML},i=new Date(e.timestamp),n=(window.Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())-window.Date.UTC(i.getFullYear(),0,0))/24/60/60/1e3,r=i.toLocaleString(this.locale,{month:"long",day:"numeric"});e.timestamp=i.toLocaleString(this.locale,{hour:"numeric",minute:"numeric",hour12:!0});var o='<li class="LiveBlogPage-aside-navigation-item"><a class="LiveBlogPage-aside-navigation-link" href="#'.concat(e.anchor,'"><div class="LiveBlogPage-aside-navigation-item-date">').concat(e.timestamp,'</div><div class="LiveBlogPage-aside-navigation-item-headline">').concat(e.headline,"</div></a></li>"),a='<div class="LiveBlogPage-aside-navigation-date" data-day="'.concat(n,'"><div class="LiveBlogPage-aside-navigation-date-date">').concat(r,'</div><ul class="LiveBlogPage-aside-navigation-items"></ul></div>'),s=this.asideNav.querySelectorAll(".LiveBlogPage-aside-navigation-date");if(s.length>0){var l=!1;s.forEach(function(t){parseInt(t.getAttribute("data-day"))===n&&(t.querySelector(".LiveBlogPage-aside-navigation-items").innerHTML=o+t.querySelector(".LiveBlogPage-aside-navigation-items").innerHTML,l=!0)}),l||(this.asideNav.innerHTML=a+this.asideNav.innerHTML,this.asideNav.querySelector(".LiveBlogPage-aside-navigation-items").innerHTML+=o)}else this.asideNav.innerHTML+=a,this.asideNav.querySelector(".LiveBlogPage-aside-navigation-items").innerHTML+=o}},{key:"getPosts",value:function(t){return new Promise(function(e,i){window.fetch(t,{credentials:"include"}).then(function(t){return t.text()}).then(function(t){var i=document.createElement("div");i.innerHTML=t;var n=i.querySelector(".LiveBlogPosts");e(n)}).catch(function(){i()})})}},{key:"setLoadingState",value:function(){var t=document.createElement("div");t.classList.add("loading-icon"),this.postsContainer.appendChild(t),this.setAttribute("data-loading",!0)}},{key:"removeLoadingState",value:function(){var t=this.postsContainer.querySelector(".loading-icon");t.parentNode.removeChild(t),this.removeAttribute("data-loading")}}])&&Xt(i.prototype,n),r&&Xt(i,r),e}();function ee(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ie=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"getDeltaEpoch",value:function(t){var e=(new window.Date).getTime();return e-e%t}},{key:"getRecentEpoch",value:function(t){return t?parseFloat(t):null}}],(i=null)&&ee(e.prototype,i),n&&ee(e,n),t}();function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function re(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oe(t,e){return!e||"object"!==ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var le=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),oe(this,ae(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(e,window.HTMLElement),i=e,r=[{key:"handleIntersect",value:function(t,e){t.forEach(function(t){var e=t.isIntersecting?"none":"block";document.getElementById("LiveChat-NewMessageButton")&&(document.getElementById("LiveChat-NewMessageButton").style.display=e)})}}],(n=[{key:"connectedCallback",value:function(){this.isCurrentlyActive=this.hasAttribute("data-currently-active")&&"true"===this.getAttribute("data-currently-active"),this.isCurrentlyActive&&this._init(),this.button=document.querySelector("#LiveChat-NewMessageButton"),this.bottomButton=this.querySelector("#LiveChat-OldMessageButton"),this._addEventListeners()}},{key:"_init",value:function(){this.endpoint=this.getAttribute("data-messages-endpoint"),this.chatId=this.getAttribute("data-livechat-id"),this.lastTimestamp=this.getMostRecentTimestamp(),this.pollForNewMessages()}},{key:"_addEventListeners",value:function(){var t=this;this.button&&this.button.addEventListener("click",function(){t.scrollToMostRecentMessage()}),window.addEventListener("load",function(){t.initChatIntersectionObserver()}),this.isCurrentlyActive||this.bottomButton.addEventListener("click",function(t){window.scrollTo(0,0)})}},{key:"pollForNewMessages",value:function(){var t=this;return setInterval(function(){t._fetchMessages().then(function(e){e&&(e.forEach(function(e){document.getElementById(e.getAttribute("id"))||t._renderMessage(e)}),t.lastTimestamp=t.getMostRecentTimestamp())})},3e3)}},{key:"_fetchMessages",value:function(){var t=this,e=ie.getDeltaEpoch(3e3),i=ie.getRecentEpoch(this.lastTimestamp)||e-3e3,n=this.endpoint+"?livechat_id="+this.chatId+"&since="+i+"&_="+e;return window.fetch(n,{credentials:"include"}).then(function(t){return t.text()}).then(function(e){var i=t._extractMessages(e);return i.length>0?i:null}).catch(function(t){console.log(t)})}},{key:"_extractMessages",value:function(t){var e=document.createElement("div");e.innerHTML=t;var i=e.querySelector("ul.LiveChatMessages");return i?i.querySelectorAll("li.LiveChatMessage"):[]}},{key:"_renderMessage",value:function(t){var e=document.createRange().createContextualFragment(t.outerHTML);document.querySelector("ul.LiveChatMessages").append(e),window.twttr&&t.querySelector(".twitter-tweet")&&window.twttr.widgets.load(document.getElementById(t.getAttribute("id")))}},{key:"scrollToElement",value:function(t){var e=document.getElementById(t),i="LiveChat-NewMessageButton"===t?200:250;if(e){var n=document.querySelector("header").offsetHeight,r=e.offsetTop-n-i;window.scrollTo(0,r)}}},{key:"getMostRecentMessage",value:function(){var t=this.querySelectorAll("li.LiveChatMessage");return t.length>0?t.item(t.length-1):null}},{key:"getMostRecentTimestamp",value:function(){var t=this.getMostRecentMessage();if(t)return t.getAttribute("data-epoch");var e=new Date(Date.now());return e.setSeconds(0,0),e.getTime()}},{key:"scrollToMostRecentMessage",value:function(){var t=this.getMostRecentMessage();t&&this.scrollToElement(t.getAttribute("id"))}},{key:"initChatIntersectionObserver",value:function(){if("IntersectionObserver"in window){this.observer=new IntersectionObserver(e.handleIntersect,{root:null,rootMargin:"0px",threshold:[0,.5]}),this.observer.observe(document.getElementsByClassName("Page-footer")[0])}}}])&&re(i.prototype,n),r&&re(i,r),e}();function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function he(t,e){return!e||"object"!==ue(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),he(this,de(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(e,window.HTMLElement),i=e,(n=[{key:"connectedCallback",value:function(){var t=this;this.form=this.querySelector("form"),this.emailInputDiv=this.form.querySelector("div.EmailInput"),this.emailInputField=this.emailInputDiv.querySelector("input.EmailInput-input"),this.defaultPlaceholderText=this.emailInputField.placeholder,this.errorMessageDiv=this.querySelector("div.NewsletterModule-errorMessage"),this.form.addEventListener("submit",function(e){e.preventDefault(),t.submitForm()}),this.emailInputDiv.querySelector("input").addEventListener("focus",function(e){e.preventDefault(),t.clearErrors()})}},{key:"submitForm",value:function(){var t=this,e=this.emailInputField.value,i=this.form.getAttribute("action")||"",n=this.getAttribute("data-id"),r={data:{type:"newsletter",id:"".concat(n),attributes:{}},meta:{email:"".concat(e),signUpSource:"graphene"}};""!==e?window.fetch(i,{method:"POST",body:JSON.stringify(r)}).then(function(i){if(201===i.status){t.setFormSuccess();var n=new window.CustomEvent("NewsletterModule:subscribe",{bubbles:!0,detail:{email:e}});t.dispatchEvent(n)}else 400===i.status&&t.setFormError(t.form.getAttribute("field-error-message"))}).catch(function(){t.setFormError(t.form.getAttribute("data-error-message"))}):this.setFormError(this.form.getAttribute("blank-error-message"))}},{key:"clearErrors",value:function(){this.emailInputDiv.hasAttribute("data-input-error")&&(this.emailInputDiv.removeAttribute("data-input-error"),this.emailInputField.value="",this.emailInputField.placeholder=this.defaultPlaceholderText,this.errorMessageDiv.innerHTML=""),this.form.hasAttribute("data-form-error")&&this.form.removeAttribute("data-form-error")}},{key:"setFormSuccess",value:function(){var t=this.form.getAttribute("data-success-message"),e=this.form.getAttribute("data-success-link-message"),i=this.querySelector("p.NewsletterModule-description");i&&(i.style.display="none"),this.querySelector("div.NewsletterModule-disclaimer").style.display="none",this.querySelector("div.NewsletterModule-title").innerHTML=t,this.querySelector("a.NewsletterModule-link").innerHTML=e,this.form.setAttribute("data-form-success",!0)}},{key:"setFormError",value:function(t){this.form.setAttribute("data-form-error",!0),this.emailInputDiv.setAttribute("data-input-error",!0),this.errorMessageDiv.innerHTML=t}},{key:"disconnectedCallback",value:function(){return!1}}])&&ce(i.prototype,n),r&&ce(i,r),e}(),ye=i(4),ve=i.n(ye);function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function be(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ae(t){var e="function"==typeof Map?new Map:void 0;return(Ae=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return we(t,arguments,ke(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Se(n,t)})(t)}function we(t,e,i){return(we=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&Se(r,i.prototype),r}).apply(null,arguments)}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ee=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),be(this,ke(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(e,Ae(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){this.cacheElements(),this.handleEventListeners(),this.dealWithMenuHover(),"mq-lg"!==this.getMediaQuery()&&"mq-hk"!==this.getMediaQuery()&&"mq-xl"!==this.getMediaQuery()||this.checkClickTarget(),""===this.getAttribute("data-logo-swap")&&this.setLogoSwap()}},{key:"cacheElements",value:function(){this.menuButton=this.querySelector(".Page-header-menu-trigger"),this.searchButton=this.querySelector(".Page-header-search-button"),this.searchInput=this.querySelector(".Page-header-search-input"),this.hamburgerMenu=this.querySelector(".Page-header-hamburger-menu"),this.pageLogo=this.querySelector(".Page-header-logo"),this.navigationItems=this.hamburgerMenu.querySelectorAll(".NavigationItem"),this.namePlate=document.querySelector("[class$='-header-nameplate']"),this.menuWrapper=this.querySelector(".Page-header-hamburger-menu-wrapper"),this.header=this.querySelector(".Page-header"),this.event=this.setClickTarget.bind(this)}},{key:"setLogoSwap",value:function(){var t=this;window.addEventListener("scroll",b(50,function(){(document.body.scrollTop||document.documentElement.scrollTop)>t.getDistanceFromTop(t.namePlate)+t.namePlate.offsetHeight-t.offsetHeight&&("mq-lg"===t.getMediaQuery()||"mq-xl"===t.getMediaQuery()||"mq-hk"===t.getMediaQuery())?t.setAttribute("data-logo-show",""):""===t.getAttribute("data-logo-show")&&t.removeAttribute("data-logo-show")}))}},{key:"dealWithMenuHover",value:function(){var t=this;this.navigationItems.forEach(function(e){e.querySelector(".NavigationItem-more")&&(t.hoverListener=ve()(e,function(){t.openNavItem(e,"hover")},function(){t.closeNavItem(e,"hover")}))})}},{key:"getMediaQuery",value:function(){var t=window.getComputedStyle(document.querySelector("body"),"::before").getPropertyValue("content")||!1;return!!t&&t.replace(/["']/g,"")}},{key:"handleEventListeners",value:function(){var t=this;window.addEventListener("resize",b(250,function(e){"mq-lg"===t.getMediaQuery()||"mq-hk"===t.getMediaQuery()||"mq-xl"===t.getMediaQuery()?(t.checkClickTarget(),t.navigationItems&&t.navigationItems.forEach(function(e){e.querySelector(".NavigationItem-more")&&(t.closeNavItem(e,"click"),t.closeNavItem(e,"hover"))})):t.removeClickTarget()})),this.menuButton&&this.menuButton.addEventListener("click",function(e){e.preventDefault(),t.isMenuOpen()?t.closeMenu():t.openMenu()}),this.searchButton&&this.searchButton.addEventListener("click",function(e){e.preventDefault(),t.isSearchOpen()?t.closeSearch():t.openSearch()}),this.navigationItems&&this.navigationItems.forEach(function(e){e.querySelector(".NavigationItem-more")&&e.querySelector(".NavigationItem-more").addEventListener("click",function(i){i.preventDefault(),t.openNavItem(e,"click")})})}},{key:"openNavItem",value:function(t,e){t&&(t.getAttribute("data-item-"+e)?t.removeAttribute("data-item-"+e):(this.navigationItems.forEach(function(t){t.removeAttribute("data-item-"+e)}),t.setAttribute("data-item-"+e,!0)))}},{key:"closeNavItem",value:function(t,e){t.removeAttribute("data-item-"+e)}},{key:"checkClickTarget",value:function(){document.addEventListener("click",this.event)}},{key:"setClickTarget",value:function(t){if(this.menuWrapper&&this.header){var e=this.menuWrapper.contains(t.target),i=this.header.contains(t.target);e||i||this.closeMenu()}}},{key:"removeClickTarget",value:function(){this.event&&document.removeEventListener("click",this.event)&&document.removeEventListener("click",this.event)}},{key:"openMenu",value:function(){document.body.setAttribute("data-toggle-header","hamburger-menu"),this.setAttribute("data-toggle-header","hamburger-menu"),this.menuButton.setAttribute("aria-expanded","true"),this.hamburgerMenu.focus()}},{key:"closeMenu",value:function(){this.isMenuOpen()&&(document.body.removeAttribute("data-toggle-header"),this.removeAttribute("data-toggle-header"),this.menuButton.setAttribute("aria-expanded","false"))}},{key:"isMenuOpen",value:function(){return"hamburger-menu"===document.body.getAttribute("data-toggle-header")}},{key:"openSearch",value:function(){document.body.setAttribute("data-toggle-header","search-overlay"),this.setAttribute("data-toggle-header","search-overlay"),this.searchInput.focus()}},{key:"closeSearch",value:function(){this.isSearchOpen()&&(document.body.removeAttribute("data-toggle-header"),this.removeAttribute("data-toggle-header"))}},{key:"isSearchOpen",value:function(){return"search-overlay"===document.body.getAttribute("data-toggle-header")}},{key:"getDistanceFromTop",value:function(t){var e=0;if(t.offsetParent)do{e+=t.offsetTop,t=t.offsetParent}while(t);return e>=0?e:0}},{key:"disconnectedCallback",value:function(){this.hoverListener.destroy()}}])&&me(i.prototype,n),r&&me(i,r),e}();function Pe(t){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Le(t,e){return!e||"object"!==Pe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ce(t){var e="function"==typeof Map?new Map:void 0;return(Ce=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Te(t,arguments,Ie(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Me(n,t)})(t)}function Te(t,e,i){return(Te=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&Me(r,i.prototype),r}).apply(null,arguments)}function Me(t,e){return(Me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ie(t){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Le(this,Ie(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Me(t,e)}(e,Ce(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){this.promoLocalization={"promo.hourAgo":"{t} hour ago","promo.minuteAgo":"{t} minute ago","promo.hoursAgo":"{t} hours ago","promo.minutesAgo":"{t} minutes ago",maxRelativeTime:"10800000",timeToken:"{t}"};var t="";window.promoLocalization&&(t=JSON.parse(window.promoLocalization)),"object"===Pe(t)&&(this.promoLocalization=Object.assign(this.promoLocalization,t)),this.media=this.querySelector("[class$='-media']"),this.promoTitle=this.querySelector("[class$='-title']"),this.timestamp=this.querySelector("[data-timestamp]"),this.media&&this.promoTitle&&(this.setHoverState(this.media,this.promoTitle),this.setHoverState(this.promoTitle,this.media)),this.timestamp&&this.timeStampOrDate()}},{key:"setHoverState",value:function(t,e){t.addEventListener("mouseover",function(){e.setAttribute("data-hover","")}),t.addEventListener("mouseout",function(){e.removeAttribute("data-hover")})}},{key:"timeStampOrDate",value:function(){var t=this.timestamp.getAttribute("data-shouldShowDate")||!1,e=this.timestamp.getAttribute("data-shouldShowTime")||!1,i=this.timestamp.getAttribute("data-date")||!1,n=this.timestamp.getAttribute("data-timestamp")||!1,r=this;n&&(e&&i?this.minutesSincePublish>parseInt(this.promoLocalization.maxRelativeTime)/6e4?"true"===t&&i&&this.renderTimestamp(i):(this.renderTimestamp(this.timeStampString),this.minutesSincePublish<60&&(this.timestampCheckInterval=setInterval(function(){r.renderTimestamp(r.timeStampString),r.minutesSincePublish>59&&clearInterval(r.timestampCheckInterval)},5e3))):"true"===t&&i&&this.renderTimestamp(i))}},{key:"renderTimestamp",value:function(t){t&&(this.timestamp.innerHTML=t,this.timestamp.setAttribute("data-show-timestamp",!0))}},{key:"timeStampString",get:function(){var t="";return!(this.minutesSincePublish<0)&&(0===this.minutesSincePublish||1===this.minutesSincePublish?(t=this.promoLocalization["promo.minuteAgo"].replace(/{t}/,"1"),this.timestamp.setAttribute("data-recent",!0)):this.minutesSincePublish<60?(t=this.promoLocalization["promo.minutesAgo"].replace(/{t}/,this.minutesSincePublish),this.timestamp.setAttribute("data-recent",!0)):this.minutesSincePublish<120?(t=this.promoLocalization["promo.hourAgo"].replace(/{t}/,"1"),this.timestamp.removeAttribute("data-recent")):(t=this.promoLocalization["promo.hoursAgo"].replace(/{t}/,Math.floor(this.minutesSincePublish/60)),this.timestamp.removeAttribute("data-recent")),t)}},{key:"minutesSincePublish",get:function(){var t=this.timestamp.getAttribute("data-timestamp")||0,e=(new Date).getTime();return!!(t=parseInt(t))&&Math.floor((e-t)/6e4)}}])&&Oe(i.prototype,n),r&&Oe(i,r),e}();function _e(t){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Re(t,e){return!e||"object"!==_e(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function je(t){var e="function"==typeof Map?new Map:void 0;return(je=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return qe(t,arguments,Fe(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ve(n,t)})(t)}function qe(t,e,i){return(qe=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&Ve(r,i.prototype),r}).apply(null,arguments)}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fe(t){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Be=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Re(this,Fe(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}(e,je(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){var t=this,e=window.localStorage.getItem("liveBannerTitle"),i=this.querySelector(".PromoLive-title").textContent.trim();e!==i?this.removeAttribute("data-promo-live"):this.setAttribute("data-promo-live",""),this.querySelector(".PromoLive-close").addEventListener("click",function(){i.length&&(window.localStorage.setItem("liveBannerTitle",i),t.remove())})}}])&&De(i.prototype,n),r&&De(i,r),e}();function He(t){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ze(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ne(t,e){return!e||"object"!==He(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function We(t){var e="function"==typeof Map?new Map:void 0;return(We=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Ue(t,arguments,Ge(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Qe(n,t)})(t)}function Ue(t,e,i){return(Ue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&Qe(r,i.prototype),r}).apply(null,arguments)}function Qe(t,e){return(Qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ge(t){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ye=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ne(this,Ge(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qe(t,e)}(e,We(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){var t=this,e=this.getAttribute("data-toggle"),i=this.querySelectorAll('[data-toggle-trigger="'+e+'"]'),n=this;this.handleToggle=function(t){t.preventDefault();var e=this.getAttribute("data-toggle-trigger");e&&(n.getAttribute("data-toggle-in")===e?(document.body.removeAttribute("data-toggle-in"),n.removeAttribute("data-toggle-in",e)):(document.body.setAttribute("data-toggle-in",e),n.setAttribute("data-toggle-in",e)))},i.forEach(function(e){return e.addEventListener("click",t.handleToggle,!0)})}},{key:"disconnectedCallback",value:function(){var t=this;this.querySelectorAll("[data-toggle-trigger]").forEach(function(e){return e.removeEventListener("click",t.handleToggle,!0)})}}])&&ze(i.prototype,n),r&&ze(i,r),e}();function Xe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ke=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.document=document,this.h=document.documentElement,this.b=document.body,this.percentScrolled=0,this.firstQuartile=!1,this.secondQuartile=!1,this.thirdQuartile=!1,this.fourthQuartile=!1,this.init()}var e,i,n;return e=t,(i=[{key:"init",value:function(){var t=this;window.addEventListener("scroll",function(e){b(500,t.checkScroll(e))})}},{key:"send",value:function(t){var e=new window.CustomEvent("Scroll:onPageScroll",{bubbles:!0,detail:{data:t}});document.body.dispatchEvent(e)}},{key:"checkScroll",value:function(t){if(!this.fourthQuartile){if(this.percentScrolled=(this.h.scrollTop||this.b.scrollTop)/((this.h.scrollHeight||this.b.scrollHeight)-this.h.clientHeight)*100,this.percentScrolled>=100)return this.fourthQuartile=!0,void this.send("100%");if(!this.thirdQuartile&&this.percentScrolled>=75)return this.thirdQuartile=!0,void this.send("75%");if(!this.secondQuartile&&this.percentScrolled>=50)return this.secondQuartile=!0,void this.send("50%");if(!this.firstQuartile&&this.percentScrolled>=25)return this.firstQuartile=!0,void this.send("25%")}}}])&&Xe(e.prototype,i),n&&Xe(e,n),t}();function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ze(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $e(t,e){return!e||"object"!==Je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ti(t){var e="function"==typeof Map?new Map:void 0;return(ti=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return ei(t,arguments,ni(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ii(n,t)})(t)}function ei(t,e,i){return(ei=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&ii(r,i.prototype),r}).apply(null,arguments)}function ii(t,e){return(ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ni(t){return(ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ri=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),$e(this,ni(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ii(t,e)}(e,ti(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){this.cacheElements(),this.handleFiltersOverlay(),this.handleSortSelect(),this.handleFiltersApply(),this.handleFiltersSelect(),this.handleSelectedFiltersReset(),this.gatherSelectedFilters()}},{key:"cacheElements",value:function(){this.searchResultsModule=document.querySelector(".SearchResultsModule"),this.searchForm=document.querySelector(".SearchResultsModule-form"),this.searchSort=this.querySelector(".SearchResultsModule-sorts select"),this.filtersOpenButton=this.querySelector(".SearchResultsModule-filters-open"),this.filtersCloseButton=this.querySelector(".SearchResultsModule-filters-close"),this.filtersOverlay=this.querySelector(".SearchResultsModule-filters-overlay"),this.filtersApply=this.querySelector(".SearchResultsModule-filters-apply"),this.filtersSeeAll=this.querySelectorAll(".SearchFilter-seeAll"),this.filters=this.querySelectorAll(".SearchFilterInput input"),this.selectedFiltersArray=[],this.selectedFilters=this.querySelector(".SearchResultsModule-filters-selected"),this.selectedFiltersReset=this.querySelector(".SearchResultsModule-filters-selected-reset"),this.selectedFiltersContent=this.querySelector(".SearchResultsModule-filters-selected-content")}},{key:"handleSortSelect",value:function(){var t=this;this.searchSort&&this.searchSort.addEventListener("change",function(e){t.gatherSelectedFilters(),t.searchResultsModule.submitSearch()})}},{key:"handleFiltersSelect",value:function(){var t=this;this.filters.forEach(function(e){e.addEventListener("click",function(){"mq-xl"!==t.getMediaQuery()&&"mq-lg"!==t.getMediaQuery()&&"mq-hk"!==t.getMediaQuery()||(t.gatherSelectedFilters(),t.searchResultsModule.submitSearch())})})}},{key:"handleFiltersApply",value:function(){var t=this;this.filtersApply.addEventListener("change",function(e){e.preventDefault(),t.gatherSelectedFilters(),t.searchResultsModule.submitSearch()})}},{key:"handleFiltersOverlay",value:function(){var t=this;this.filtersOpenButton.addEventListener("click",function(e){e.preventDefault(),t.openOverlay()}),this.filtersCloseButton.addEventListener("click",function(e){e.preventDefault(),t.closeOverlay()})}},{key:"handleSelectedFiltersReset",value:function(){var t=this;this.selectedFiltersReset.addEventListener("click",function(e){e.preventDefault(),t.filters.forEach(function(t){t.checked=!1}),t.gatherSelectedFilters(),t.searchResultsModule.submitSearch()})}},{key:"handleSelectedFiltersRemove",value:function(){var t=this;this.querySelectorAll(".SearchResultsModule-filters-selected-filter").forEach(function(e){e.querySelector("a").addEventListener("click",function(i){i.preventDefault(),t.removeSelectedFilter(e)})})}},{key:"removeSelectedFilter",value:function(t){var e=t.getAttribute("data-value");this.querySelectorAll('[value="'.concat(e,'"]')).forEach(function(t){t.checked&&(t.checked=!1)}),this.gatherSelectedFilters(),this.searchResultsModule.submitSearch()}},{key:"gatherSelectedFilters",value:function(){var t=this;this.selectedFiltersArray=[],this.filters=this.querySelectorAll(".SearchFilterInput input"),this.filters.forEach(function(e){if(e.checked){var i=e.parentElement.querySelector("span").innerHTML,n=e.getAttribute("value");t.selectedFiltersArray.push({label:i,value:n})}}),this.renderSelectedFilters()}},{key:"renderSelectedFilters",value:function(){var t=this;this.selectedFiltersArray.length>0?(this.selectedFiltersContent.innerHTML="",this.selectedFiltersArray.forEach(function(e){t.selectedFiltersContent.innerHTML+='<div class="SearchResultsModule-filters-selected-filter" data-value='.concat(e.value,"><span>").concat(e.label,'</span><a href="#" title="X"><svg class="close-x"><use xlink:href="#close-x"/></svg></a></div>')}),this.handleSelectedFiltersRemove(),this.selectedFilters.setAttribute("data-showing",!0)):this.selectedFilters.removeAttribute("data-showing")}},{key:"openOverlay",value:function(){this.filtersOverlay.setAttribute("data-filters-open",!0),document.body.setAttribute("data-filters-open",!0)}},{key:"closeOverlay",value:function(){this.filtersOverlay.removeAttribute("data-filters-open"),document.body.removeAttribute("data-filters-open")}},{key:"getMediaQuery",value:function(){var t=window.getComputedStyle(document.querySelector("body"),"::before").getPropertyValue("content")||!1;return!!t&&t.replace(/["']/g,"")}}])&&Ze(i.prototype,n),r&&Ze(i,r),e}();function oi(t){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ai(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function si(t,e){return!e||"object"!==oi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function li(t){var e="function"==typeof Map?new Map:void 0;return(li=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return ui(t,arguments,hi(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ci(n,t)})(t)}function ui(t,e,i){return(ui=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&ci(r,i.prototype),r}).apply(null,arguments)}function ci(t,e){return(ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hi(t){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var di=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),si(this,hi(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ci(t,e)}(e,li(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){this.cacheElements(),this.handleFormSubmit()}},{key:"handleFormSubmit",value:function(){var t=this;this.searchForm.addEventListener("submit",function(e){e.preventDefault();var i=new window.URLSearchParams(new window.FormData(t.searchForm)).toString(),n=window.location.pathname+"?"+i;window.history.replaceState({},document.title,n),t.loadingTimeout=window.setTimeout(function(){t.clearSearchForm(),t.setLoadingState()},1e3),t.getNewSearch(n).then(function(e){window.clearTimeout(t.loadingTimeout),t.clearSearchForm(),t.renderSearchResults(e),document.body.dispatchEvent(new window.CustomEvent("Search:onSearchUpdate",{detail:{responseMarkup:e}}))})})}},{key:"submitSearch",value:function(){var t;"function"==typeof Event?t=new window.Event("submit"):(t=document.createEvent("Event")).initEvent("submit",!0,!0),this.searchForm.dispatchEvent(t)}},{key:"getNewSearch",value:function(t){return new Promise(function(e,i){window.fetch(t,{credentials:"include"}).then(function(t){e(t.text())}).catch(function(){i()})})}},{key:"clearSearchForm",value:function(){this.searchResults.innerHTML=""}},{key:"setLoadingState",value:function(){var t=document.createElement("div");t.classList.add("loading-icon"),this.searchResults.appendChild(t),this.setAttribute("data-loading",!0)}},{key:"renderSearchResults",value:function(t){var e=document.createElement("div");e.innerHTML=t;var i=e.querySelector(".SearchResultsModule-ajax").innerHTML;i&&(this.searchResults.innerHTML=i),this.dispatchRendered()}},{key:"dispatchRendered",value:function(){var t=new window.CustomEvent("Ajax:Rendered",{bubbles:!0});document.body.dispatchEvent(t)}},{key:"cacheElements",value:function(){this.searchForm=this.querySelector(".SearchResultsModule-form"),this.searchResults=this.querySelector(".SearchResultsModule-ajax")}}])&&ai(i.prototype,n),r&&ai(i,r),e}();function fi(t){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yi(t,e){return!e||"object"!==fi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vi(t){var e="function"==typeof Map?new Map:void 0;return(vi=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return gi(t,arguments,bi(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),mi(n,t)})(t)}function gi(t,e,i){return(gi=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&mi(r,i.prototype),r}).apply(null,arguments)}function mi(t,e){return(mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bi(t){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ai=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),yi(this,bi(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mi(t,e)}(e,vi(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){this.init(),this.setEventListeners(),this.setSubNav(),this.dealWithMenuHover()}},{key:"disconnectedCallback",value:function(){this.hoverListener.destroy()}},{key:"init",value:function(){this.childEls=this.querySelectorAll(".SectionNavigation-items-item"),this.childStack=Array.from(this.childEls),this.subNav=this.querySelector("[data-sub-trigger]"),this.subNavMenu=this.querySelector(".SectionNavigationItem-subNav"),this.childWidthTotal=this.getChildWidths(this.childStack),this.items=this.querySelector(".SectionNavigation-items")}},{key:"dealWithMenuHover",value:function(){var t=this;this.subNav&&(this.hoverListener=ve()(this.subNav,function(){t.subNav.setAttribute("data-hover","")},function(){t.subNav.removeAttribute("data-hover")}),this.subNav.addEventListener("focus",function(){t.subNav.setAttribute("data-hover","")}),document.addEventListener("click",function(e){t.subNav.contains(e.target)||t.subNav.removeAttribute("data-hover")}))}},{key:"setEventListeners",value:function(){var t=this;window.addEventListener("load",function(){t.checkWidths(),window.innerWidth<560&&t.setCarousel()}),window.addEventListener("resize",b(250,function(){window.innerWidth<560&&t.childWidthTotal>window.innerWidth?t.setCarousel():t.destroyCarousel()}))}},{key:"setCarousel",value:function(){this.childStack.forEach(function(t){t.removeAttribute("data-hide")}),this.subNav.setAttribute("data-sub-trigger","hide"),void 0===this.flickity&&(this.flickity=new w.a(this.items,{contain:!0,cellAlign:"left",adaptiveHeight:!0,prevNextButtons:!1,pageDots:!1,wrapAround:!0}),this.flickity.resize())}},{key:"destroyCarousel",value:function(){this.flickity&&(this.flickity.destroy(),this.checkWidths(),this.flickity=void 0)}},{key:"getChildWidths",value:function(t){for(var e=0,i=0;i<t.length;i++){var n=getComputedStyle(t[i]);e+=t[i].getBoundingClientRect().width+parseInt(n.marginLeft)+parseInt(n.marginRight)}return e}},{key:"checkWidths",value:function(){this.childStack.forEach(function(t){t.removeAttribute("data-hide")}),this.childWidthTotal>480?(this.populateNav(),this.subNav.setAttribute("data-sub-trigger","show")):this.subNav&&this.subNav.setAttribute("data-sub-trigger","hide")}},{key:"populateNav",value:function(){for(var t=this.childStack.length-2;t>=0;t--){var e=this.childStack.slice(0,t),i=this.getChildWidths(e);if(this.childStack[t].setAttribute("data-hide",""),i<480){for(var n=this.childStack.length-e.length-1;n>0;)this.subNavMenuItems[this.subNavMenuItems.length-n].setAttribute("data-show",""),n--;break}}}},{key:"setSubNav",value:function(){var t=this;this.childStack.slice(0,this.childStack.length-1).forEach(function(e){t.subNavMenu.innerHTML+=e.innerHTML}),this.subNavMenu&&(this.subNavMenuItems=this.subNavMenu.querySelectorAll(".SectionNavigationItem"))}}])&&pi(i.prototype,n),r&&pi(i,r),e}();function wi(t){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Si(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ki(t,e){return!e||"object"!==wi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ei(t){var e="function"==typeof Map?new Map:void 0;return(Ei=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Pi(t,arguments,Li(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Oi(n,t)})(t)}function Pi(t,e,i){return(Pi=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&Oi(r,i.prototype),r}).apply(null,arguments)}function Oi(t,e){return(Oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Li(t){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ci=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ki(this,Li(e).call(this))).topNavOffset=document.querySelector(".Page-header").offsetHeight,t}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oi(t,e)}(e,Ei(HTMLElement)),i=e,(n=[{key:"disconnectedCallback",value:function(){window.removeEventListener("scroll",this.navTrigger)}},{key:"connectedCallback",value:function(){this.nav=this.querySelector("[class$='-navSticky']"),this.navItems=this.querySelectorAll("[data-label]"),this.wrapper=this.querySelector("[class$='-sticky-wrapper']"),this.items=this.querySelectorAll("[data-target]");var t=this;this.navTrigger=b(50,function(){if(t.startPoint&&t.endPoint){var e=document.body.scrollTop||document.documentElement.scrollTop;t.checkStickyStatus(e,t.startPoint,t.endPoint),t.setActiveState(e)}}),this.nav&&this.navItems&&this.setEventListeners()}},{key:"setEventListeners",value:function(){var t=this;window.addEventListener("load",function(){var e,i;t.startPoint=t.getDistanceFromTop(t.nav),t.endPoint=t.getDistanceFromTop(t.querySelector("[data-endpoint]")),t.navItems[0].setAttribute("data-active",""),"function"==typeof Event?e=new Event("resize"):(e=document.createEvent("Event")).initEvent("resize",!0,!0),"function"==typeof Event?i=new Event("scroll"):(i=document.createEvent("Event")).initEvent("scroll",!0,!0),window.dispatchEvent(e),window.dispatchEvent(i)}),window.addEventListener("resize",b(250,function(){"mq-sm"===t.getMediaQuery()||"mq-xs"===t.getMediaQuery()?window.removeEventListener("scroll",t.navTrigger):(t.setItemToNavConnection(),window.addEventListener("scroll",t.navTrigger))}))}},{key:"getMediaQuery",value:function(){var t=window.getComputedStyle(document.querySelector("body"),"::before").getPropertyValue("content")||!1;return!!t&&t.replace(/["']/g,"")}},{key:"checkStickyStatus",value:function(t,e,i){t>e-this.topNavOffset&&t+window.innerHeight<i?this.nav.setAttribute("data-stick",""):t>e-this.topNavOffset&&t+window.innerHeight>=i?this.nav.setAttribute("data-stick","bottom"):this.nav.removeAttribute("data-stick")}},{key:"setActiveState",value:function(t){var e=this,i=this.items[0].id;this.items.forEach(function(n){n.offsetTop+e.startPoint-2*e.topNavOffset<=t&&(i=n.id)}),this.navItems.forEach(function(t){t.getAttribute("data-label")===i?t.setAttribute("data-active",""):t.removeAttribute("data-active")})}},{key:"isScrollBehaviorSupported",value:function(){var t=!1;try{document.createElement("div").scroll({top:0,get behavior(){return t=!0,"smooth"}})}catch(t){}return t}},{key:"setItemToNavConnection",value:function(){var t=this;this.navItems.forEach(function(e){var i=e.getAttribute("data-label");e.addEventListener("click",function(e){var n=document.getElementById(i);t.isScrollBehaviorSupported()?window.scroll({top:t.getDistanceFromTop(n)-2*t.topNavOffset,behavior:"smooth"}):window.scroll(0,t.getDistanceFromTop(n)-2*t.topNavOffset)})})}},{key:"getDistanceFromTop",value:function(t){var e=0;if(t.offsetParent)do{e+=t.offsetTop,t=t.offsetParent}while(t);return e>=0?e:0}}])&&Si(i.prototype,n),r&&Si(i,r),e}();function Ti(t){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ii(t,e){return!e||"object"!==Ti(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xi(t){var e="function"==typeof Map?new Map:void 0;return(xi=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return _i(t,arguments,Ri(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Di(n,t)})(t)}function _i(t,e,i){return(_i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&Di(r,i.prototype),r}).apply(null,arguments)}function Di(t,e){return(Di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ri(t){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ji=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ii(this,Ri(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Di(t,e)}(e,xi(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){var t=this;this.env=this.getAttribute("data-env-url"),this.url=this.getAttribute("data-embed-url"),this.api=this.getAttribute("data-api-url"),this.permalink=window.dataLayer?window.dataLayer.permalink:"",this.button=document.getElementById("coral_talk_stream"),this.cookie=this.getCookie(document.cookie);var e=document.head.querySelector("meta[name='brightspot.contentId']");if(e&&(this.contentID=e.content),this.button.addEventListener("click",function(){if(e){var i=new CustomEvent("Comments:onCommentsOpen",{bubbles:!0,detail:{content:t.contentID}});t.dispatchEvent(i)}t.cookie?t.checkToken().then(function(e){t.loadTalk(t.url,!0)}):t.loadTalk(t.url)}),document.URL.includes("commentId")){var i=new URLSearchParams(window.location.search).get("commentId");i&&i.length>1&&(this.button.click(),this.button.scrollIntoView())}}},{key:"checkToken",value:function(){var t=this;return new Promise(function(e,i){window.fetch(t.api,{method:"GET",credentials:"include"}).then(function(t){if(200!==t.status)throw new Error(t.statusText);return t.json()}).then(function(i){e(t.token=i.token)}).catch(function(){i()})})}},{key:"getCookie",value:function(t){var e=t.match(new RegExp("(^| )c_mId=([^;]+)"));if(e)return e[2]}},{key:"loadTalk",value:function(t,e){var i=document.createElement("script");i.src=t,i.onload=function(){e?this.renderTalkWithToken():this.renderTalk()}.bind(this),document.head.appendChild(i)}},{key:"renderTalk",value:function(){""!==this.permalink?Coral.Talk.render(document.getElementById("coral_talk_stream"),{talk:this.env,asset_url:this.permalink}):Coral.Talk.render(document.getElementById("coral_talk_stream"),{talk:this.env})}},{key:"renderTalkWithToken",value:function(){""!==this.permalink?Coral.Talk.render(document.getElementById("coral_talk_stream"),{talk:this.env,auth_token:this.token,asset_url:this.permalink}):Coral.Talk.render(document.getElementById("coral_talk_stream"),{talk:this.env,auth_token:this.token})}}])&&Mi(i.prototype,n),r&&Mi(i,r),e}();function qi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Vi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.videoProvider=e,this.autoplayEnabled=this.isInternalReferrer()&&!this.isPageRefreshed()&&this.hasAutoplayThreshold()&&"IntersectionObserver"in window,this.autoplayEnabled&&(this.headerMargin="-".concat(this.getHeaderHeight(),"px 0px 0px 0px"),this.setThresholds())}var e,i,n;return e=t,(i=[{key:"getHeaderHeight",value:function(){var t=document.getElementsByClassName("Page-header");return t[0]?t[0].offsetHeight:0}},{key:"setThresholds",value:function(){this.threshold=this.videoProvider.autoplayThreshold/100,this.thresholds=this.threshold<=0?[0]:this.threshold>1?[0,1]:[0,this.threshold]}},{key:"isInternalReferrer",value:function(){return""!==document.referrer&&0===document.referrer.indexOf(location.protocol+"//"+location.host)}},{key:"hasAutoplayThreshold",value:function(){return!Number.isNaN(this.videoProvider.autoplayThreshold)}},{key:"isPageRefreshed",value:function(){return"performance"in window&&1===performance.navigation.type}},{key:"init",value:function(t){var e=this;this.autoplayEnabled&&(this.isAutoplaySupported.bind(this),this.isAutoplaySupported().then(function(i){e.autoplaySupported=!0,e.observer=new IntersectionObserver(function(i){e.handleIntersectionObserver(i,t)},{threshold:e.thresholds,rootMargin:e.headerMargin}),e.observer.observe(e.videoProvider),e.isObserving=!0}))}},{key:"handleIntersectionObserver",value:function(t,e){var i=this;t.forEach(function(t){t.isIntersecting&&t.intersectionRatio>0?(t.intersectionRatio>=i.threshold&&!i.videoProvider.hasBeenPlayed&&i.autoplaySupported&&i.videoProvider.play(),i.videoProvider.classList.remove(e)):t.intersectionRatio<=0&&(i.videoProvider.isPlaying()||i.videoProvider.isPlayingAd)&&!i.videoProvider.classList.contains(e)&&i.videoProvider.classList.add(e)})}},{key:"observe",value:function(){this.isObserving&&this.observer||(this.observer.observe(this.videoProvider),this.isObserving=!0)}},{key:"unobserve",value:function(t){this.isObserving&&(this.videoProvider.isPlayingAd||(this.observer.unobserve(this.videoProvider),this.isObserving=!1),this.videoProvider.classList.remove(t))}},{key:"isAutoplaySupported",value:function(){var t=this;if(void 0===this.autoplaySupported){var e=document.createElement("video");e.style.cssText="display:none",e.style.position="absolute",e.style.height=0,e.style.width=0,e.src="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthAAGBRgj237AAAC6m1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAqAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAqAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAXcAAAAPpVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAADFZpZGVvSGFuZGxlcgAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiu4FAEQBFGMAAAGyTGF2YzUyLjIwLjEGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAA+kAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGF1ZHRhAAAAWW1ldGEAAAAAAAAAImhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAACtpbHN0AAAAI6l0b28AAAAbZGF0YQAAAAEAAAAATAo=",this.videoProvider.appendChild(e);return new Promise(function(i,n){e.play().then(function(){i(!0)}).catch(function(t){"NotAllowedError"===t.name?n(!1):i(!0)}).finally(function(){t.videoProvider.removeChild(e)})})}return Promise.resolve(this.autoplaySupported)}}])&&qi(e.prototype,i),n&&qi(e,n),t}();function Fi(t){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zi(t,e,i){return(zi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ni(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Ni(t){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wi(t,e){return(Wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ui(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Qi=function(t){function e(){var t,i,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=this,i=!(r=(t=Ni(e)).call.apply(t,[this].concat(a)))||"object"!==Fi(r)&&"function"!=typeof r?Hi(n):r,Ui(Hi(i),"playing",!1),Ui(Hi(i),"player",null),Ui(Hi(i),"miniPlayerClass","YouTubeVideoPlayer-sticky"),Ui(Hi(i),"selectors",{targetId:"YouTubeVideoPlayer-%id%"}),i}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wi(t,e)}(e,J),i=e,(n=[{key:"connectedCallback",value:function(){zi(Ni(e.prototype),"init",this).call(this),this.init()}},{key:"init",value:function(){this.stateChangeHandlers={0:this.onPlayerEnd.bind(this),1:this.onPlayerPlaying.bind(this),2:this.onPlayerPaused.bind(this)},this.videoId=this.getAttribute("data-video-id"),this.adSlot=this.getAttribute("data-slot-name"),this.autoplay="true"===this.getAttribute("data-autoplay"),this.muted="true"===this.getAttribute("data-muted"),this.autoplayThreshold=parseInt(this.getAttribute("data-autoplay-threshold")),this.miniPlayerEnabled="true"===this.getAttribute("data-enable-miniplayer"),window.YouTubeAPIReady?this.initPlayer():(window.loadingYTPlayers?window.loadingYTPlayers.push(this):window.loadingYTPlayers=[this],window.onYouTubeIframeAPIReady||(window.onYouTubeIframeAPIReady=function(){window.YouTubeAPIReady=!0,window.loadingYTPlayers.forEach(function(t){return t.initPlayer()}),window.loadingYTPlayers=[]},this.loadYouTubeApi()))}},{key:"initPlayer",value:function(){var t=this.selectors.targetId.replace("%id%",this.playerId),i={videoId:this.videoId,events:{onStateChange:this.onStateChange.bind(this),onReady:this.onPlayerReady.bind(this)}};if(this.adSlot){var n="clip=".concat(this.videoId);window.dfpKV&&(window.dfpKV.keywords&&(n+="&topictags=".concat(window.dfpKV.keywords)),window.dfpKV.slug&&(n+="&slug=".concat(window.dfpKV.slug,"&slugwords=").concat(window.dfpKV.slug.split("-"))),window.dfpKV.pageType&&(n+="&pagetype=".concat(window.dfpKV.pageType))),n=encodeURIComponent(n),i.embedConfig={adsConfig:{adTagParameters:{iu:this.adSlot,cust_params:n},nonPersonalizedAd:!1}}}this.player=new window.YT.Player(t,i),this.setupTimeTracking(),zi(Ni(e.prototype),"onVideoReady",this).call(this)}},{key:"getVideoDuration",value:function(){return void 0===this.player.getDuration?0:this.player.getDuration()}},{key:"loadYouTubeApi",value:function(){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}},{key:"onStateChange",value:function(t){var e=t.data;this.stateChangeHandlers[e]&&this.stateChangeHandlers[e](),this.onCheckState(e)}},{key:"onPlayerReady",value:function(t){this.handleAutoplay()}},{key:"handleAutoplay",value:function(){this.autoplay&&(this.muted?this.player.mute():this.player.unMute(),this.autoplayHandler=new Vi(this),this.autoplayHandler.autoplayEnabled&&(this.autoplayHandler.init(this.miniPlayerClass),this.miniPlayerEnabled&&this.initMiniPlayerEvents()))}},{key:"onPlayerPlaying",value:function(t){this.playing?zi(Ni(e.prototype),"onVideoPlay",this).call(this,t):(this.playing=!0,zi(Ni(e.prototype),"onVideoStart",this).call(this,t)),this.toggleIntersectionObserver()}},{key:"onPlayerPaused",value:function(t){zi(Ni(e.prototype),"onVideoPause",this).call(this,t)}},{key:"onPlayerEnd",value:function(t){this.playing=!1,zi(Ni(e.prototype),"onVideoEnd",this).call(this,t)}},{key:"setupTimeTracking",value:function(){var t=this;window.setInterval(function(){t.getAttribute("data-playback-playing")&&zi(Ni(e.prototype),"onVideoTimeUpdate",t).call(t,{secondsElapsed:t.player.getCurrentTime()})},1e3)}},{key:"play",value:function(){this.player.playVideo(),this.hasBeenPlayed=!0}},{key:"isPlaying",value:function(){return 1===this.player.getPlayerState()}},{key:"pause",value:function(){this.player.pauseVideo()}},{key:"getPlatformName",value:function(){return"youtube"}},{key:"toggleIntersectionObserver",value:function(){!this.miniPlayerEnabled&&this.autoplayHandler.isObserving?this.autoplayHandler.unobserve(this.miniPlayerClass):this.autoplay&&!this.autoplayHandler.isObserving&&this.autoplayHandler.observe()}},{key:"onCheckState",value:function(t){this.hasBeenPlayed||(this.hasBeenPlayed=1===t),this.isPlayingAd=3===this.currentState&&-1===t,this.currentState=t}},{key:"initMiniPlayerEvents",value:function(){var t=this;this.getElementsByClassName("close-button")[0].addEventListener("click",function(e){t.pause(),t.autoplayHandler.unobserve(t.miniPlayerClass),e.preventDefault()}.bind(this))}}])&&Bi(i.prototype,n),r&&Bi(i,r),e}();function Gi(t){return(Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ki(t,e,i){return(Ki="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ji(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Ji(t){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zi(t,e){return(Zi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var tn=function(t){function e(){var t,i,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=this,i=!(r=(t=Ji(e)).call.apply(t,[this].concat(a)))||"object"!==Gi(r)&&"function"!=typeof r?Xi(n):r,$i(Xi(i),"playing",!1),$i(Xi(i),"player",null),i}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zi(t,e)}(e,J),i=e,(n=[{key:"connectedCallback",value:function(){Ki(Ji(e.prototype),"init",this).call(this),this.init()}},{key:"init",value:function(){window.VimeoAPIReady?this.onVimeoAPIReady():this.loadVimeoApi()}},{key:"getVideoDuration",value:function(){return this.duration||0}},{key:"onVimeoAPIReady",value:function(){window.VimeoAPIReady=!0;var t=this.querySelector(".VimeoVideoPlayer-player");this.player=new window.Vimeo.Player(t),this.settings.muted&&this.player.setVolume(0),this.settings.seekSeconds&&this.player.setCurrentTime(this.settings.seekSeconds),this.getAttribute("data-autoplay")&&(this.player.setVolume(0),this.play()),Ki(Ji(e.prototype),"onVideoReady",this).call(this),this.tieIntoEvents()}},{key:"tieIntoEvents",value:function(){var t=this;this.player.on("play",function(e){t.onPlayerPlay(e)}),this.player.on("pause",function(e){t.onPlayerPause(e)}),this.player.on("timeupdate",function(e){t.onPlayerTimeUpdate(e)}),this.player.on("ended",function(e){t.onPlayerEnd(e)})}},{key:"loadVimeoApi",value:function(){var t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js",t.addEventListener("load",this.onVimeoAPIReady.bind(this));var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}},{key:"onPlayerPlay",value:function(t){this.playing?Ki(Ji(e.prototype),"onVideoUnPause",this).call(this,t):(this.playing=!0,this.duration=t.duration,Ki(Ji(e.prototype),"onVideoStart",this).call(this,t))}},{key:"onPlayerPause",value:function(t){Ki(Ji(e.prototype),"onVideoPause",this).call(this,t)}},{key:"onPlayerTimeUpdate",value:function(t){Ki(Ji(e.prototype),"onVideoTimeUpdate",this).call(this,{secondsElapsed:t.seconds})}},{key:"onPlayerEnd",value:function(t){this.playing=!1,Ki(Ji(e.prototype),"onVideoEnd",this).call(this,t)}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"getPlatformName",value:function(){return"vimeo"}}])&&Yi(i.prototype,n),r&&Yi(i,r),e}();function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rn(t,e){return!e||"object"!==en(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function on(t){var e="function"==typeof Map?new Map:void 0;return(on=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return an(t,arguments,ln(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),sn(n,t)})(t)}function an(t,e,i){return(an=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&sn(r,i.prototype),r}).apply(null,arguments)}function sn(t,e){return(sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ln(t){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var un=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),rn(this,ln(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sn(t,e)}(e,on(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){this.cacheElements(),this.playlist&&(this.handlePlaylistOpening(),this.isVideoPage&&this.markCurrentPlaylistItem(window.location.href),this.handlePlaylistItemClicks(),this.reactToVideoEnd())}},{key:"cacheElements",value:function(){this.playlist=this.querySelector('[class$="-playlist"]'),this.playlistItems=this.querySelectorAll(".PlaylistItem"),this.isVideoPage?this.videoWrapper=this.querySelector("[data-video-wrapper]"):this.videoWrapper=this.querySelector("[data-video-player-wrapper]")}},{key:"reactToVideoEnd",value:function(){var t=this,e=this.querySelector("[data-video-player]");e&&e.addEventListener("Video:onVideoEnded",function(e){var i=t.playlist.querySelector('[data-current-item="true"]');if(i){var n=i.nextElementSibling;if(n||(n=i.parentElement.nextElementSibling.querySelector(".PlaylistItem")),n&&null!==n.offsetParent){var r=n.getAttribute("data-item-url");t.loadVideo(r)}}})}},{key:"handlePlaylistItemClicks",value:function(){var t=this;this.playlistItems.forEach(function(e){var i=e.getAttribute("data-item-url");e.addEventListener("click",function(n){n.preventDefault(),i&&"true"!==e.getAttribute("data-current-item")&&(t.loadVideo(i),t.closePlaylist())})})}},{key:"setLoadingState",value:function(){var t=document.createElement("div");t.classList.add("loading-icon"),this.videoWrapper.appendChild(t),this.setAttribute("data-loading",!0)}},{key:"removeLoadingState",value:function(){var t=this.videoWrapper.querySelector(".loading-icon");t.parentNode.removeChild(t),this.removeAttribute("data-loading")}},{key:"clearOldVideo",value:function(){this.videoWrapper.innerHTML=""}},{key:"loadVideo",value:function(t){var e=this;this.clearOldVideo(),this.setLoadingState(),this.getItem(t).then(function(i){e.removeLoadingState(),e.insertVideo(i,t)})}},{key:"getItem",value:function(t){return new Promise(function(e,i){window.fetch(t,{credentials:"include"}).then(function(t){e(t.text())}).catch(function(){i()})})}},{key:"insertVideo",value:function(t,e){var i=document.createElement("div");i.innerHTML=t;var n="[data-video-player-wrapper]";this.isVideoPage&&(n="[data-video-wrapper]");var r=i.querySelector(n).innerHTML;if(r&&(this.videoWrapper.innerHTML=r),this.isVideoPage){var o=i.querySelector("title").innerHTML;window.history.replaceState({},o,e),document.title=o}this.markCurrentPlaylistItem(e),this.reactToVideoEnd(),this.dispatchRendered()}},{key:"handlePlaylistOpening",value:function(){var t=this;if(this.playlist){var e=this.playlist.querySelector(".VideoPage-playlist-header");e&&e.addEventListener("click",function(){t.togglePlaylist()})}}},{key:"markCurrentPlaylistItem",value:function(t){this.playlistItems.forEach(function(e){e.removeAttribute("data-current-item");var i=e.getAttribute("data-item-url");i&&t.indexOf(i)>-1&&e.setAttribute("data-current-item",!0)})}},{key:"openPlaylist",value:function(){document.body.setAttribute("data-toggle-video-playlist",!0),this.setAttribute("data-toggle-video-playlist",!0)}},{key:"closePlaylist",value:function(){document.body.removeAttribute("data-toggle-video-playlist"),this.removeAttribute("data-toggle-video-playlist")}},{key:"togglePlaylist",value:function(){document.body.getAttribute("data-toggle-video-playlist")?this.closePlaylist():this.openPlaylist()}},{key:"dispatchRendered",value:function(){var t=new window.CustomEvent("Ajax:Rendered",{bubbles:!0});document.body.dispatchEvent(t)}},{key:"isVideoPage",get:function(){return!!document.querySelector("html").classList.contains("VideoPage")}}])&&nn(i.prototype,n),r&&nn(i,r),e}();function cn(t){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dn(t,e){return!e||"object"!==cn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fn(t){var e="function"==typeof Map?new Map:void 0;return(fn=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return pn(t,arguments,vn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),yn(n,t)})(t)}function pn(t,e,i){return(pn=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&yn(r,i.prototype),r}).apply(null,arguments)}function yn(t,e){return(yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vn(t){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dn(this,vn(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yn(t,e)}(e,fn(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){this.apiKey=this.getAttribute("data-api-key"),this.subdomain=this.getAttribute("data-sub"),this.apiKey&&this.subdomain&&this.init()}},{key:"init",value:function(){this.locations=this.querySelectorAll(".Location"),this.currLocation=this.querySelector(".WeatherModule-current-location"),this.currLocationWrapper=this.querySelector(".WeatherModule-current-location-wrapper"),this.currTemp=this.querySelector(".WeatherModule-current-temp"),this.currWX=this.querySelector(".WeatherModule-current-wx"),this.currIcon=this.querySelector(".WeatherModule-current-wx-img"),this.currHigh=this.querySelector(".WeatherModule-current-hightemp"),this.currLow=this.querySelector(".WeatherModule-current-lowtemp"),this.currSunrise=this.querySelector(".WeatherModule-current-sunrise"),this.currSunset=this.querySelector(".WeatherModule-current-sunset"),this.currHum=this.querySelector(".WeatherModule-current-humidity"),this.currFeels=this.querySelector(".WeatherModule-current-feelslike"),this.currWinds=this.querySelector(".WeatherModule-current-winds"),this.currWindSpeed=this.querySelector(".WeatherModule-current-winds-speed"),this.hourlyCarousel=this.querySelector(".WeatherModule-schedule-hourly-items"),this.weeklyContainer=this.querySelector(".WeatherModule-schedule-weekly-items"),this.hourlyButton=this.querySelector(".WeatherModule-schedule-button-hourly"),this.weeklyButton=this.querySelector(".WeatherModule-schedule-button-weekly"),this.schedule=this.querySelector(".WeatherModule-schedule"),this.map=this.querySelector(".WeatherModule-map-container"),this.event=this.setClickTarget.bind(this),this.currentUrl=new URL(window.location.href);var t=this.currentUrl.searchParams.get("zip");if(t){var e=this.querySelector("[data-zip='".concat(t,"']"));e&&e.parentNode.setAttribute("data-hide",""),this.setLocation(t)}else{var i=this.querySelector("[data-default]"),n=i.getAttribute("data-zip");n&&(i.parentNode.setAttribute("data-hide",""),this.setLocation(n))}}},{key:"setMap",value:function(t){var e=this.querySelectorAll('[data-zip="'.concat(t,'"]'))[1].getAttribute("data-map");this.map.innerHTML='<iframe src="'.concat(e,'">')}},{key:"setLocation",value:function(t){var e=this;this.locationUrl=new URL("https://".concat(this.subdomain,".accuweather.com/locations/v1/search")),this.locationUrl.searchParams.append("q",t),this.locationUrl.searchParams.append("apikey",this.apiKey),this.locations.forEach(function(t){t.addEventListener("click",function(){var i=t.getAttribute("data-zip");e.currentUrl.searchParams.set("zip",i),window.location.href=e.currentUrl})}),this.checkClickTarget(),this.getLocation(t)}},{key:"set10DayForecast",value:function(t){var e=this;t.DailyForecasts.forEach(function(t){var i=new Date(1e3*t.EpochDate),n='<div class="WeatherModule-schedule-weekly-items-item"><div class="Weekly">\n      <div class="Weekly-wx-img" data-icon="'.concat(t.Day.Icon,'"></div>\n      <div class="Weekly-day">').concat(e.getDayOfWeek(i.getDay()),'</div>\n      <div class="Weekly-weather">').concat(t.Day.IconPhrase,'</div>\n      <div class="Weekly-high"><span>HI: </span>').concat(t.Temperature.Maximum.Value,'°</div>\n      <div class="Weekly-low"><span>LO: </span>').concat(t.Temperature.Minimum.Value,"°</div>\n      </div></div>");e.weeklyContainer.innerHTML+=n})}},{key:"set12HourForecast",value:function(t){var e=this;this.hourlyButton.setAttribute("data-active",""),this.hourlyCarousel.setAttribute("data-active",""),t.forEach(function(t){var i=new Date(1e3*t.EpochDateTime),n='<div class="WeatherModule-schedule-hourly-items-item"><div class="Hour">\n      <div class="Hour-time">'.concat(e.formatDate(i,!1),'</div>\n      <div class="Hour-wx-img" data-icon="').concat(t.WeatherIcon,'"></div>\n      <div class="Hour-wx">').concat(t.IconPhrase,'</div>\n      <div class="Hour-temp">').concat(t.Temperature.Value,"°</div>\n      </div></div>");e.hourlyCarousel.innerHTML+=n}),this.setCarousel()}},{key:"setDailyForecast",value:function(t){this.currLow.innerHTML=t.DailyForecasts[0].Temperature.Minimum.Value+"°",this.currHigh.innerHTML=t.DailyForecasts[0].Temperature.Maximum.Value+"°";var e=new Date(1e3*t.DailyForecasts[0].Sun.EpochRise),i=new Date(1e3*t.DailyForecasts[0].Sun.EpochSet);this.currSunrise.innerHTML=this.formatDate(e,!0),this.currSunset.innerHTML=this.formatDate(i,!0)}},{key:"setCurrent",value:function(t){this.currTemp.innerHTML=t.Temperature.Imperial.Value+"°",this.currWX.innerHTML=t.WeatherText,this.currIcon.setAttribute("data-icon",t.WeatherIcon),this.currHum.innerHTML=t.RelativeHumidity+"%",this.currFeels.innerHTML=t.RealFeelTemperature.Imperial.Value+"°",this.currWindSpeed.innerHTML=t.Wind.Speed.Imperial.Value+"<div>mph</div>",this.currWinds.setAttribute("data-direction",t.Wind.Direction.English)}},{key:"setData",value:function(t){var e=this.setUrl("https://".concat(this.subdomain,".accuweather.com/currentconditions/v1/"),t,!0),i=this.setUrl("https://".concat(this.subdomain,".accuweather.com/forecasts/v1/daily/1day/"),t,!0),n=this.setUrl("https://".concat(this.subdomain,".accuweather.com/forecasts/v1/hourly/12hour/"),t,!1),r=this.setUrl("https://".concat(this.subdomain,".accuweather.com/forecasts/v1/daily/10day/"),t,!1);this.getData(e,"current"),this.getData(i,"daily"),this.getData(n,"hourly"),this.getData(r,"weekly")}},{key:"setCarousel",value:function(){var t=this;this.hourFlickity=this.initFlickity(this.hourlyCarousel),this.hourFlickity.resize(),window.addEventListener("resize",b(250,function(){t.checkCarouselItems()?(t.weeklyFlickity=t.initFlickity(t.weeklyContainer),t.weeklyFlickity.resize()):t.weeklyFlickity&&t.weeklyFlickity.destroy()})),this.setOptionToggle(this.hourlyButton,this.hourlyCarousel,this.weeklyButton,this.weeklyContainer,this.hourFlickity),this.setOptionToggle(this.weeklyButton,this.weeklyContainer,this.hourlyButton,this.hourlyCarousel,this.weeklyFlickity)}},{key:"setUrl",value:function(t,e,i){var n=new URL(t+e);return i&&n.searchParams.append("details",!0),n.searchParams.append("apikey",this.apiKey),n}},{key:"getLocation",value:function(t){var e=this;return new Promise(function(i,n){window.fetch(e.locationUrl,{method:"GET"}).then(function(t){if(200!==t.status)throw new Error(t.statusText);return t.json()}).then(function(i){var n=i[0],r=e.querySelector(".Location[data-zip='".concat(t,"']"));return e.currLocation.innerHTML=r?r.innerHTML:n.LocalizedName,e.currLocation.setAttribute("data-zip",t),n.Key}).then(function(i){e.setData(i),e.setMap(t)})})}},{key:"getData",value:function(t,e){var i=this;window.fetch(t,{method:"GET"}).then(function(t){if(200!==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){switch(e){case"daily":i.setDailyForecast(t);break;case"hourly":i.set12HourForecast(t);break;case"weekly":i.set10DayForecast(t);break;case"current":i.setCurrent(t[0]);break;default:console.log("Unexpected value: "+e)}})}},{key:"setOptionToggle",value:function(t,e,i,n,r){var o=this;t.addEventListener("click",function(){t.getAttribute("data-active")||(t.setAttribute("data-active",""),e.setAttribute("data-active",""),i.removeAttribute("data-active"),n.removeAttribute("data-active"),r&&r.resize()),o.checkCarouselItems()&&(r=o.initFlickity(e)).resize()})}},{key:"setClickTarget",value:function(t){this.currLocationWrapper&&(!this.currLocationWrapper.contains(t.target)&&this.currLocationWrapper.getAttribute("data-toggle-in")&&this.currLocationWrapper.removeAttribute("data-toggle-in"))}},{key:"checkCarouselItems",value:function(){for(var t=this.querySelectorAll(".WeatherModule-schedule-weekly-items-item"),e=0,i=this.schedule.offsetWidth,n=0;n<t.length;n++){var r=getComputedStyle(t[n]);e+=t[n].getBoundingClientRect().width+parseInt(r.marginLeft)+parseInt(r.marginRight)}return e>i}},{key:"checkClickTarget",value:function(){document.addEventListener("click",this.event)}},{key:"initFlickity",value:function(t){return new w.a(t,{contain:!0,cellAlign:"left",setGallerySize:!0,pageDots:!1,wrapAround:!1,arrowShape:"M22.4566257,37.2056786 L-21.4456527,71.9511488 C-22.9248661,72.9681457 -24.9073712,72.5311671 -25.8758148,70.9765924 L-26.9788683,69.2027424 C-27.9450684,67.6481676 -27.5292733,65.5646602 -26.0500598,64.5484493 L20.154796,28.2208967 C21.5532435,27.2597011 23.3600078,27.2597011 24.759951,28.2208967 L71.0500598,64.4659264 C72.5292733,65.4829232 72.9450684,67.5672166 71.9788683,69.1217913 L70.8750669,70.8956413 C69.9073712,72.4502161 67.9241183,72.8848368 66.4449048,71.8694118 L22.4566257,37.2056786 Z"})}},{key:"formatDate",value:function(t,e){var i=t.getHours(),n=t.getMinutes(),r=i>=12?"pm":"am";return(i%=12)||(i=12),e?i+":"+(n=("0"+n).slice(-2))+" "+r:i+r}},{key:"getMediaQuery",value:function(){var t=window.getComputedStyle(document.querySelector("body"),"::before").getPropertyValue("content")||!1;return!!t&&t.replace(/["']/g,"")}},{key:"getDayOfWeek",value:function(t){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]}}])&&hn(i.prototype,n),r&&hn(i,r),e}();function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function An(t,e){return!e||"object"!==mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wn(t){var e="function"==typeof Map?new Map:void 0;return(wn=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Sn(t,arguments,En(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),kn(n,t)})(t)}function Sn(t,e,i){return(Sn=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&kn(r,i.prototype),r}).apply(null,arguments)}function kn(t,e){return(kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function En(t){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),An(this,En(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kn(t,e)}(e,wn(HTMLElement)),i=e,(n=[{key:"connectedCallback",value:function(){this.apiKey=this.getAttribute("data-api-key"),this.subdomain=this.getAttribute("data-sub"),this.zip=this.getAttribute("data-zip"),this.apiKey&&this.subdomain&&this.zip&&this.setLocation(this.zip)}},{key:"setLocation",value:function(t){this.locationUrl=new URL("https://".concat(this.subdomain,".accuweather.com/locations/v1/search")),this.locationUrl.searchParams.append("q",t),this.locationUrl.searchParams.append("apikey",this.apiKey),this.getLocation()}},{key:"getLocation",value:function(){var t=this;return new Promise(function(e,i){window.fetch(t.locationUrl,{method:"GET"}).then(function(t){if(200!==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){return t[0].Key}).then(function(e){t.setData(e)})})}},{key:"setData",value:function(t){var e=this,i=new URL("https://".concat(this.subdomain,".accuweather.com/currentconditions/v1/")+t);i.searchParams.append("details",!0),i.searchParams.append("apikey",this.apiKey),window.fetch(i,{method:"GET"}).then(function(t){if(200!==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){var i='<div class="WeatherTip-icon" data-icon="'.concat(t[0].WeatherIcon,'"></div>\n      <div class="WeatherTip-temp">').concat(t[0].Temperature.Imperial.Value,"°F</div>");e.innerHTML=i})}}])&&bn(i.prototype,n),r&&bn(i,r),e}();function On(){window.customElements.define("ps-actionbar",c),window.customElements.define("ps-banner",m),window.customElements.define("ps-carousel",T),window.customElements.define("ps-comments",ji),window.customElements.define("ps-gallery-page",q),window.customElements.define("ps-brightcoveplayer",ot),window.customElements.define("ps-html5player",yt),window.customElements.define("ps-list-loadmore",Qt),window.customElements.define("ps-iframe-embed",kt),window.customElements.define("ps-interactive-project",Dt),window.customElements.define("ps-newsletter-module",pe),window.customElements.define("ps-header",Ee),window.customElements.define("ps-section-nav",Ai),window.customElements.define("ps-promo",xe),window.customElements.define("ps-live-banner",Be),window.customElements.define("ps-liveblog",te),window.customElements.define("ps-livechat",le),window.customElements.define("ps-search-filters",ri),window.customElements.define("ps-search-results-module",di),window.customElements.define("ps-storystack-page",Ci),window.customElements.define("ps-toggler",Ye),window.customElements.define("ps-youtubeplayer",Qi),window.customElements.define("ps-vimeoplayer",tn),window.customElements.define("ps-video-playlist",un),window.customElements.define("ps-weather",gn),window.customElements.define("ps-weather-tip",Pn),new Ke,new st,new z,new jt}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",On):On();e.default={}}]);