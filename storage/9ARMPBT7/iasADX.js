!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activeWindow=window,t.topWindow=top},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=n(0),i=function(){function e(){this.log=null,this.warn=null,this.error=null,this.log=this.logger.bind(this,"log"),this.warn=this.logger.bind(this,"warn"),this.error=this.logger.bind(this,"error")}return e.prototype.getQueryParamByName=function(e){var t,n,o,i,a=r.activeWindow.location.search&&r.activeWindow.location.search.toLowerCase(),d=a&&a.indexOf(e);return-1!==d&&(t=a.indexOf("=",d)+1,n=-1===(o=a.indexOf("&",t))?void 0:o,i=decodeURIComponent(a.slice(t,n))),i},e.prototype.logger=function(e,t){var n="background-color: ",i=r.activeWindow.console&&"function"==typeof r.activeWindow.console.error,a=this.getQueryParamByName("iasdebug"),d=a&&"TRUE"===a.toUpperCase();"log"===e?n+="lightgreen":"error"===e?n+="pink":"warn"===e&&(n+="lightyellow"),i&&d&&(console.log("%cIAS_DEBUG: "+t,n),o.pmLog("DEBUG_adxErrorsLog: IAS_DEBUG: "+t))},e}();t.reporter=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(0),i=n(1);t.start=function(e){try{new o.ADX(e)}catch(e){i.reporter.error(e.message)}},r.activeWindow.__iasADX=window.__iasADX||{},r.activeWindow.__iasADX.start=window.__iasADX.start||t.start},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(4),i=n(1),a=function(){function e(e){var t=this;this.iframesHtmlContents={},this.setAnId(e),o.topWindow.addEventListener("message",function(e){t.setIframesHtmlContents(),o.topWindow.googletag&&o.topWindow.googletag.pubadsReady&&(t.slots=o.topWindow.googletag.pubads().getSlots(),o.topWindow.googletag.pubads().addEventListener("slotRenderEnded",function(e){t.matchSlotToHtml(e,t)}))})}return e.prototype.setAnId=function(e){isNaN(Number(e))?i.reporter.error("Invalid an Id passed"):this.anId=Number(e)},e.prototype.getAnId=function(){return this.anId},e.prototype.setIframesHtmlContents=function(){var e=this;o.topWindow.ampInaboxIframes&&o.topWindow.ampInaboxIframes.forEach(function(t){try{var n=void 0;Boolean(t.getAttribute("data-is-safeframe"))||Boolean(t.getAttribute("sandbox"))||(n=t.contentDocument||t.contentWindow&&t.contentWindow.document),n&&e.isIframeContentsValid(t.id,n.body.innerHTML)?(e.iframesHtmlContents[t.id]=n.body.innerHTML,e.sendIframeSetEvent(t)):(Boolean(t.getAttribute("data-is-safeframe"))||Boolean(t.getAttribute("sandbox")))&&t.name&&e.isIframeContentsValid(t.id,t.name)&&(e.iframesHtmlContents[t.id]=t.name,e.sendIframeSetEvent(t))}catch(e){return!1}})},e.prototype.sendIframeSetEvent=function(e){var t=document.createEvent("Event");t.initEvent("iframeSet",!0,!0),e.dispatchEvent(t)},e.prototype.isIframeContentsValid=function(e,t){var n=!1;return t.length>2e3&&this.iframesHtmlContents[e]!==t&&(n=!0),n},e.prototype.getIframesHtmlContents=function(){return this.iframesHtmlContents},e.prototype.hasFirewallTag=function(e){return new RegExp("iasScriptUrl","g").test(e)},e.prototype.isAdxAd=function(e){return/(?=https?:\/\/(googleads|adx)\.g\.doubleclick\.net(:\d+)?($|\/)|https?:\/\/(?!adx)ad.*\.doubleclick\.net(:\d+)?($|\/))(?=.*\bhttps:\/\/pagead2\.googlesyndication\.com\/pagead\/s\/cookie_push(\.html#|_onload\.html#)\b).*$/im.test(e)},e.prototype.isAmpAdxAd=function(e){return/https?:\/\/(?!adx)ad.*\.doubleclick\.net(:\d+)?($|\/).*$/im.test(e)&&/https?:\/\/(googleads|adx)\.g\.doubleclick\.net(:\d+)?($|\/).*$/im.test(e)&&/<amp-ad-exit/.test(e)},e.prototype.matchSlotToHtml=function(e,t){function n(){try{var n;n=t.getIframesHtmlContents();var o=Object.keys(n).find(function(t){return new RegExp(""+e.slot.getSlotId().toString(),"g").test(t)}),r=e.slot.iasHtml||t.iframesHtmlContents[o];!r||t.hasFirewallTag(r)||Boolean(e.slot.adxAppendedScript)||(i.reporter.warn("NO FIREWALL TAG FOUND - "+o),t.isAdxAd(r)||t.isAmpAdxAd(r)?(i.reporter.log("IS ADX AD! - "+o),e.slot.isAdx=!0,t.attachFirewallTag(e.slot,o)):i.reporter.warn("NOT ADX AD! - "+o))}catch(e){i.reporter.warn("Can't match slot to html: "+e)}}-1!==Object.keys(t.iframesHtmlContents).indexOf("google_ads_iframe_"+e.slot.getSlotId().toString())?n():o.topWindow.addEventListener("iframeSet",function(){n()})},e.prototype.attachFirewallTag=function(e,t){var n=e.getSlotElementId(),i=document.getElementById(n),a=i.getBoundingClientRect(),d=t,s=e.getResponseInformation(),c=document.createElement("script"),l=(new Date).getTime();c.type="text/javascript";var u=document.createTextNode(r.generateTag(this.anId,e.getSlotElementId(),a.width,a.height,s.advertiserId,d,s.lineItemId,s.creativeId,s.campaignId,l,30));c.setAttribute("id","ias-"+l),c.appendChild(u),i.appendChild(c),o.topWindow.__iasADX.adxList=o.topWindow.adxList||[],o.topWindow.__iasADX.adxList.push(i),e.adxAppendedScript=!0},e}();t.ADX=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);t.generateTag=function(e,t,n,r,i,a,d,s,c,l,u){var p="//"+(o.reporter.getQueryParamByName("fwserver")||"pixel.adsafeprotected.com")+"/jload?anId="+e+"&campId="+n+"x"+r+"&pubId="+i+"&chanId="+a+"&placementId="+d+"&pubCreative="+s+"&pubOrder="+c+"&cb="+l;return"(function() {\n      var iasScriptUrl, hiddenFrame, hiddenDoc, where, domain;\n      iasScriptUrl = '"+p+"';\n      hiddenFrame = document.createElement('iframe');\n      (hiddenFrame.frameElement || hiddenFrame).style.cssText = \"width: 0; height: 0; border: 0; display: none;\";\n      hiddenFrame.src = 'javascript:false';\n      where = document.getElementById('"+t+'\');\n      where.parentNode.insertBefore(hiddenFrame, where);\n      try {\n          hiddenDoc = hiddenFrame.contentWindow.document;\n      } catch (e) {\n          domain = document.domain;\n          hiddenFrame.src = "javascript:var d=document.open();d.domain=\'" + domain + "\';void(0);";\n          hiddenDoc = hiddenFrame.contentWindow.document;\n      }\n      hiddenDoc.open().write("'+('<body onload=\\"window.__IntegralASUseFIF = true; window.__IntegralASAdRefreshThreshold = '+u+"; var js = document.createElement('script'); js.src = '"+p+"'; document.body.appendChild(js);\\\"></body>")+'");\n      hiddenDoc.close();\n  })();'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.pmLog=o.activeWindow.postMessage?function(e){o.topWindow.postMessage(e,"*")}:function(){}}]);
//# sourceMappingURL=iasADX.1.0.10.js.map