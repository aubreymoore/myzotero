(window.wjp=window.wjp||[]).push([[338],{4754:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(10),r=n(3),l=(n(1),n(0)),u=n.n(l),s=n(21),o=n(52),c=n(133),h=n(87),d=n.n(h),g=n(315),m=n(93),p=n(16),f=n(31),y=n(9),v=n.n(y),I=(n(5708),new v.a("header-search-action")),w={query:"",items:[],isLoading:!1,highlightedIndex:null},E=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state=w,t.inputValueChange=function(e){if(e.length<2)t.setState(Object(i.a)({query:e},w));else{var n=t.props,a=n.url,r={query:e,viewId:n.viewId};t.state.isLoading&&t.fetchRequest.cancel(),t.fetchRequest=Object(f.e)(Object(p.default)(a,{query:r})),t.setState({query:e,isLoading:!0}),t.fetchRequest.promise.then((function(e){t.setState({isLoading:!1}),e.success&&t.setState({items:e.result})})).catch((function(e){e.isCanceled||t.setState(w)}))}},t.handleInputValueChange=d()(t.inputValueChange,200),t}Object(r.a)(t,e),t.getDerivedStateFromProps=function(e,t){var n;return(null==(n=e.initialQueryRef)?void 0:n.current)?Object(i.a)({},t,{query:e.initialQueryRef.current}):t};var n=t.prototype;return n.getCurrentlySelectedOnEnter=function(){var e=this.state,t=e.items,n=e.highlightedIndex;return null!==n&&t.length>n?t[this.state.highlightedIndex]:null},n.handleInputKeyDown=function(e){if("Enter"===e.key&&e.target.value){e.persist(),e.stopPropagation(),e.preventDefault();var t=this.getCurrentlySelectedOnEnter();if(t&&t.url)return void(window.location.href=t.url);Promise.resolve().then((function(){e.target.form.submit()}))}},n.getListHeader=function(){return this.state.items.length>0?[u.a.createElement(s.a,Object(a.a)({key:"heading"},I("head")),"Researchers"),u.a.createElement("span",Object(a.a)({key:"divider"},I("divider")))]:null},n.getListFooter=function(){var e=this.props,t=e.formUrl,n=e.viewId,i=this.state,r=i.items,l=i.query;if(r.length>0){var s=t+"?origin=ac&headerSearchViewId="+n+"&query="+l+"&type=researcher";return[u.a.createElement("span",Object(a.a)({key:"divider"},I("divider"))),u.a.createElement(o.a,Object(a.a)({key:"more-results"},I("more"),{theme:"bare",color:"blue",href:s}),"All results for ",u.a.createElement("strong",null,l))]}return this.state.isLoading?u.a.createElement(m.b,{size:"l"}):null},n.showResults=function(e,t){return!(!e||!t||0===t.length)&&!(0===this.state.items.length&&!this.state.isLoading)},n.componentDidMount=function(){var e=this.state.query;e!==w.query&&this.inputValueChange(e)},n.render=function(){var e=this,t=this.state,n=t.items,i=t.query,r=this.props.input;return u.a.createElement(g.default,{itemToString:function(e){return e?e.name:""},initialInputValue:i,initialIsOpen:Boolean(i),onInputValueChange:this.handleInputValueChange,onStateChange:function(t){var n=t.highlightedIndex;return e.setState({highlightedIndex:n})}},(function(t){var i=t.getInputProps,s=t.getItemProps,o=t.highlightedIndex,h=t.inputValue,d=t.isOpen,g=i({id:"header-search-action"}),m=g.onKeyDown;return g.onKeyDown=function(t){m(t),e.handleInputKeyDown(t)},u.a.createElement("div",I(),Object(l.cloneElement)(r,g),e.showResults(d,h)&&u.a.createElement("div",I("results"),u.a.createElement("div",I("list"),e.getListHeader(),n.map((function(e,t){return u.a.createElement("a",Object(a.a)({key:e.id,href:e.url},s({item:e}),I({element:"list-item",extra:t===o?"is-highlighted":""})),u.a.createElement(c.a,{size:"s"},e.image?u.a.createElement(c.a.Image,{alt:e.name,imageUrl:e.image}):null,u.a.createElement(c.a.Fullname,null,e.name),e.institution?u.a.createElement(c.a.MetaItems,null,u.a.createElement(c.a.MetaItem,null,e.institution)):null))})),e.getListFooter())))}))},t}(l.Component);E.displayName="SearchAction",t.default=E},5708:function(e,t,n){}}]);