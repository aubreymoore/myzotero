var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.legacyModal='<div id="gigya-screen-dialog-page-overlay" style="display:${overlayDisplay}"></div>\r\n<div class="gigya-screen-dialog-inner">\r\n    <div class="gigya-screen-dialog-top">\r\n        <div class="gigya-screen-dialog-caption" id="gigya-screen-dialog-caption-${modalID}">$title</div>\r\n        <div class="gigya-screen-dialog-close"></div>\r\n    </div>\r\n</div>'}(t=e.base||(e.base={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.modal='<div id="gigya-screen-dialog-page-overlay" style="display:${overlayDisplay}"></div>\r\n<div class="gigya-screen-dialog-main">\r\n    <div class="gigya-screen-dialog-top">\r\n        <div class="gigya-screen-dialog-caption" id="gigya-screen-dialog-caption-${modalID}">$title</div>\r\n        <div class="gigya-screen-dialog-close">\r\n            <a href="#">${closeImage}</a>\r\n        </div>\r\n    </div>\r\n    <div class="gigya-screen-dialog-inner">\r\n    </div>\r\n</div>\r\n'}(t=e.base||(e.base={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.modalCloseButton='<img src="${imgUrl}" alt="X" height="${imgHeight}" width="${imgWidth}" />\r\n'}(t=e.base||(e.base={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.legacy_modal="div.gigya-screen-dialog,div.gigya-screen-dialog-mobile{position:absolute;display:inline-block;background-color:#FFF}div.gigya-screen-dialog{top:25px;left:25px;border:8px solid #CCC;border-radius:8px;outline:0}div.gigya-screen-dialog-inner{border:1px solid #AAA}div.gigya-screen-dialog-close{line-height:33px;height:33px;width:20px;float:right;cursor:pointer;background-image:url(${imgBase}/accounts/close_dialog.png);background-position:right;background-repeat:no-repeat}div.gigya-screen-dialog-caption{float:left;font-weight:700;font-size:16px;font-family:arial}div.gigya-screen-dialog-mobile{top:0;left:0;width:100%}div.gigya-screen-dialog-top{overflow:hidden;zoom:1;background-color:#F3F3F3;line-height:33px;padding:0 10px 0 11px}#gigya-screen-dialog-page-overlay{width:100vw;height:100vh;background:#000;position:fixed;top:0;left:0;z-index:-1;filter:alpha(opacity=20);opacity:.2}"}(t=e.base||(e.base={}))}(t=e.css||(e.css={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.modern_modal=".gigya-style-modern #gigya-screen-dialog-page-overlay{width:100vw;height:100vh;background:#000;position:fixed;top:0;left:0;z-index:-1;filter:alpha(opacity=20);opacity:.2}.gigya-style-modern div.gigya-screen-dialog-main{border:.5px;border-radius:3px;background-color:transparent;-webkit-box-shadow:0 3px 6px 0 rgba(0,0,0,.5);-moz-box-shadow:0 3px 6px 0 rgba(0,0,0,.5);box-shadow:0 3px 6px 0 rgba(0,0,0,.5);max-height:99vh;max-width:99vw;overflow:auto}.gigya-style-modern div.gigya-screen-dialog-top{overflow:hidden;zoom:1;background-color:#1371B9;line-height:38px;padding:0 10px 0 11px;border-radius:3px 3px 0 0}.gigya-style-modern div.gigya-screen-dialog-close{background-image:initial;background-position:initial;background-repeat:initial;float:right;cursor:pointer}.gigya-style-modern div.gigya-screen-dialog-close>a>img{margin-top:11px;vertical-align:initial;border:0;width:auto}.gigya-style-modern div.gigya-screen-dialog-caption{float:left;font-size:19px;font-family:arial;color:#FFF;padding-right:20px}.gigya-style-modern div.gigya-screen-dialog-inner{padding:0;overflow:hidden;min-width:32px;min-height:64px;background-color:#fff}.gigya-style-modern div.gigya-screen-dimmer{position:absolute;opacity:.2;filter:alpha(opacity=20);background-color:#FFF}.gigya-style-modern div.gigya-screen-loader{position:absolute;background:url(${imgBase}/accounts/bigLoader.gif) center center no-repeat;min-height:32px;min-width:32px}.gigya-style-modern.gigya-screen-dialog{position:fixed;border:none}.gigya-style-modern.gigya-screen-dialog-mobile{position:absolute;display:inline-block;top:0;left:0;background-color:#fff;width:100%;height:100%}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-main{max-height:100vh;max-width:100vw;box-shadow:initial;overflow:visible}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-top{position:fixed;top:0;border-radius:0;line-height:27px;box-sizing:border-box;width:100%;z-index:1}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-caption{font-size:14px}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-close>a>img{margin-top:5px}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-inner{border:0;margin-top:27px;box-sizing:border-box}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-inner>div{margin:0 auto}.gigya-style-modern.gigya-ios.gigya-ios-v7.gigya-screen-dialog-mobile div.gigya-screen-dialog-top,.gigya-style-modern.gigya-ios.gigya-screen-dialog{position:absolute}.gigya-style-modern.gigya-android.gigya-screen-dialog-mobile{overflow:auto}.gigya-style-modern.gigya-ie8 #gigya-screen-dialog-page-overlay{width:100%;height:100%}html.gigya-mobile-modal-mode{overflow:hidden}html.gigya-mobile-modal-mode body{height:0;overflow:hidden}"}(t=e.base||(e.base={}))}(t=e.css||(e.css={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){function t(e){return"gigya-style-"+i[e]}var i;!function(e){e[e._undefined=0]="_undefined",e[e.none=1]="none",e[e.legacy=2]="legacy",e[e.modern=3]="modern"}(i=e.PluginStyle||(e.PluginStyle={})),e.getPluginStyleClass=t}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i=function(){function t(e){void 0===e&&(e="object"==typeof console&&console.log?console.log:function(){}),this._logger=e,this._intervalID=void 0,this._actions=[]}return t.prototype.addActions=function(){for(var t=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.utils.array.forEach(i,function(e){t._actions.push(e)})},t.prototype.hasActions=function(){return this._actions.length>0},t.prototype.start=function(t,i){var n=this;if(void 0===i&&(i=!1),this.isStarted())return 1;if(!this.hasActions&&!i)throw"Poller has no actions to perform on interval";this._intervalID=setInterval(function(){e.utils.array.forEach(n._actions,function(e){e instanceof Function?e():e.act()})},t)},t.prototype.stop=function(){this._intervalID&&(clearInterval(this._intervalID),delete this._intervalID)},t.prototype.isStarted=function(){return Boolean(this._intervalID)},t.prototype.dispose=function(){this.stop();for(var e in this._actions)this._actions[e]instanceof Function||!this._actions.hasOwnProperty(e)||this._actions[e].dispose();delete this._actions,delete this._logger},t}();t.Poller=i}(t=e._||(e._={}))}(gigya||(gigya={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},gigya;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i=function(){function e(e,t,i){this._object=e,this._propery=t,this.callback=i}return e.prototype.act=function(){this._object[this._propery]||this.callback()},e.prototype.dispose=function(){delete this._object,delete this.callback},e}();t.InvalidPropertyAction=i;var n=function(){function e(e){this.callback=e,this._last={width:void 0,height:void 0}}return e.prototype.act=function(){var e=this.getCurrSize();this.isChanged(this._last,e)&&this.callback(this._last,e),this._last=e},e.prototype.dispose=function(){delete this.callback},e.prototype.getCurrSize=function(){},e.prototype.isChanged=function(e,t){return t.width!=this._last.width||t.height!=this._last.height},e}();t.SizeChangeAction=n;var o=function(e){function t(t,i){var n=e.call(this,i)||this;return n._container=t,n}return __extends(t,e),t.prototype.getCurrSize=function(){return{width:this._container&&this._container.style?this._container.clientWidth:void 0,height:this._container&&this._container.style?this._container.clientHeight:void 0}},t.prototype.dispose=function(){delete this._container,e.prototype.dispose.call(this)},t}(n);t.ContainerSizeAction=o;var a=function(t){function i(e){return t.call(this,e)||this}return __extends(i,t),i.prototype.getCurrSize=function(){var t=e.utils.viewport.getInnerSize(),i=e.utils.viewport.getOrientation();return{width:t.w,height:t.h,orientation:i}},i.prototype.isChanged=function(e,i){return t.prototype.isChanged.call(this,e,i)||e.orientation!=i.orientation},i}(n);t.ViewportSizeAction=a}(i=t.pollerActions||(t.pollerActions={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(){function t(e){this._container=e,this._isActive=!1,this._dimmer=document.createElement("div"),this._dimmer.className="gigya-screen-dimmer",this._loader=document.createElement("div"),this._loader.className="gigya-screen-loader"}return t.prototype.show=function(){this._isActive||(this.setElementOverContainer(this._dimmer),this.setElementOverContainer(this._loader),this._container.insertBefore(this._dimmer,this._container.firstChild),this._container.insertBefore(this._loader,this._container.firstChild),this._isActive=!0)},t.prototype.setElementOverContainer=function(t){e.global.getPos(this._container);t.style.width=this._container.offsetWidth+"px",t.style.height=this._container.offsetHeight+"px",t.style.zIndex=""+e.utils.DOM._nextZIndex++},t.prototype.isActive=function(){return this._isActive},t.prototype.hide=function(){this._isActive&&(this.unlinkElement(this._loader),this.unlinkElement(this._dimmer),this._isActive=!1)},t.prototype.unlinkElement=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.dispose=function(){this.hide(),delete this._container},t}();t.LoadDimmer=i}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){t.dialogClasses={document_mobile:"gigya-mobile-modal-mode",all_web:"gigya-screen-dialog",all_mobile:"gigya-screen-dialog-mobile",main:"gigya-screen-dialog-main",caption:"gigya-screen-dialog-caption",closeButton:"gigya-screen-dialog-close",content:"gigya-screen-dialog-inner"},t.legacyDialogClasses=e.utils.object.clone(t.dialogClasses),t.legacyDialogClasses.main=t.legacyDialogClasses.content}(i=t.modal||(t.modal={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(i){var n;!function(n){var o="gigya-modal-plugin-container",a=function(t){function a(e,i,o,a,l){void 0===a&&(a=!1);var r=t.call(this,o)||this;return r._triggerMethod=e,r.isMobileUI=i,r.isLegacy=a,r.onWindowResizeEvent=r.onWindowResize.bind(r),r._dialogClasses=r.isLegacy?n.legacyDialogClasses:n.dialogClasses,r.create(l),r}return __extends(a,t),a.prototype.onAfterCenterEvent=function(){return this.getEvent("onAfterModalCenter")},a.prototype.focusFirstFormElement=function(){var t=e.utils.tabbable.getSortedTabbableElements(this._contentContainer,"input,select,textarea");t[0]&&t[0].focus()},a.prototype.getConfig=function(){return{defaultParams:{},requiredParams:["modalTemplate"]}},a.prototype.showAll=function(){this._allContainer||this.create(),this.center(),this.isMobileUI&&e.utils.DOM.addClassToElement(document.documentElement,this._dialogClasses.document_mobile),this._allContainer.style.visibility="visible",e.localInfo.isIE||this.focusFirstFormElement(),e.utils.tabbable.bindTabLooping(this._contentContainer)},a.prototype.hideAll=function(){this._allContainer&&(this._allContainer.style.visibility="hidden",this.isMobileUI&&(this.removeWindowResizeListener(),document.documentElement.style.height="",e.utils.DOM.removeClassFromElement(document.documentElement,this._dialogClasses.document_mobile)),e.utils.tabbable.unbindTabLooping(this._contentContainer))},a.prototype.showMainDialog=function(){this._mainContainer&&(this._mainContainer.style.visibility="visible")},a.prototype.hideMainDialog=function(){this._mainContainer&&(this._mainContainer.style.visibility="visibile")},a.prototype.showLoading=function(){this._loader&&this._loader.show()},a.prototype.hideLoading=function(){this._loader&&this._loader.hide()},a.prototype.changeToMobile=function(){this._allContainer.className=this._dialogClasses.all_mobile},a.prototype.changeToWeb=function(){this._allContainer.className=this._dialogClasses.all_web},a.prototype.isLoading=function(){return this._loader&&this._loader.isActive()},a.prototype.resize=function(e){e&&(this.applyStyle("height",e.height),this.applyStyle("minHeight",e.minHeight),this.applyStyle("width",e.width),this.applyStyle("minWidth",e.minWidth),this.center())},a.prototype.applyStyle=function(e,t){null===t?this._mainContainer.style[e]="":t&&(this._mainContainer.style[e]=t)},a.prototype.addWindowResizeListener=function(){e.utils.DOM.addEventListener(window,"resize",this.onWindowResizeEvent)},a.prototype.removeWindowResizeListener=function(){e.utils.DOM.removeEventListener(window,"resize",this.onWindowResizeEvent)},a.prototype.onWindowResize=function(){this.isMobileUI&&this.adjustWindowHeight()},a.prototype.adjustWindowHeight=function(){document.documentElement.style.height=window.getComputedStyle(this._allContainer).height},a.prototype.center=function(){if(this.isMobileUI)this.adjustWindowHeight(),this.addWindowResizeListener();else{var t=!1;if(this.isLoading()&&(this.hideLoading(),t=!0),"absolute"==e.global.getStyle(this._allContainer,"position")){var i=e.utils.viewport.getMiddleCenter(),n=this._allContainer.offsetWidth,o=this._allContainer.offsetHeight,a=i.top-Math.floor(o/2),l=i.left-Math.round(n/2);a<10&&(a=10),l<10&&(l=10),this._allContainer.style.top=a+"px",this._allContainer.style.left=l+"px"}else{var r=e.utils.viewport.getInnerSize(),s=Math.max(0,(r.h-this._allContainer.clientHeight)/2),d=Math.max(0,(r.w-this._allContainer.clientWidth)/2);this._allContainer.style.top=s.toString()+"px",this._allContainer.style.left=d.toString()+"px"}t&&this.showLoading()}this.dispatchEvent("onAfterModalCenter")},a.prototype.create=function(t){var n=this;void 0===t&&(t=!0);var a=e.utils.DOM.getCenteredDivID(this._triggerMethod);this.params.newModal&&(a+=(new Date).getTime()),this._allContainer=e.utils.DOM.createTopLevelDiv(a),t&&this.hideAll(),this._allContainer.innerHTML=e.utils.templates.fill(this.params.modalTemplate,{modalID:a,title:this.params.captionText,closeImage:this.params.closeImage,overlayDisplay:!this.isMobileUI&&this.params.dimDialogBackground?"block":"none"}),this._allContainer.setAttribute("role","dialog"),this._allContainer.setAttribute("aria-labelledby","gigya-screen-dialog-caption-"+a),this._allContainer.setAttribute("tabindex","-1"),i.utils.css.addCss(this.params.modalCss,void 0,!1),this._mainContainer=e.utils.DOM.getElementsByClass(this._allContainer,this._dialogClasses.main)[0],this._captionContainer=e.utils.DOM.getElementsByClass(this._mainContainer,this._dialogClasses.caption)[0],this._closeButtonElement=e.utils.DOM.getElementsByClass(this._mainContainer,this._dialogClasses.closeButton)[0],this._closeButtonElement&&e.utils.DOM.addEventListener(this._closeButtonElement,"click",function(t){e.utils.DOM.disableDefaultEventHandling(t),n.hideAll(),n.params.onModalClose&&n.params.onModalClose(i.CloseReasons.canceled)}),this._contentContainer=e.utils.DOM.getElementsByClass(this._mainContainer,this._dialogClasses.content,!0)[0],this._contentContainer.id=o+"-"+this._triggerMethod,this._loader=new i.LoadDimmer(this._contentContainer),this.isMobileUI?e.utils.DOM.addClassToElement(this._allContainer,this._dialogClasses.all_mobile):e.utils.DOM.addClassToElement(this._allContainer,this._dialogClasses.all_web),this.center()},a.prototype.getMainContainer=function(){return this._mainContainer},a.prototype.getContentContainer=function(){return this._contentContainer},a.prototype.getCaptionContainer=function(){return this._captionContainer},a.prototype.getModalDialogContainer=function(){return this._allContainer},a.prototype.getLoadingIndicator=function(){return this._loader},a.prototype.dispose=function(){this.hideAll(),this._allContainer&&this._allContainer.parentElement&&this._allContainer.parentElement.removeChild(this._allContainer),this._loader&&this._loader.dispose(),delete this.params,t.prototype.dispose.call(this)},a}(t.BaseObject);n.ModalDialog=a}(n=i.modal||(i.modal={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e[e.pendingError=0]="pendingError",e[e.missing=1]="missing",e[e.finished=2]="finished",e[e.canceled=3]="canceled",e[e.backButton=4]="backButton",e[e.canceledByParent=5]="canceledByParent",e[e.skip=6]="skip",e[e.error=7]="error"}(t=e.CloseReasons||(e.CloseReasons={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(i){i.cssFlags={};var n=function(n){function o(a,l,r){var s=n.call(this,a,l,!1)||this;return s.params=a,s.explicitParams=l,s.injectionInfo=r,s._pixelRatio=o.globalPixelRatio,s._imgBase=o.globalImgBase,s._imgExt="png",s.MOBILE_MODAL_MIN_WIDTH=400,s.lang=s.params.lang,s._style=i.PluginStyle.modern,s._poller=new t.Poller,s.POLL_INTERVAL=150,s.config=e.utils.object.merge([s.injectionInfo,s.getConfig()]),s.localizedJsName=s.getTranslationJsName(),s}return __extends(o,n),o.prototype.onRefreshExternalComponentsEvent=function(){return this.getEvent("onRefreshExternalComponentsEvent")},o.prototype.refreshExternalComponents=function(){this.dispatchPluginEvent("onRefreshExternalComponentsEvent")},o.prototype.getTranslationJsName=function(){var e=this.config.jsName;return e=e.split("_v")[0],e.indexOf(".js")===-1&&(e+=".js"),e},o.prototype.start=function(){var t=this;if(this.params.containerID||this.config.allowModal)if(this.params.containerID){if(this.container=document.getElementById(this.params.containerID),!this.container)return void this.dispatchInvalidParamError("containerID");this.container.innerHTML="",this.containerID=this.params.containerID}else this.isModal=!0,this.params=e.utils.object.merge([this.config.defaultModalParams,this.params]);else this.dispatchInvalidParamError("containerID");this.validateParams()&&(this.initUI(),this.params._noInit?this.loadComplete():this.init(function(e){return t.loadComplete(e)}))},o.prototype.initUI=function(){var n=this;this._templates=i.resources.getTemplates(["base",this.config.name]),this._css=i.resources.getCss(["base",this.config.name]);var o=t.DeviceTypes._undefined;this.params.deviceType&&(o=t.DeviceTypes[this.params.deviceType.toLowerCase()]),o=o||this.getConfig().defaultDeviceType||t.DeviceTypes.desktop,this.params.deviceType=t.DeviceTypes[o],this.isMobileUI=o==t.DeviceTypes.mobile||o==t.DeviceTypes.auto&&e.localInfo.isMobile&&e.localInfo.isMobileApp,this.isRtl="he"==this.lang||"ar"==this.lang,this.initContainer(),this._style!=i.PluginStyle.none&&this.injectCss(),this._poller.addActions(new i.pollerActions.InvalidPropertyAction(this,"container",function(){return n.dispose()}))},o.prototype.loadComplete=function(e){var t=this;void 0===e&&(e=!0),e&&(this.dispatchPluginEvent("load"),this.container&&(this.isModal?(this._modalDialog&&!this.config.disableModalContainerInit&&this._modalDialog.showAll(),this.config.enableViewportPolling&&this._poller.addActions(new i.pollerActions.ViewportSizeAction(function(e,i){t.onViewportSizeChanged(e,i),t.centerModal(),t.refreshExternalComponents()}))):!this.config.enableSizePolling||this.params.width&&this.params.width.toString().indexOf("%",this.params.width.length-1)===-1||this._poller.addActions(new i.pollerActions.ContainerSizeAction(this.container,function(e,i){t.resizePlugin(e,i),t.refreshExternalComponents()})),this._poller.hasActions()&&this._poller.start(this.POLL_INTERVAL)))},o.prototype.initContainer=function(){this.isModal?this.initModalContainer():(e.utils.DOM.setSize(this.container,this.params.width,this.params.height,!1),this.addMetaDataClasses(this.container),this.params.responsive&&(this.container.style.width="auto"),this._loadingIndicator=new i.LoadDimmer(this.container))},o.prototype.initModalContainer=function(){this._style=this.getPluginStyle(),this.createModalDialog(),this._captionElement=this._modalDialog.getCaptionContainer(),this.container=this._modalDialog.getContentContainer(),this.containerID=this.container.id,this._loadingIndicator=this._modalDialog.getLoadingIndicator()},o.prototype.addMetaDataClasses=function(t){var n=this.getPluginStyle();switch(n){case i.PluginStyle.legacy:case i.PluginStyle.modern:e.utils.DOM.addClassToElement(t,i.getPluginStyleClass(n))}e.pluginUtils.DOM.addBrowserInfoClassesToElement(t)},o.prototype.getPluginStyle=function(){return i.PluginStyle[this.params.dialogStyle]||this.config.defaultDialogStyle||this._style},o.prototype.setContainerMinSize=function(){this.params.height&&"auto"!=this.params.height&&this.params.height.indexOf("%")==-1&&(this.container.style.minHeight=this.params.height+"px"),this.params.width&&"auto"!=this.params.width&&this.params.width.indexOf("%")==-1&&(this.container.style.minWidth=this.params.width+"px")},o.prototype.createModalDialog=function(){var t,n=this;t=this.params.captionText?this.params.captionText:this.params.captionTextKey?this.getText(this.params.captionTextKey):"&nbsp;";var o,a;a="undefined"!=typeof this.params.dimDialogBackground?this.params.dimDialogBackground:!(!this.config.defaultModalParams||"undefined"==typeof this.config.defaultModalParams.dimDialogBackground)&&this.config.defaultModalParams.dimDialogBackground;var l,r=this.params.modalCss,s=!1;if(!r)switch(this._style){case i.PluginStyle.modern:r=this.getCss().modern_modal,l=this.getPhotoFullName("gm/close");break;case i.PluginStyle.legacy:s=!0,r=this.getCss().legacy_modal,l=this._imgBase+"gm/CloseButton."+this._imgExt;break;case i.PluginStyle.none:r="",l=this.getPhotoFullName("gm/close");break;default:throw new Error("unrecognized dialog style")}r=e.utils.templates.fill(r,{imgBase:this._imgBase}),o=this.params.closeImage?this.params.closeImage:e.utils.templates.fill(this.getTemplates().modalCloseButton,{imgUrl:this.params.closeImageUrl||l,imgHeight:this.params.closeImageHeight||15,imgWidth:this.params.closeImageWidth||15}),this._modalDialog=new i.modal.ModalDialog(this.injectionInfo.methodName,this.isMobileUI,{modalTemplate:this.params.modalTemplate||(s?this.getTemplates().legacyModal:this.getTemplates().modal),modalCss:r,captionText:t,closeImage:o,dimDialogBackground:a,newModal:this.params.newModal,onModalClose:function(e){return n.close(i.CloseReasons[e])}},s),this.addMetaDataClasses(this._modalDialog.getModalDialogContainer());var d={key:27};e.utils.keyboard.onHotKeyClicked(d,function(){n.close()})},o.prototype.injectCss=function(){var t="",n=this.params.cssPrefix,o=this.getCss(),a=this.config.jsName;i.cssFlags[a]||(i.cssFlags[a]={});var l=i.cssFlags[a];!n&&this.addedCss||(t=this.addCssIfDidntLoad("reset",o,l,t),this.isRtl&&(t=this.addCssIfDidntLoad("resetRtl",o,l,t)),t=this.addCssIfDidntLoad("global",o,l,t),this.isRtl&&(t=this.addCssIfDidntLoad("globalRtl",o,l,t)),this.isMobileUI?(t=this.addCssIfDidntLoad("mobile",o,l,t),this.isRtl&&(t=this.addCssIfDidntLoad("mobileRtl",o,l,t))):(t=this.addCssIfDidntLoad("nonMobile",o,l,t),this.isRtl&&(t=this.addCssIfDidntLoad("nonMobileRtl",o,l,t))),t&&e._.plugins.utils.css.addCss(t,n),this.addedCss=!0),this.config.hasMobileUI&&this.isMobileUI&&this.container&&(this.container.style.width="100%")},o.prototype.init=function(e){this.error(t.BaseObject.NOT_IMPLEMENTED_ERROR,400096),e(!1)},o.prototype.resizePlugin=function(e,t){},o.prototype.onViewportSizeChanged=function(e,t){},o.prototype.shouldClose=function(){return!0},o.prototype.centerModal=function(){this._modalDialog&&!this.isMobileUI&&this._modalDialog.center()},o.prototype.resizeModal=function(e){if(this.isModal&&this._modalDialog&&!this.isMobileUI){this.getPluginStyle()===i.PluginStyle.legacy&&(e.height&&(e.minHeight=parseInt(e.height)+"px",delete e.height),e.width&&(e.minWidth=parseInt(e.width)+"px",delete e.width));({height:this.container.clientHeight,width:this.container.clientWidth});this._modalDialog.resize(e);({height:this.container.clientHeight,width:this.container.clientWidth});this.config.disableModalContainerInit||this.centerModal()}},o.prototype.getPhotoFullName=function(e,t,i,n){return void 0===t&&(t=this._pixelRatio),void 0===i&&(i=this._imgExt),void 0===n&&(n=this._imgBase),n+e+"_x"+t+"."+i},o.prototype.dispatchPluginEvent=function(e,t){return void 0===t&&(t={}),this.dispatchEvent(e,t)},o.prototype.getTemplates=function(){return this._templates},o.prototype.getCss=function(){return this._css},o.prototype.addCssIfDidntLoad=function(e,t,i,n){return t[e]&&!i[e]?(i[e]=!0,n+=" "+t[e]):n},o.prototype.getText=function(t,i,n){var o=t;return o=this.params.customLang&&this.params.customLang[t]?this.params.customLang[t]:e.pluginUtils.lang.getLocalizedText(this.localizedJsName,t,this.lang),o.replace(i,n)},o.prototype.toString=function(){return this.params.containerID+"."+this.injectionInfo.name},o.prototype.error=function(e,t,i){void 0===t&&(t=300001);var n={errorMessage:e,errorCode:t,errorDetails:this.toString(),containerID:this.params.containerID,params:this.params,info:i};this.warn(e,i),this.dispatchErrorFromResponse(n)},o.prototype.close=function(e,t){t||(t={}),t.reason=e,this.dispatchPluginEvent("hide",t),this.shouldClose()&&this.dispose()},o.prototype.dispose=function(){this._isDisposed||(this._poller.dispose(),this.container&&(this.container.innerHTML=""),this._modalDialog&&this._modalDialog.dispose(),this._loadingIndicator&&this._loadingIndicator.dispose(),this.container=null,i.removePluginInstance(this.params,this.injectionInfo),n.prototype.dispose.call(this))},o}(t.BaseObject);n.globalPixelRatio=window.devicePixelRatio?Math.min(Math.ceil(window.devicePixelRatio),3):1,n.globalImgBase=e._.getImgCdnResource(),i.BasePlugin=n}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),gigya.socialize._AddJSRequest=function(servicedBy,methodName,needsContainer,params){if(!document.body){var args=arguments;return void window.setTimeout(function(){gigya.socialize._AddJSRequest.apply(this,args)},300)}params||(params={}),gigya.log.logCall(methodName.split(".").pop(),params);var containerID=params.containerID,blnCenter=!1,container;if(needsContainer?"undefined"==typeof containerID||""==containerID?(containerID=gigya.utils.DOM.getCenteredDivID(methodName),params.containerID=containerID,blnCenter=!0,params.isPopup=!0,container=document.getElementById(containerID),null==container&&(container=gigya.utils.DOM.createTopLevelDiv(containerID))):container=document.getElementById(containerID):(null==gigya.utils.DOM._pseudoContainers[containerID]&&(gigya.utils.DOM._pseudoContainers[containerID]={}),container=gigya.utils.DOM._pseudoContainers[containerID]),!container)return void gigya.events.dispatchInvalidParamError(params,"containerID");var localMethodName=methodName.split(".").pop();if(container.setAttribute&&container.setAttribute("gigid",(params.source&&params.source!=localMethodName?params.source+"_":"")+localMethodName),container.style){container.style.display="",container.style.visibility="",container.innerHTML="";var ifrel=document.getElementById("gigya_ifr_"+containerID);ifrel&&(ifrel.style.display="",ifrel.style.visibility="");var fncFixPosition=function(){null!=ifrel&&(gigya.utils.DOM.setSize(ifrel,params.width,params.height,blnCenter),ifrel.style.visibility="visible"),gigya.utils.DOM.setSize(container,params.width,params.height,blnCenter)};fncFixPosition()}var Reqs=container.Reqs?container.Reqs:container.Reqs=[],rid=Reqs.length+"@"+servicedBy+"@"+containerID;params.rid=rid;var operation=methodName;params._operation&&(operation=params._operation);for(var req=Reqs[Reqs.length]={rid:rid,servicedBy:servicedBy,container:container,method:methodName,context:params.context,c:params,p:params,i:params,operation:operation,isHTML:!0},methodNameParts=methodName.split("."),node=eval(methodNameParts[0]),pfxi=1;null!=(node=node[methodNameParts[pfxi]])&&++pfxi<methodNameParts.length;);var func=node;return gigya.utils.script.load(gigya._.getCdnResource("/js/"+servicedBy+".min.js"+(params.lang?"?lang="+params.lang:"")),null,function(){gigya.reports.reportLoad(methodName,params),gigya.utils.functions.callFunction(methodName,[params,params,params])},!0),containerID},gigya.socialize._parseRID=function(e){var t,i=e.split("@"),n=document.getElementById(i[2]+"_"+i[1]),o=i[2];null==(t=gigya.utils.DOM._pseudoContainers[o])&&(t=document.getElementById(i[2]));var a=null;null!=t&&(a=t.Reqs);var l=null;return null!=a&&(l=a[parseInt(i[0])]),{rid:e,container:t,Reqs:a,req:l,swf:n}};var gigya;!function(e){var t;!function(t){function i(t,i){if(void 0===i&&(i=0),i||(i=0),!t||0==t.length)return[];var n=t[i];if(i==t.length-1){for(var o=[],a=0;a<n.length;a++)o.push([n[a]]);return o}var o=[],l=e.global.getCombination(t,i+1);if(n)for(var a=0;a<n.length;a++)for(var r=0;r<l.length;r++)o.push([n[a]].concat(l[r]));return o}function n(t,i,n){for(var o=e.utils.array.getArrayFromString(t,",",!0),a=e.utils.array.getArrayFromString(i,",",!0),l=e.utils.array.getArrayFromString(n,",",!0),r=0;r<a.length;r++)e.utils.array.removeByValue(o,a[r]);for(var s=e._.providers.getProvidersByName(o.join(",")),r=0;r<a.length;r++)e.utils.array.removeByProperty(s,"name",a[r]);return e.socialize.getProvidersForRequiredCapabilities(s,l)}t.getCombination=i,t.resolveProviders=n}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(t){var i=e.utils.object.clone(t);return delete i.instanceID,delete i.getInstance,i}t.cloneParamsForPlugin=i}(i=t.object||(t.object={}))}(t=e.utils||(e.utils={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){var i=null;if(e.localInfo.isIE8)i=n(t);else{var o=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,a=o.exec(t)||[];if(a[1]){var l=Date.parse(t);i=new Date(l)}}return i}function n(e){var t,i,n=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,o=n.exec(e)||[];if(o[1]){t=o[1].split(/\D/);for(var a=0,l=t.length;a<l;a++)t[a]=parseInt(t[a],10)||0;return t[1]-=1,t=new Date(Date.UTC.apply(Date,t)),t.getDate()?(o[5]&&(i=60*parseInt(o[5],10),o[6]&&(i+=parseInt(o[6],10)),"+"==o[4]&&(i*=-1),i&&t.setUTCMinutes(t.getUTCMinutes()+i)),t):null}return null}t.getISODate=i}(i=t.date||(t.date={}))}(t=e.global||(e.global={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t,i,n,o,a){if("te-st"==n)return"TEST_"+i.substring(0,10);n||(n="en");var l=e.i18n[t][n]?e.i18n[t][n][i]:e.i18n[t].en[i];return l&&o&&(l=l.replace(o,a)),l}t.getLocalizedText=i}(i=t.lang||(t.lang={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){return e.pluginUtils.validation.isEmailListValid(t)}function n(e){for(var t="((?=([^.].{0,63}@.{1,255}))([!#$%&'*+\\-\\/=?\\^_`{|}~a-zA-Z0-9}]{1,64}(\\.[!#$%&'*+\\-\\/=?\\^_`{|}~a-zA-Z0-9]{1,}){0,})@((\\[(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}\\])|([a-zA-Z0-9-]{1,63}(\\.[a-zA-Z0-9-]{1,63}){1,})))",i='(("[^<]+<('+t+')>")|(("[^"]*" *)?<('+t+")>)|("+t+"))",n=new RegExp(i),o=e.split(","),a=0;a<o.length;a++)if(!n.test(o[a]))return!1;
return!0}t.isEmailValid=i,t.isEmailListValid=n}(i=t.validation||(t.validation={}));var n;!function(e){function t(e){if(void 0===e&&(e=void 0),e){var t="^"+e.replace(/\./g,"\\.").replace(/\*\\./g,"([a-zA-Z0-9]+\\.)*")+"$",i=new RegExp(t);return i.test(document.domain)}}e.isInDomain=t}(n=t.domain||(t.domain={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(e){function t(e){if(e.indexOf(" ")>=0)return!1;var t=e.split("@");if(2!=t.length)return!1;if(0==t[0].length)return!1;if(0==t[1].length)return!1;var i=t[1].split(".");if(i.length<2)return!1;for(var n=0;n<i.length;n++)if(0==i[n].length||i[n].indexOf(" ")>0)return!1;return!0}e.isEmail=t}(t=e.global||(e.global={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(e,t){void 0===t&&(t=1),void 0==e.style.opacity?e.style.filter="alpha(opacity=0)":e.style.opacity="0",window.setTimeout(function(){void 0==e.style.opacity?e.style.filter="alpha(opacity="+100*t+")":e.style.opacity=t+""},10)}function n(t){var i=e.global.getClassBordersAndPaddings(t.className),n=t.offsetHeight-i.h,o=t.style.transitionProperty;t.style.maxHeight="1px",t.style.transitionProperty=t.style.webkitTransitionProperty="max-height",window.setTimeout(function(){t.style.maxHeight=n+"px",t.style.transitionProperty=t.style.webkitTransitionProperty=o},100);var a=function(){t.style.maxHeight="999px",e.utils.DOM.removeEventListener(t,"transitionend",a),e.utils.DOM.removeEventListener(t,"webkitTransitionEnd",a)};e.utils.DOM.addEventListener(t,"transitionend",a),e.utils.DOM.addEventListener(t,"webkitTransitionEnd",a),window.setTimeout(a,500)}t.fadeIn=i,t.slideDown=n}(i=t.animation||(t.animation={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t,i,n){if(void 0===i&&(i=""),void 0===n&&(n=void 0),t){n||(n=parseInt(e.global.getStyle(t,"height")));t.innerHTML='<div class="'+i+'" style="height:'+n+"px;background-image:url('"+e._.getCdnResource("/gs/i/gm/loader.gif")+"'); background-repeat:no-repeat;background-position:center center\"></div>"}}function n(e){e.interval&&clearInterval(e.interval),e.style.opacity="0",e.interval=setInterval(function(){var t=parseFloat(e.style.opacity);t>=1&&clearInterval(e.interval),e.style.opacity=t+.1},10)}function o(t,i,n,o,a,l,r,s,d){var g=13,c=25;e.global.addedBalloonCSS||(e.global.addCSS([".gig-balloons *, div.gig-balloons, .gig-balloons span, .gig-balloons a:hover, .gig-balloons a:visited, .gig-balloons a:link, .gig-balloons a:active{","border:none; line-height:normal;padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;-moz-border-radius:0;border-radius:0;","font-family:arial;font-size:10px;color:#797979;background:none;text-align:left}","div.gig-balloon-frame {","zoom:1;padding:15px 10px 10px 10px; border:1px solid #b4b4b4; min-height:80px; background-color:#FFFFFF; z-index:"+e.utils.DOM._nextZIndex++ +";","box-shadow:0 0 5px RGBA(0,0,0,0.6);-webkit-box-shadow:0 0 5px RGBA(0,0,0,0.6);-moz-box-shadow:0 0 5px RGBA(0,0,0,0.6);}",'div.gig-balloon-nub {left:+1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub.png")+'");width:'+g+"px;height:"+c+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'div.gig-balloon-nub-right { left:-1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub_right.png")+'");width:'+g+"px;height:"+c+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'div.gig-balloon-nub-up { top:+1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub_up.png")+'");width:'+c+"px;height:"+g+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'div.gig-balloon-nub-down { top:-1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub_down.png")+'");width:'+c+"px;height:"+g+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'span.gig-balloon-closeImage { cursor:pointer; float:right;background-image:url("'+e._.getCdnResource("/gs/i/gm/CloseButton.png")+'"); width:14px;height:14px; margin:-7px -2px 0 0  }',"div.gig-balloon-caption {font-family:arial; font-size: 12px; font-weight:bold; color: #0b81c1; border-bottom: 1px solid #e8e8e8;padding-bottom:2px;}","span.gig-balloon-caption-text {float:left}"]),!e.localInfo.isIE||!e.localInfo.quirksMode&&e.localInfo.isIE9||e.global.addCSS(["div.gig-balloon-frame {","-ms-filter: \"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#B4B4B4');\";","filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#B4B4B4');}","}","div.gig-balloon-nub-right { left:-5px;}"]),e.global.addedBalloonCSS=!0);var p="";if(e.localInfo.quirksMode){var u=e.global.getClassBordersAndPaddings("gig-balloon-frame");n&&(n+=u.w),o&&(o+=u.h)}n&&(p+="width: "+n+"px;"),o&&(p+="height: "+o+"px;");var h="";a&&(h+="left"===l||"right"===l?"top: "+a+"px;":"left: "+a+"px;");var f="";f+=i?'<div class="gig-balloon-caption"><span class="gig-balloon-caption-text" style="width:'+(n-20)+'px">'+i+"</span>":'<div class="gig-balloon-caption" style="border-bottom:none">',!r&&s&&(f+='<span class="gig-balloon-closeImage" onclick="'+s+'"></span>'),f+='<div style="clear:both;height:0;width:0;font-size:1px;"><!-- empty divs=100% height IE --></div></div><div class="gig-balloon-body">'+t+"</div>";var m;return a?(m='<table cellpadding="0" cellspacing="0" class="gig-balloon"><tr>',"up"===l&&(m+='<td style=""><div class="gig-balloon-nub-up" style="'+h+'"></div></td></tr><tr>'),"left"===l&&(m+='<td style="vertical-align:top"><div class="gig-balloon-nub" style="'+h+'"></div></td>'),m+='<td style="vertical-align:top"><div id="'+d+'" class="gig-balloon-frame" style="'+p+'">'+f+"</div></td>","right"===l&&(m+='<td style="vertical-align:top"><div class="gig-balloon-nub-right" style="'+h+'"></div></td>'),"down"===l&&(m+='</tr><tr><td style="vertical-align:top"><div class="gig-balloon-nub-down" style="'+h+'"></div></td>'),m+="</tr></table>",m+='<div style="clear:both;height:0;width:0;font-size:1px;"><!-- empty divs=100% height IE --></div>'):m='<div class="gig-balloon gig-balloon-frame" style="'+p+'">'+f+"</div>",m}function a(t,i,n,o,a,l,r,s,d,g){g=g?"gig-balloon "+g:"gig-balloon",e.global.removeGMBalloon();var c=(new Date).getTime(),p="gig_gmBalloon_"+c;s&&(p=s);var u=p+"_frame",h=e.global.getBalloonHTML(t,i,n,o,a,l,r,"gigya.global.removeGMBalloon()",u),f=document.createElement("div");return f.className=g,f.style.position="absolute",f.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),f.innerHTML=h,f.id=p,e.global.fadeIn(f),e.utils.DOM.appendToBody(f),e.global.divGMBalloon=f,d||window.setTimeout(function(){e.pluginUtils.DOM.removeElementOnDocClick(f,null,null,"click")},50),f}function l(t){var i;if(t)for(i=t.target,i||(i=t.srcElement);null!=i&&i.offsetParent&&i.id.indexOf(e.global.divGMBalloon.id)==-1;)i=i.offsetParent;if(!i||i.id.indexOf(e.global.divGMBalloon.id)==-1)try{e.global.removeIframeShim(document.getElementById(e.global.divGMBalloon.id+"_frame")),e.global.divGMBalloon.parentNode.removeChild(e.global.divGMBalloon),document.detachEvent?document.detachEvent("onclick",e.global.removeGMBalloon):document.removeEventListener&&document.removeEventListener("click",e.global.removeGMBalloon,!1)}catch(e){}}function r(e,t,i,n,o,a,l,r,s,d){void 0===s&&(s=["left","right","up","down"]),void 0===d&&(d="");for(var g={body:t,caption:i,w:n,h:o,hideClose:a,id:l,dontHideOnClick:r,balloonClass:d},c=0;c<s.length&&!this.positionGMBalloonNextTo(e,s[c],g);c++);}function s(t,i,n){"left"===i||"right"===i?e.global.createGMBalloon(n.body,n.caption,n.w,n.h,47,"left",n.hideClose,n.id,n.dontHideOnClick,n.balloonClass):e.global.createGMBalloon(n.body,n.caption,n.w,n.h,10,"down",n.hideClose,n.id,n.dontHideOnClick,n.balloonClass);var o,a,l=e.global.divGMBalloon.offsetWidth,r=e.global.divGMBalloon.offsetHeight,s=e.global._GetElementPos(t),d=document.documentElement,g=document.body,c=d.clientHeight;0==c&&(c=g.clientHeight);var p=d.clientWidth;0==p&&(p=g.clientWidth),window.innerHeight&&(c=g.scrollHeight&&g.scrollHeight<window.innerHeight?g.scrollHeight:window.innerHeight,p=g.scrollWidth&&g.scrollWidth<window.innerWidth?g.scrollWidth:window.innerWidth);var u,h,f=e.utils.viewport.getScroll(),m=f.top,y=m+c;if("left"===i||"right"===i){h=47,a=s.top+t.offsetHeight/2-47-12.5,a+r>y&&(a=y-r-10);var v=s.left-l-5,b=s.left+t.offsetWidth+5;if("left"===i){if(!(v>10))return null;o=v,u="right",n.balloonClass+=" gig-balloon-left"}else{if(!(p-b-l>10))return null;o=b,u="left",n.balloonClass+=" gig-balloon-right"}}else{if("up"!==i&&"down"!==i)return null;h=10,o=s.left;var x=s.top-r-10,_=s.top+t.offsetHeight+5;if("up"===i){if(!(x>5))return null;a=x,u="down",n.balloonClass+=" gig-balloon-up"}else a=_,u="up",n.balloonClass+=" gig-balloon-down"}var C=e.global.createGMBalloon(n.body,n.caption,n.w,n.h,h,u,n.hideClose,n.id,n.dontHideOnClick,n.balloonClass);if(o<10&&(o=10),a<10&&(a=10),e.global.divGMBalloon.style.left=o+"px",e.global.divGMBalloon.style.top=a+"px",e.localInfo.isIE){var w=document.getElementById(e.global.divGMBalloon.id+"_frame");w&&e.global.addIframeShim(w)}return C}function d(t){if(t){var i=e.global._GetElementPos(t);window.scrollTo(i.left,i.top)}}t.showLoader=i,t.fadeIn=n,t.getBalloonHTML=o,t.createGMBalloon=a,t.removeGMBalloon=l,t.putGMBalloonNextTo=r,t.positionGMBalloonNextTo=s,t.scrollToElement=d}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(t,i){var n=i||{},o=n.zindex||50,a=n.opacity||70,l=a/100,r=n.bgcolor||"#000000",s=document.getElementById("darkenScreenObject"),d=document.body;if(!s){var g=e.localInfo.isMobile||e.localInfo.isIE6||"BackCompat"==document.compatMode,c=document.documentElement.scrollTop;0==c&&(c=document.body.scrollTop);var p=document.createElement("div");g?(p.style.position="absolute",p.style.top=""+c+"px"):(p.style.position="fixed",p.style.top="0px"),p.style.overflow="hidden",p.style.left="0px",p.style.display="none",p.id="darkenScreenObject",p.innerHTML="&#160;",d.appendChild(p),s=document.getElementById("darkenScreenObject"),e.attachedFixGray||(e.attachedFixGray=!0,window.addEventListener&&window.addEventListener("resize",e.services.socialize._fixGraySize,!1),window.attachEvent&&window.attachEvent("onresize",e.services.socialize._fixGraySize),g&&(window.addEventListener&&window.addEventListener("scroll",e.services.socialize._fixGrayPosition,!1),window.attachEvent&&window.attachEvent("onscroll",e.services.socialize._fixGrayPosition)))}if(t){var u,h;if(window.innerHeight&&(u=window.innerHeight,h=window.innerWidth),"undefined"==typeof u){var f=document.documentElement;u=f.clientHeight,h=f.clientWidth}0==h&&(h=d.clientWidth),0==u&&(u=d.clientHeight),s.style.opacity=l.toString(),s.style.MozOpacity=l,s.style.width=""+h+"px",s.style.height=""+u+"px",s.style.filter="alpha(opacity="+a+")",s.style.zIndex=o,s.style.backgroundColor=r,s.style.display="block"}else d.removeChild(s)}function n(){var t=e.utils.object.merge([e.thisScript.globalConf,arguments]);e.services.socialize.GrayOut(!1);for(var i in e._.plugins.instances){var n=e._.plugins.instances[i];n.isModal&&n.dispose()}for(var o in e.utils.DOM._popupContainers){var a=e.utils.DOM._popupContainers[o];null!=a&&(a.innerHTML="",a.parentNode&&(a.style.display="none"));var l=document.getElementById("gigya_ifr_"+o);null!=l&&(l.style.display="none")}if(e.events.global.dispatch({eventName:"HideUIRequested"}),"function"==typeof t.callback){var r={status:"OK",statusMessage:"",operation:"hideUI",context:t.context,errorMessage:"",errorCode:0};t.callback(r)}}t.GrayOut=i,t.hideUI=n}(i=t.socialize||(t.socialize={}))}(t=e.services||(e.services={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){var i="gigya-"+e.localInfo.currentBrowser;e.localInfo.isIOS&&(i+=" ios"),i=i.replace(/ /g," gigya-"),e.localInfo.isNativeMobileApp&&(i="gigya-native-mobile-app "+i),e.utils.DOM.addClassToElement(t,i)}function n(t,i){var n=function(e){var t;e&&e.which?(e=e,t=e.which):(e=event,t=e.keyCode),13==t&&i.click()};e.utils.DOM.addEventListener(t,"keyup",n),e.utils.DOM.addEventListener(i,"keyup",n)}function o(e,t,i,n,o){var a={top:0,left:0,bottom:0,right:0};return"bottom"===i?(a.top=e.bottom+n,a.left=o?e.right-t.w:e.left):"top"===i?(a.top=e.top-t.h-n,a.left=o?e.right-t.w:e.left):"left"===i?(a.top=o?e.bottom-t.h:e.top,a.left=e.left-t.w-n):(a.top=o?e.bottom-t.h:e.top,a.left=e.right+n),a.bottom=a.top+t.h,a.right=a.left+t.w,a}function a(t,i,n,o,a,l){var r=e.utils.DOM.getElementPosition(t),s={w:i.offsetWidth,h:i.offsetHeight},d=this.getRelativePosition(r,s,n,o,a);if(l&&!e.utils.viewport.isRectFullyVisible(d)){var g={bottom:"top",left:"right",right:"left",top:"bottom"},c=this.getRelativePosition(r,s,g[n],o);e.utils.viewport.isRectHorizontallyVisible(c)&&(d=c)}if(!e.utils.viewport.isRectHorizontallyVisible(d)){var c=this.getRelativePosition(r,s,n,o,!a);e.utils.viewport.isRectHorizontallyVisible(c)&&(d=c)}i.style.left=""+d.left+"px",i.style.top=""+d.top+"px"}function l(t,i,n,o,a,l,r,s,d,g){if(void 0===n&&(n="bottom"),void 0===o&&(o=0),void 0===a&&(a=!1),void 0===l&&(l=!0),void 0===r&&(r=null),void 0===s&&(s=null),void 0===d&&(d=null),void 0===g&&(g="click"),t&&i){var c=document.createElement("div");return c.appendChild(i),c.style.position="absolute",c.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),c.style.left="-1000px",document.body.appendChild(c),this.placePopoverNearElement(t,c,n,o,a,l),e.pluginUtils.DOM.removeElementOnDocClick(c,s,d,g),r&&"function"==typeof e.pluginUtils.animation[r]&&e.pluginUtils.animation[r](i),c}}function r(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n="mousedown"),e){var o=function(i){var n=e&&e.parentNode;n&&e.parentNode.removeChild(e),t&&t(i,n)},a=[e];i&&(a=a.concat(i)),this.performOnDocClick(o,a,n)}}function s(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),e){var n=function(){e.style.display="none",t&&t()},o=[e];i&&o.concat(i),this.performOnDocClick(n,o)}}function d(t,i,n){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n="mousedown");var o=function(a){for(var l=a.target||a.srcElement,r=!1;l&&l.parentNode;){if(i&&i.indexOf(l)!=-1){r=!0;break}l=l.parentNode}r||(e.utils.DOM.removeClassFromElement(document.body,"gig-clickable"),e.utils.DOM.removeEventListener(document,n,o),t&&t(a))};(e.localInfo.isIOS&&e.localInfo.isSafari||e.localInfo.isIOSWebView)&&(p||(e._.plugins.utils.css.addCss("*.gig-clickable {cursor: pointer;}",null),p=!0),e.utils.DOM.addClassToElement(document.body,"gig-clickable")),e.utils.DOM.addEventListener(document,n,o)}function g(e){e.style.display="none"}function c(e){e.style.display="block"}t.addBrowserInfoClassesToElement=i,t.setTextboxSubmitButton=n,t.getRelativePosition=o,t.placePopoverNearElement=a,t.addPopoverNearElement=l,t.removeElementOnDocClick=r,t.hideElementOnDocClick=s;var p=!1;t.performOnDocClick=d,t.hideElement=g,t.showElement=c}(i=t.DOM||(t.DOM={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t,i){if(!t.shim){var n=document.createElement("IFRAME");n.frameborder="0",n.frameBorder="0",n.allowtransparency=!0,n.style.position="absolute",n.update=function(o){if(n&&t){if(i)n.style.left=t.offsetLeft+"px",n.style.top=t.offsetTop+"px";else{var a=e.global._GetElementPos(t);n.style.left=a.left+"px",n.style.top=a.top+"px"}o&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px")}},n.update(!0),i?(n.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),t.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),i.appendChild(n)):e.utils.DOM.appendToBody(n),t.shim=n}}function n(e){e&&e.shim&&e.shim.parentNode&&(e.shim.parentNode.removeChild(e.shim),e.shim=null)}function o(e,t,i,n){var o=e;if(!e.width||!e.height){var o=new Image;o.src=e.src}var a=function(){0==o.width?window.setTimeout(a,100):(o.width>o.height?e.style.width=t+"px":e.style.height=t+"px",e.style.display="",n&&n(e),i||(e.style.marginTop=(t-e.offsetHeight)/2+"px",e.style.marginLeft=(t-e.offsetWidth)/2+"px"))};o.width>0?a():(e.style.display="none",o.onload=function(){window.setTimeout(a,50)})}function a(t,i){for(var n in t){var o=t[n];if("string"==typeof o&&(t[n]=e.utils.templates.fill(t[n],i)),"mediaItems"==n)for(var a=0;a<o.length;a++)o[a].src&&(o[a].src=e.utils.templates.fill(o[a].src,i))}return t}function l(t,i,n){if(t){var o=function(){""==this.value&&(n?e.utils.DOM.addClassToElement(t,n):t.style.color="#585858",this.value=i,this.placeholderCleared=!1)},a=function(){if(!this.placeholderCleared)if(n?e.utils.DOM.removeClassFromElement(t,n):t.style.color="",this.value="",this.placeholderCleared=!0,t.setSelectionRange)t.focus(),t.setSelectionRange(0,0);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",0),i.moveStart("character",0),i.select()}};t.refreshPlaceholder=function(){t.value?(n?e.utils.DOM.removeClassFromElement(t,n):t.style.color="",this.placeholderCleared=!0):(n?e.utils.DOM.addClassToElement(t,n):t.style.color="#585858",t.value=i,this.placeholderCleared=!1)},e.utils.DOM.addEventListener(t,"blur",o),e.utils.DOM.addEventListener(t,"focus",a),e.utils.DOM.addEventListener(t,"change",o),t.refreshPlaceholder()}}t.addIframeShim=i,t.removeIframeShim=n,t.scaleImage=o,t.fillUserActionTemplate=a,t.setPlaceholder=l}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){function i(e,t){var i=/(?:(?:https?):\/\/|www\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.;]*\)|[-A-Z0-9+&@#\/%=~_|$?!:,.;])*(?:\([-A-Z0-9+&@#\/%=~_;|$?!:,.;]*\)|[A-Z0-9+&@#\/%=~_|;$])/gim,n=e.match(i),o="";if(n)for(var a=0;a<n.length;a++){var l="";n[a].indexOf("http:")===-1&&n[a].indexOf("https:")===-1&&(l="http://");var r="";t&&(r=' class="'+t+'"');var s=e.substr(0,e.indexOf(n[a])+n[a].length);e=e.substr(s.length,e.length-s.length);var d=n[a].replace(/&#173;/g,"");o+=s.replace(n[a],"<a"+r+' href="'+l+d+'" target="_blank" rel="nofollow">'+n[a]+"</a>")}return e.length>0&&(o+=e),o}function n(e,t,i){switch(t){case"class":e.className=i;break;default:e.setAttribute(t,i)}}function o(t,i){var n="";return n=e.localInfo.isIE8?t.getAttribute(i):t.getAttributeNS("",i)}t.replaceLinksWithHTMLElements=i,t.setAttribute=n,t.getAttribute=o}(i=t.DOM||(t.DOM={}))}(i=t.utils||(t.utils={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(t){t.addedSafeCopy||(e.utils.DOM.addEventListener(t,"copy",function(t){t=t||window.event;var i=t.target||t.srcElement,n=i&&i.nodeName?i.nodeName.toLowerCase():"";if("textarea"!=n&&"input"!=n){var o=document.createElement("div");o.style.color=window.getComputedStyle?window.getComputedStyle(document.body).backgroundColor:"#FFFFFF",o.style.fontSize="0px",e.utils.DOM.appendToBody(o);var a,l,r=new RegExp("(&shy;|"+String.fromCharCode(173)+")","g");if(window.getSelection){t.stopPropagation(),a=window.getSelection();var s=a.getRangeAt(0);o.appendChild(s.cloneContents()),o.innerHTML=o.innerHTML.replace(r,""),a.selectAllChildren(o);var d=function(){o.parentNode.removeChild(o),a.removeAllRanges(),a.addRange(s)}}else t.cancelBubble=!0,a=window.document.selection,s=a.createRange(),o.innerHTML=s.htmlText,o.innerHTML=o.innerHTML.replace(r,""),l=document.body.createTextRange(),l.moveToElementText(o),l.select(),d=function(){o.parentNode.removeChild(o),""!==s.text&&s.select()};window.setTimeout(d,0)}}),t.addedSafeCopy=!0)}t.enableSafeCopy=i}(i=t.DOM||(t.DOM={}))}(t=e.utils||(e.utils={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){return(e.localInfo.isIE7||e.localInfo.isIE&&e.localInfo.quirksMode)&&(t=t.replace(/display:inline-block/g,"display:inline-block;zoom:1;*display:inline")),t.replace(/gradient\((.*?),(.*?)\)/g,'filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="$1", endColorstr="$2");background: linear-gradient(top,  $1,  $2);background: -ms-linear-gradient(top left, $1, $2);background: -webkit-gradient(linear, left top, left bottom, from($1), to($2));background: -moz-linear-gradient(top,  $1,  $2)')}t.fixCss=i}(i=t.css||(t.css={}));var n;!function(t){function i(t,i,n){void 0===n&&(n=0),(isNaN(n)||n<0)&&(n=0);var o=document.getElementById("gigya_ruler"),a=document.getElementById("gigya_ruler_text");null==o&&(o=document.createElement("div"),a=document.createElement("span"),o.id="gigya_ruler",a.id="gigya_ruler_text",o.style.visibility="hidden",o.style.position="absolute",o.style.margin="0px",o.style.padding="0px",o.appendChild(a),e.utils.DOM.appendToBody(o)),i&&(o.style.lineHeight=i.size+"px",o.style.fontFamily=i.font,o.style.fontSize=i.size+"px",o.style.fontWeight="true"==(""+i.bold).toLowerCase()?"bold":""),n?(o.style.whiteSpace="",o.style.width=""+n+"px"):(o.style.whiteSpace="nowrap",o.style.width="auto"),o.style.overflow="hidden",o.style.display="",a.innerHTML=t;var l=a.offsetWidth,r=a.offsetHeight;return 0!=l&&0!=r||(l=o.offsetWidth,r=o.offsetHeight),o.style.display="none",{w:l,h:r}}t.measureText=i}(n=t.layout||(t.layout={}));var o;!function(e){function t(e){return void 0===e&&(e=void 0),e&&e.replace?e.replace(/\r/,"").replace(/\n/g,"\r\n"):e}function i(e){var t=e.lastIndexOf(" ");return t===-1?e:e.substr(0,t)+"&nbsp;"+e.substr(t+1)}e.normalizeLinebreaks=t,e.fixTextWidows=i}(o=t.text||(t.text={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t){var i=document.createElement("div");i.className=t,e.utils.DOM.appendToBody(i);var n=e.global.getBordersAndPaddings(i);return i.parentNode.removeChild(i),n}function n(t){var i=function(i){var n=parseInt(e.global.getStyle(t,i));return isNaN(n)&&(n=0),n};return{w:i("border-left-width")+i("border-right-width")+i("padding-right")+i("padding-left"),h:i("border-top-width")+i("border-bottom-width")+i("padding-top")+i("padding-bottom")}}function o(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?document.defaultView.getComputedStyle(e,null).getPropertyValue(t):void 0}function a(t,i,n){i||(t.parentNode.style.textAlign="left",t.parentNode.style.verticalAlign="top");var o=function(i){for(var n=t.parentNode,o=e.global.getStyle(n,i);"auto"==o;)n=n.parentNode,o=e.global.getStyle(n,i);var a=parseInt(o);return isNaN(a)&&(a=0),a},a=Math.min(o("width"),o("height"));if(e.localInfo.quirksMode){var l=e.global.getBordersAndPaddings(t.parentNode),r=o("width")-l.w,s=o("height")-l.h;a=Math.min(r,s)}e.global.scaleImage(t,a,i,n)}function l(t,i,n){var o=document.createElement("div");o.className=t,e.utils.DOM.appendToBody(o);var a=e.global.getBordersAndPaddings(o);return i-=a.w,n-=a.h,o.parentNode.removeChild(o),{w:i,h:n}}function r(e,t,i,n,o,a,l){this.src=e,this.srcTemplate=t,this.spriteData=i,this.spriteW=n,this.spriteH=o,this.pixelRatio=a,this.spriteLength=l}function s(t){var i=[],n=0,o={};for(var a in t){var l=t[a];l.pixelRatio||(l.pixelRatio=1),i.push(l.path+"|"+l.w*l.pixelRatio+","+l.h*l.pixelRatio)}var r=e._.getCdnResource("/gs/GetSprite.ashx?path="+encodeURIComponent(i.join("^").replace(/\[\]/,"")));for(var a in t){var l=t[a],s={};s.spriteData={};var d=/\[(.*?)\]/g,g=[],c=0;s.srcTemplate=e._.getCdnResource("/gs/i"+l.path.replace(d,function(e,t){return g.push(t.split(",")),"{"+c++ +"}"}));var p=e.global.getCombination(g);0==p.length&&p.push([""]);for(var u=0;u<p.length;u++){var h=p[u].join("-");""==h&&(h="default"),s.spriteData[h]={groupId:a,id:h,x:n,w:l.w,h:l.h},n+=l.w}o[a]=new e.global.SpriteRenderer(r,s.srcTemplate,s.spriteData,l.w,l.h,l.pixelRatio,p.length)}return o}t.getClassBordersAndPaddings=i,t.getBordersAndPaddings=n,t.getStyle=o,t.scaleImageToContainer=a,t.getClassInnerSize=l,t.SpriteRenderer=r,r.prototype={getSpriteData:function(e,t){var i=this.spriteData[e];if(i&&!t)return this.spriteData[e];var n=0,o=e.split("-"),a=/\{(.*?)\}/g,l=this.srcTemplate.replace(a,function(e,t){var i=o[n++];return i?i:""});return{isSingleImage:!0,src:l}},getStyleString:function(e,t){var i=this.getSpriteData(e),n=[];return i&&(n.push("background-image:url('"+this.src+"');"),n.push("background-position:-"+i.x+"px 0px;"),this.pixelRatio>1&&n.push("background-size:"+this.spriteLength*this.spriteW+"px "+this.spriteH+"px;"),t&&n.push("margin: 0 auto;"),n.push("width: "+this.spriteW+"px;"),n.push("height: "+this.spriteH+"px;line-height: "+this.spriteH+"px;"),n.push("background-repeat:no-repeat;"),n.push("position:static;")),n.join("")},getHTML:function(e,t,i,n,o){void 0===n&&(n=""),void 0===o&&(o="");var a=this.getSpriteData(e,i),l=[];return l.push('<button aria-label="'+o+'" type="button" class="tabbing-button" style="height:'+this.spriteH+'px;">'),a&&(a.isSingleImage?l.push('<img src="'+a.src+'" style="width:'+this.spriteW+"px;height:"+this.spriteH+'px;position:static;margin:0" alt="'+o+'" />'):(l.push('<div style="'),l.push(this.getStyleString(e,t)),l.push('"'),n&&l.push(' id="'+n+'"'),l.push("></div>"))),l.push("</button>"),l.join("")}},t.getSpriteRenderers=s}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){function i(t){return(e.localInfo.isIE7||e.localInfo.isIE&&e.localInfo.quirksMode)&&(t=t.replace(/display:inline-block/g,"display:inline-block;zoom:1;*display:inline")),t.replace(/gradient\((.*?),(.*?)\)/g,'filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="$1", endColorstr="$2");background: linear-gradient(top,  $1,  $2);background: -ms-linear-gradient(top left, $1, $2);background: -webkit-gradient(linear, left top, left bottom, from($1), to($2));background: -moz-linear-gradient(top,  $1,  $2)')}function n(t,i,n,a){if(void 0===n&&(n=!0),t&&""!=t&&(t instanceof Array&&(t=t.join(" ")),i&&(t=t.replace(/([^\s}]*\.gig)/g,i+" $1")),a||(a=e.utils.object.getMurmurHash(t).toString()),!o[a]||n)){o[a]=!0;var l=document.createElement("style");l.type="text/css";var r=document.createTextNode(t);l.styleSheet?null!=r.value?l.styleSheet.cssText=r.value:l.styleSheet.cssText=r.nodeValue:l.appendChild(r);var s=document.getElementsByTagName("head"),d=document.body;(s.length>0?s[0]:d).appendChild(l)}}t.fixCss=i;var o={};t.addCss=n}(i=t.css||(t.css={})),e.utils.functions.createAlias("gigya.global.addCSS",i.addCss),e.utils.functions.createAlias("gigya.pluginUtils.css.fixCss",i.fixCss)}(i=t.utils||(t.utils={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){function t(e,t){var i="";return i+="line-height: normal;",t&&(i+="cursor:pointer;"),e.underline&&(i+="text-decoration:underline;"),e.font&&(i+="font-family:"+e.font+";"),e.size&&(i+="font-size:"+e.size+"px;"),e.color&&(i+="color:"+e.color+";"),e.bold&&(i+="font-weight:bold;"),e["frame-thickness"]&&(i+="border-style:solid; border-width:"+e["frame-thickness"]+"px;"),e["frame-color"]&&(i+="border-color:"+e["frame-color"]+";"),e["background-color"]&&(i+="background-color:"+e["background-color"]+";"),i}e.getStyleString=t}(t=e.socialize||(e.socialize={}))}(t=e.services||(e.services={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){function i(e,t){for(var i=[],n=0,o=function(){n++,n==e.length&&t()},a=0;a<e.length;a++)if(null==e[a])o();else{var l=new Image;l.onload=o,l.onerror=o,l.src=e[a],i.push(l)}}function n(e,t){for(var i="",n=[],o=/\<(\/)?([^ \/>]+)[ ]?[^>]*(\/)?\>/i,a=0,l=0;l<e.length&&(a<t||0==t);){var r=e.substr(l,1);if("<"==r){var s=e.indexOf(">",l),d=e.substring(l,s+1);o.lastIndex=0;var g=o.exec(d),c=g[2].toLowerCase();if("/"==g[1])n.length>0&&n[n.length-1].tagname==c&&n.pop();else if("/"==g[3]);else{var p="</"+g[2]+">";n.length>0&&(p+=n[n.length-1].cl),n.push({tagname:g[2],cl:p})}i+=g[0],l+=g[0].length-1}else if("&"==r){var u=e.indexOf(";",l);u-l>8?i+="&":(i+=e.substring(l,u+1),l=u),a++}else i+=r,a++;l++}return a<t?e:i+"&#133;"+(n.length>0?n[n.length-1].cl:"")}function o(t,i){if(i&&!t&&(t=i),!t)return t;var n=document.createElement("a");return n.href=t,"http:"===n.protocol&&"https"===e.localInfo.protocol?e.utils.array.indexOf(e._.CDN_HOSTS.http,n.host)!==-1?e._.getCdnResource(n.pathname+n.search+n.hash):e._.getCdnResource("/proxy/photos.ashx?u="+e.utils.URL.URLEncode(t)):t}function a(e,t){e=e.replace(/\n/g,"\n ");for(var i=e.split(" "),n="&#173;",o=0;o<i.length;o++)if(i[o].length>t){for(var a,l=n,r=i[o].split(""),s=!1,d=-1,g=0;g<r.length;g+=1)s||d++,d==t&&(r.splice(g,0,l),d=-1),"&"==r[g]?(s=!0,a=";"):"<"==r[g]&&(s=!0,a=">"),s&&r[g]==a&&(s=!1);i[o]=r.join("")}return i.join(" ").replace(/\n /g,"\n")}function l(e){var t=navigator.userAgent.toLowerCase(),i=t.indexOf("opera")!=-1;t.indexOf("msie")!=-1&&!i;if(null===e.parentNode||"none"==e.style.display)return!1;var n,o=null,a=[];if(e.getBoundingClientRect){n=e.getBoundingClientRect();var l=Math.max(document.documentElement.scrollTop,document.body.scrollTop),r=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);return{x:n.left+r,y:n.top+l}}if(document.getBoxObjectFor){n=document.getBoxObjectFor(e);var s=e.style.borderLeftWidth?parseInt(e.style.borderLeftWidth):0,d=e.style.borderTopWidth?parseInt(e.style.borderTopWidth):0;a=[n.x-s,n.y-d]}else{if(a=[e.offsetLeft,e.offsetTop],o=e.offsetParent,o!=e)for(;o;)a[0]+=o.offsetLeft,a[1]+=o.offsetTop,o=o.offsetParent;(t.indexOf("opera")!=-1||t.indexOf("safari")!=-1&&"absolute"==e.style.position)&&(a[0]-=document.body.offsetLeft,a[1]-=document.body.offsetTop)}for(o=e.parentNode?e.parentNode:null;o&&"BODY"!=o.tagName&&"HTML"!=o.tagName;)a[0]-=o.scrollLeft,a[1]-=o.scrollTop,o=o.parentNode?o.parentNode:null;return{x:a[0],y:a[1]}}function r(t){var i=e.global.getPos(t);return{left:i.x,top:i.y}}t.preloadImages=i,t.applyEllipsis=n,t.getPhotoURL=o,t.wbr=a,t.getPos=l,t._GetElementPos=r}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,o){return e=n(e,t),e=i(e,t,o)}function i(e,t,i){var n="#";if(e.indexOf("#")!=-1){if(e.indexOf(t)!=-1){var o=t+"="+this.getHashParamValue(e,t);return e.replace(o,t+"="+i),e}n="&"}return e+n+t+"="+i}function n(e,t){if(e.indexOf("#")==-1)return e;var i=e.split("#")[1],n=o(e,t);n&&(i=i.replace(t+"="+n,"")),i=i.replace("&"+t,""),i=i.replace("#"+t,"#"),i.length>0&&(i=i.substring(1,i.length));var a=e.split("#")[0];return 0==i.length?a:a+"#"+i}function o(e,t){if(t+="=",e.indexOf("#")==-1||e.indexOf(t,e.indexOf("#"))==-1)return null;var i=e.indexOf(t,e.indexOf("#")),n=e.indexOf("&",i);return n==-1&&(n=e.length),e.substring(i+t.length,n)}e.addOrReplaceHashFragment=t,e.addHashFragment=i,e.removeHashFragment=n,e.getHashParamValue=o}(t=e.URL||(e.URL={}))}(t=e.utils||(e.utils={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(){var t=document.getElementById("darkenScreenObject");if(t){var i=document.documentElement,n=document.body,o=i.scrollTop;0==o&&(o=n.scrollTop);var a=i.scrollLeft;0==a&&(a=n.scrollLeft);var l=i.clientHeight;0==l&&(l=n.clientHeight);var r=i.clientWidth;0==r&&(r=n.clientWidth),e.localInfo.isIE6&&(r-=1),t.style.top=o.toString(),t.style.left=a.toString()}}function n(){var t=document.getElementById("darkenScreenObject");if(t){var i=document.documentElement,n=document.body,o=i.clientHeight;0==o&&(o=n.clientHeight);var a=i.clientWidth;0==a&&(a=n.clientWidth),e.localInfo.isIE6&&(a-=1),t.style.width=""+a+"px",t.style.height=""+o+"px"}}function o(t,i,n,o){var a=e.services.socialize._parseRID(t),l=a.req,r=l.p,s=l.c;e.utils.validation.isExplicitFalse(r.showCaption)&&(o=!0);var d=e.services.socialize,g=document.getElementById(r.containerID);l.container=g;var c=i.Resolve("+/config/body/background"),p=i.Resolve("+/config/body/captions"),u='<table style="'+d.getStyleString(c)+';empty-cells:show;" cellpadding="0" cellspacing="0" >';o?u+="<tr><td>":(u+='<tr style="'+d.getStyleString(p)+'"><td><table style="width:100%" width="100%" cellpadding="0" cellspacing="0"><tr id="'+r.containerID+'_caption"><td style="vertical-align:middle"><div style="'+d.getStyleString(p)+';padding:7px">'+n+'</div></td><td style="vertical-align:middle">',
u+='<div align="right" style="padding-right: 7px; cursor: pointer;'+d.getStyleString(p)+'"><img onclick="gigya.services.socialize._closeComponent(\''+t+'\', true);"  src="'+e._.getCdnResource("/gs/i/HTMLLogin/closeIcon.gif")+'" alt="" /></div></td></tr></table></td></tr><tr><td colspan="2">'),u+='<div id="'+r.containerID+'_container"></div></td></tr></table>',g.innerHTML=u;var h={},f={};for(var m in r)h[m]=r[m];for(m in s)f[m]=s[m];var y=document.getElementById(h.containerID+"_caption");return h.height=h.height-2*c["frame-thickness"],o||(h.height-=y.offsetHeight),h.width=h.width-2*c["frame-thickness"],e.utils.DOM._popupContainers[h.containerID]=g,h.containerID=h.containerID+"_container",{c:f,p:h}}function a(t,i,n,o,a,l){var r=e.services.socialize._parseRID(t),s=r.req,d=s.p,g=s.c,c=e.services.socialize,p=document.getElementById(d.containerID);s.container=p;var u=i.Resolve("+/config/body/captions");n||(n=10),o||(o=e._.getCdnResource("/gs/i/Dialog/DialogBg_"));var h,f="width:"+n+"px;height:"+n+"px";l&&(h="1px solid #555555");var m='<table style="font-size:1px;padding:0px;margin:0px;vertical-align:middle;font-size:1px;line-height:1px;empty-cells:show;" cellpadding="0" cellspacing="0" >';m+='<tr><td height="'+n+'" style="font-size:1px"><div style="height:'+n+'px"><img src="'+o+'TopLeft.png" style="'+f+'" alt="" /></div></td><td height="'+n+'" style="background-image:url(\''+o+'filler.png\');bakground-repeat:repeat"></td><td height="'+n+'" style="font-size:1px;"><div style="height:'+n+'px"><img style="'+f+'" src="'+o+'TopRight.png" alt="" /></div></td></tr>',a&&(m+="<tr><td style=\"background-image:url('"+o+'filler.png\');background-repeat:repeat"></td><td><table width="100%" cellspacing="0" cellpadding="0" style="border-top:'+h+";border-left:"+h+";border-right:"+h+';width:100%;background-color:#FFFFFF"><tr><td style="padding-top:10px;padding-left:10px;'+c.getStyleString(u)+'">'+a+'</td><td align="right" valign="top" style="'+c.getStyleString(u)+'"><div style="padding-right:5px;padding-top:5px;text-align:right;"><img style="cursor:pointer" onclick="gigya.services.socialize._closeComponent(\''+t+'\', true);" src="'+o+'close.png" alt="" /></div></td></tr></table></td><td style="background-image:url(\''+o+"filler.png');background-repeat:repeat\"></td></tr>"),m+="<tr><td style=\"background-image:url('"+o+'filler.png\');background-repeat:repeat"></td><td><div style="border-bottom:'+h+";border-left:"+h+";border-right:"+h+';background-color:#FFFFFF" id="'+d.containerID+'_container"></div></td><td style="background-image:url(\''+o+"filler.png');background-repeat:repeat\"></td></tr>",m+='<tr><td height="'+n+'" style="font-size:1px;"><div style="height:'+n+'px"><img style="'+f+'" src="'+o+'BottomLeft.png" alt="" /></div></td><td height="'+n+'" style="background-image:url(\''+o+'filler.png\');bakground-repeat:repeat"></td><td height="'+n+'" style="font-size:1px;"><div style="height:'+n+'px"><img style="'+f+'" src="'+o+'BottomRight.png" alt="" /></div></td></tr></table>',p.innerHTML=m;var y={},v={};for(var b in d)y[b]=d[b];for(b in g)v[b]=g[b];return e.utils.DOM._popupContainers[y.containerID]=p,y.containerID=y.containerID+"_container",y.height=y.height-2*n,a&&(""==a.replace(/ /g,"")?y.height-=10:y.height-=e.pluginUtils.layout.measureText(a,u).h+10),y.width=y.width-2*n,{c:v,p:y}}function l(t){var i,n=t.split("@"),o=document.getElementById(n[2]+"_"+n[1]),a=n[2];null==(i=e.utils.DOM._pseudoContainers[a])&&(i=document.getElementById(n[2]));var l=null;null!=i&&(l=i.Reqs);var r=null;return null!=l&&(r=l[parseInt(n[0])]),{rid:t,container:i,Reqs:l,req:r,swf:o}}t._fixGrayPosition=i,t._fixGraySize=n,t._createJSPopup=o,t._createJSPopup2=a,t._parseRID=l}(i=t.socialize||(t.socialize={}))}(t=e.services||(e.services={}))}(gigya||(gigya={})),gigya.socialize._closeComponent=function(e,t){var i=gigya.socialize._parseRID(e),n=i.req;gigya.socialize.GrayOut&&gigya.socialize.GrayOut(!1);var o=document.getElementById("gigya_ifr_"+n.container.id);null!=o&&(o.style.display="none"),t&&gigya.events.dispatchForWidget({eventName:"close"},n.p),n.container.style.display="none"},gigya.utils.object.add(gigya.pluginUtils.lang,{getDateString:function(e,t){if(e&&e.dateFormat){var i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=e.dateFormat,o=t.getDate(),a=t.getMonth()+1,l=i[t.getMonth()],r=t.getFullYear();return n.replace(/%dd/g,("0"+o).slice(-2)).replace(/%d/g,o).replace(/%MMMM/g,l).replace(/%MMM/g,l.substr(0,3)).replace(/%MM/g,("0"+a).slice(-2)).replace(/%M/g,a).replace(/%yyyy/g,r).replace(/%yy/g,r.toString().slice(-2))}}});var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){var i=null;if(window.ActiveXObject&&(e.localInfo.isIE8||e.localInfo.isIE9))try{i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t)}catch(t){e.log.addLog("Failed to create Microsoft.XMLDOM ActiveX parser",t)}else{var n=new DOMParser;i=n.parseFromString(t,"text/xml")}return i}function n(e,t,i,n){if("undefined"==typeof i&&(i=""),"undefined"==typeof t&&(t={}),null!=n)for(var o in e)t[i+o]=n(o,e[o]);else for(var a in e)t[i+a]=e[a];return t}function o(e,t,i,n,o){for(var a=0;a<t.length&&"undefined"!=typeof e;a++)e=e.childNodes[t[a]],null!=e&&n&&this.CopyProperties(e.attributes,i,"",o);"undefined"!=typeof e&&this.CopyProperties(e.attributes,i,"",o)}function a(e,t){"undefined"==typeof t.attributes&&(t.attributes={}),"undefined"==typeof t.childNodes&&(t.childNodes={});var i=t.attributes,n=e.attributes;if(n)for(var o=0;o<n.length;o++)null!=n[o].value?i[n[o].nodeName]=n[o].value:i[n[o].nodeName]=n[o].nodeValue;for(var a,l=0;l<e.childNodes.length;l++){var r=e.childNodes[l];a=t.childNodes[r.nodeName],"undefined"==typeof a&&(a=t.childNodes[r.nodeName]={attributes:{},childNodes:{}}),this.mergeNodes(r,a)}return t}t.CreateXMLFromString=i,t.CopyProperties=n,t.CollectAttributesFromXMLPathToObject=o,t.mergeNodes=a}(i=t.XMLUtils||(t.XMLUtils={}))}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t){this.configurations=[],this.mergedConfig={},this.isMerged=!0,this._processor=t,this.merge=function(){if(!this.isMerged){this.mergedConfig={attributes:{},childNodes:{}};for(var t=0;t<this.configurations.length;t++){var i=this.configurations[t];e.global.XMLUtils.mergeNodes(i,this.mergedConfig)}this.isMerged=!0}},this.Resolve=function(t,i){this.merge&&this.merge();var n={};"object"==typeof arguments[arguments.length-1]&&(n=arguments[arguments.length-1]);for(var o=0;o<arguments.length;o++){var a=arguments[o],l=a.constructor;if(l==String)for(var r=a.split("|"),s=r.length-1;s>=0;s--){var d=this.trimCharsAtSuffix(this.trimCharsAtPrefix(r[s]," \n\r\t")," \n\r\t"),g="+"==d.charAt(0),c=d.split("/").slice(1);g&&(d=d.substring(1)),e.global.XMLUtils.CollectAttributesFromXMLPathToObject(this.mergedConfig,c,n,g,this._processor)}else if(l==Array)for(var p=0;p<a.length;p++)this.Resolve(a[p],n)}return n},this.trimCharsAtPrefix=function(e,t){var i=0;if("undefined"==typeof e||0==e.length)return"";for(var n=e.length;i<=n&&t.indexOf(e.charAt(i))>-1;)i++;return e.substring(i,n)},this.trimCharsAtSuffix=function(e,t){if("undefined"==typeof e||0==e.length)return"";for(var i=e.length-1;i>=0&&t.indexOf(e.charAt(i))>-1;)i--;return e.substring(0,i+1)},this.addConfig=function(t){"string"==typeof t&&(this.configurations.push(e.global.XMLUtils.CreateXMLFromString(t)),this.isMerged=!1)},this.getTextFromKey=function(e){return this.Resolve("/config/lang/"+e).text}}t.resolver=i,function(e){function t(e,t){var i=e.toLowerCase(),n=i.indexOf("-");switch(n!=-1&&(i=i.substring(n+1,i.length)),i){case"bold":case"italic":case"underline":return"true"==t.toString().toLowerCase();case"width":case"height":return t.replace("%","");case"size":return parseInt(t);default:return t}}e.defaultProccessor=t}(i=t.resolver||(t.resolver={}))}(t=e.global||(e.global={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){function i(t){var i=[];for(var n in t)i.push(e._.plugins.resources.html[t[n]]);return e.utils.object.merge(i)}function n(t){var i=[];for(var n in t)i.push(e._.plugins.resources.css[t[n]]);return e.utils.object.merge(i)}t.getTemplates=i,t.getCss=n}(i=t.resources||(t.resources={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));// Injected language object
if (!gigya.i18n) gigya.i18n = { };
if (!gigya.i18n['gigya.services.comments.plugins.comments.js']) gigya.i18n['gigya.services.comments.plugins.comments.js'] = { };
gigya.i18n['gigya.services.comments.plugins.comments.js']['en'] = {"commenting_frequency_limit_reached": "Commenting frequency limit reached", "post_anonymously": "Post anonymously", "anonymous": "Anonymous", "when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_review.": "When posting anonymously, other users will not see your personal info next to your review.", "when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_comment.": "When posting anonymously, other users will not see your personal info next to your comment.", "daily_commenting_limit_reached": "Daily commenting limit reached", "comment_edit_rejected": "Your edited comment wasn't saved because it violates the site policy", "review_edit_rejected": "Your edited review wasn't saved because it violates the site policy", "this_comment_has_been_deleted": "This comment has been deleted", "this_comment_is_awaiting_moderation": "This comment is awaiting moderation", "this_review_has_been_deleted": "This review has been deleted", "this_review_is_awaiting_moderation": "This review is awaiting moderation", "deleted": "Deleted", "rich_text_formatting": "Rich-text formatting", "embed_a_media_item": "Embed a media item", "tag_commenters": "Tag commenters", "tip_use_trusted_urls": "Tip: Use URLs from trusted image, video and audio websites.", "edited": "Edited", "editing": "Editing", "edit": "Edit", "moderator": "Moderator", "review_summary": "Enter a title for your review", "write_a_review": "Write your review", "sign_in_with": "Sign in with:", "you_must_login_in_order_to_attach_a_media_item": "You must login in order to attach a media item", "enter_url": "Enter URL", "for_best_results_try_a_url_from_one_of_our_supported_services": "For best results, try a URL from one of our supported services.", "the_provided_url_is_not_supported": "The provided URL is not supported", "tag_a_commenter": "Tag a commenter", "unlike": "Unlike", "like": "Like", "review": "Review", "summary": "Summary", "write_a_comment": "Write a comment", "show_more": "Show more", "as_guest": "As Guest", "ratings": "Ratings", "most_voted": "Most voted", "oldest": "Oldest", "most_recent": "Most recent", "sort": "Sort", "share_colon": "Share:", "hello_username": "Hello %username", "via_provider": "Via %provider", "username_rated_pagetitle_as_rating_5": "%username rated %pageTitle as %rating/5", "username_commented_on_pagetitle": "%username commented on %pagetitle", "username_posted_a_review_on_pagetitle": "%username posted a review on %pagetitle", "delete": "Delete", "click_to_show": "Click to show", "1_review_was_recently_added": "1 review was recently added", "num_reviews_were_recently_added": "%num reviews were recently added", "1_new_review_was_recently_posted": "1 new review was recently posted", "num_new_reviews_were_recently_posted": "%num new reviews were recently posted", "1_comment_was_recently_added": "1 comment was recently added", "num_comments_were_recently_added": "%num comments were recently added", "1_new_comment_was_recently_posted": "1 new comment was recently posted", "num_new_comments_were_recently_posted": "%num new comments were recently posted", "new": "NEW", "resume_stream": "Resume stream", "pause_stream": "Pause stream", "enter_your_email_to_subscribe_to_new_comments_in_this_stream_colon": "Enter your email to subscribe to new comments in this stream:", "enter_your_email_to_subscribe_to_new_reviews_in_this_stream_colon": "Enter your email to subscribe to new reviews in this stream:", "follow_replies_to_my_comments": "Follow replies to my comments", "follow_replies_to_my_reviews": "Follow replies to my reviews", "your_review": "Your review", "my_rating_colon": "My rating:", "least_voted": "Least voted", "most_relevant": "Most relevant", "old_to_new": "Old to new", "new_to_old": "New to old", "comment_edited_by_a_moderator": "Comment edited by a Moderator", "review_edited_by_a_moderator": "Review edited by a Moderator", "share_to_provider": "Share to %provider", "new_comments_will_be_sent_directly_to_your_email_inbox": "New comments will be sent directly to your email inbox", "new_reviews_will_be_sent_directly_to_your_email_inbox": "New reviews will be sent directly to your email inbox", "you_have_successfully_unsubscribed_for_updates_in_the_current_discussion": "You have successfully unsubscribed for updates in the current discussion", "thank_you_for_subscribing": "Thank you for subscribing", "you_have_successfully_unsubscribed": "You have successfully unsubscribed", "enter_your_email_to_receive_notifications_when_someone_replies_to_your_comments_colon": "Enter your email to receive notifications when someone replies to your comments:", "enter_your_email_to_receive_notifications_when_someone_comments_on_your_reviews_colon": "Enter your email to receive notifications when someone comments on your reviews:", "follow_my_reviews": "Follow my reviews", "unfollow": "Unfollow", "follow": "Follow", "following": "Following", "notify_me_when_someone_comments_on_my_review": "Notify me when someone comments on my review", "thank_you_for_subscribing,_new_reviews_will_be_sent_directly_to_your_email_inbox": "Thank you for subscribing, new reviews will be sent directly to your email inbox", "login_to_review": "Login to review", "rss": "RSS", "delete_review": "Delete review", "delete_comment": "Delete comment", "are_you_sure_you_want_to_permanently_delete_your_review_qm": "Are you sure you want to permanently delete your review?", "are_you_sure_you_want_to_permanently_delete_your_comment_qm": "Are you sure you want to permanently delete your comment?", "notify_me_when_someone_replies_to_my_comments": "Notify me when someone replies to my comments", "more_share_destinations": "More Share Destinations", "notifications_settings": "Notifications Settings", "follow_my_comments": "Follow my comments", "unsubscribe": "Unsubscribe", "subscribe": "Subscribe", "thank_you_for_subscribing,_new_comments_will_be_sent_directly_to_your_email_inbox.": "Thank you for subscribing, new comments will be sent directly to your email inbox.", "post_to_provider": "Post to %provider", "login_to_comment": "Login to comment", "i_rated_pagetitle_as_rating_5": "I rated %pageTitle as %rating/5", "my_review_on_colon_pagetitle": "My review on: %pageTitle", "commented_on_colon_pagetitle": "Commented on: %pageTitle", "rated_pagetitle": "Rated %pageTitle", "please_select_your_rating": "Please select your rating", "show_more_ratings": "Show more ratings", "please_login": "Please login", "please_provide_a_valid_email_address": "Please provide a valid email address", "overall_rating": "Overall Rating", "yes_flag_this_review": "Yes, flag this review", "are_you_sure_you_want_to_mark_this_review_as_inappropriate": "Are you sure you want to mark this review as inappropriate?", "report_review_to_site_owner": "Report review to site owner", "your_edited_comment_is_awaiting_moderation": "Your edited comment is awaiting moderation", "your_edited_review_is_awaiting_moderation": "Your edited review is awaiting moderation", "your_review_is_awaiting_moderation": "Your review is awaiting moderation", "one_day_ago": "1 day ago", "one_hour_ago": "1 hour ago", "one_minute_ago": "1 minute ago", "one_reply": "1 reply", "only_one_review_per_product_is_allowed": "Only one review per product is allowed", "please_fill_required_fields": "Please fill required fields", "one_review": "1 Review", "num_reviews": "%num Reviews", "i_love_it": "I love it", "i_like_it": "I like it", "its_ok": "It's OK", "i_dont_like_it": "I don't like it", "i_hate_it": "I hate it", "show_more_reviews": "Show more reviews", "comment_on_username_review": "Comment on %username's review", "comment": "Comment", "review_colon": "Review:", "summary_colon": "Summary:", "login_to_post_your_review": "Login to post your review", "post_your_review": "Post your review", "report_comment_to_site_owner": "Report comment to site owner", "are_you_sure_you_want_to_mark_this_comment_as_inappropriate": "Are you sure you want to mark this comment as inappropriate?", "yes_flag_this_comment": "Yes, flag this comment", "one_comment": "1 Comment", "show_more_comments": "Show more comments", "an_error_has_occurred_please_try_again_later": "An error has occurred, please try again later (%errorCode)", "num_replies": "%num replies", "share_to": "Share to:", "less_than_a_minute_ago": "Less than a minute ago", "nickname_should_be_at_least_3_characters": "Nickname should be at least 3 characters.", "change": "Change", "num_minutes_ago": "%num minutes ago", "num_days_ago": "%num days ago", "num_hours_ago": "%num hours ago", "your_comment_is_awaiting_moderation": "Your comment is awaiting moderation", "post": "Post", "reply_to_username": "Reply to %username", "email_not_displayed_publicly": "*Email not displayed publicly", "num_comments": "%num Comments", "email_optional": "Email (optional)", "nickname": "Nickname", "post_a_new_comment": "Post a new comment", "or": "Or", "guest": "Guest", "reply": "Reply", "share": "Share", "login": "Login", "logout": "Logout", "yes": "Yes", "no": "No", "ok": "OK", "cancel": "Cancel", "done": "Done", "more": "More", "email": "Email"};
// End injected language object

gigya._.UI.registerPlugin(function() {
gigya = window.gigya;
!function(e){var t="http://"+gigya.gaeDomain||"http://comments.gigya.com";"https"==gigya.localInfo.protocol&&(t="https://"+gigya.gaeDomain||"https://read-write.appspot.com"),"undefined"==typeof e.plugins&&(e.plugins={});var i=e.plugins;if("undefined"==typeof i.comments){var o=gigya._.getCdnResource("/gs/i/comments/"),n=function(e,t,i){this._c=e,this._p=t,this._i=i,this.container=document.getElementById(this._p.containerID),this.containerID=t.containerID,this.loadTemplates(this._p.templates),this.loadState()},s={instances:{},instances_size:0,extend:function(e,t){function i(e,t){for(var o in t)"function"!=typeof o&&(void 0!=t[o]&&"object"==typeof t[o]?e[o]=i(e[o]||{},t[o]):e[o]=t[o]);return e}if(t instanceof Array){for(var o in t)i(e,t[o]);return e}return i(e,t)},getText:function(e,t,i){return gigya.pluginUtils.lang.getLocalizedText("gigya.services.comments.plugins.comments.js",e,s.lang,t,i)},drawComments:function(e,t,i){if(null==e)return"";i||(i=0);for(var o=[],n=0;n<e.length;n++){var s=e[n];o.push(s.getHTML())}return o.join("")},isSharePossible:function(){return 0==document.location.href.indexOf("http")&&(!window.__gigAPIAdapterSettings||"http://www.gigya.com/"!=document.location.href)},countChildren:function(e,t){var i=e[t];if(!i)return 0;var o=i.childrenCount;if(!o){o=0;for(var n=0;n<i.length;n++)i[n].isRemovedComment()||o++,o+=this.countChildren(e,i[n].id)}return e[t].childrenCount=o,o},buildCommentsTree:function(e,t,i,o){for(var n={},s=[],a=[],g={},r=0;r<e.length;r++)if(!g[e[r].ID]){g[e[r].ID]=!0;var l=new m(e[r],i);a.push(l),null!=l.parentID?(n[l.parentID]=n[l.parentID]||[]).push(l):l.parentID=0}for(var r=0;r<a.length;r++){var l=a[r],c=n[l.id];if(c&&c.length>0&&(l.children=c,l.childrenCount=this.countChildren(n,l.id)),0==l.parentID&&(l.index=s.length,s.push(l)),null==l.level){for(var d=l,u=-1;null!=d;){if(d.level){u+=d.level+1;break}d=i.commentsInstances[d.parentID],u++}l.level=u,l.data.level=u}}return s},changeCSS:function(e,t,i){try{for(var o,n=!1,s=0;s<document.styleSheets.length;s++){document.styleSheets[s].rules?o="rules":document.styleSheets[s].cssRules&&(o="cssRules");for(var a=0;a<document.styleSheets[s][o].length;a++)if(document.styleSheets[s][o][a].selectorText==e&&document.styleSheets[s][o][a].style[t]){document.styleSheets[s][o][a].style[t]=i,n=!0;break}n||(document.styleSheets[s].insertRule?document.styleSheets[s].insertRule(e+" { "+t+": "+i+"; }",document.styleSheets[s][o].length):document.styleSheets[s].addRule&&document.styleSheets[s].addRule(e,t+": "+i+";"))}}catch(e){}},defaults:{css:[".gig-comments-container *, div.gig-comments-container, .gig-comments-container span, .gig-comments-container a:hover, .gig-comments-container a:visited, .gig-comments-container a:link, .gig-comments-container a:active{","padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;","font-family:arial;font-size:12px;color:#4D4D4D;position:static;text-align:left;vertical-align:baseline; }","div.gig-comments-comment-body ul {padding-left:20px;}","div.gig-comments-comment-body li {list-style-type:disc}",".gig-comments-container td, .gig-comments-container tr {vertical-align:middle;}",".gig-comments-container b{font-weight:bold;} .gig-comments-container u{text-decoration:underline} .gig-comments-container i{font-style:italic}","a.gig-comments-button,a:hover.gig-comments-button,a:link.gig-comments-button,a:active.gig-comments-button,a:visited.gig-comments-button {","line-height: 15px;position:relative;border-radius: 3px; color:#4d4d4d;cursor:pointer;","font-size: 11px;padding: 0 5px; border: 1px solid #C5C7C7;display:inline-block;zoom:1;vertical-align:middle; text-align:center;","box-shadow:0 0 2px RGBA(0,0,0,0.15);-webkit-box-shadow:0 0 2px RGBA(0,0,0,0.15);-moz-box-shadow:0 0 2px RGBA(0,0,0,0.15);}","a.gig-comments-button,a:link.gig-comments-button,a:active.gig-comments-button,a:visited.gig-comments-button {",'background: #FFFFFF; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF", endColorstr="#EAEBEB");',"background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF), to(#EAEBEB));","background: -moz-linear-gradient(top,  #FFFFFF,  #EAEBEB)}","a.gig-comments-button-disabled,a:hover.gig-comments-button-disabled,a:link.gig-comments-button-disabled,a:active.gig-comments-button-disabled,a:visited.gig-comments-button-disabled {","color:#b4b4b4;cursor:default;",'background: #EBEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#EBEBEB", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#EBEBEB), to(#FFFFFF));","background: -moz-linear-gradient(top,  #EBEBEB,  #FFFFFF)}",".gig-comments-postButton-container {overflow:hidden}",".gig-comments-container a {zoom:1}","div.gig-comments-comment{background-color:#fff;padding-top:10px;padding-right:10px;text-align:left;zoom:1;}","div.gig-comments-comment-child{margin-top:5px;background-color:#F3F3F3;padding:10px;text-align:left;zoom:1;}","div.gig-comments-comment-outstanding {background-color:#EAF9F9; margin-top: 5px; padding-bottom: 10px; padding-left:10px;}","div.gig-comments-comment-facebook{background-color:#EEEFF4}","div.gig-comments-comment-body{color:#4d4d4d;padding-top:5px;padding-bottom:5px;}",".gig-comments-container a.gig-comments-comment-mediaItem {display:block;text-decoration:underline;color:#0796c6; }","div.gig-comments-comment-body-pending{color:#919191;}","div.gig-comments-outstanding-badge {background-image:url('"+o+"outstanding_badge.png');background-repeat:no-repeat;background-position: left top; float:right;width:35px;height:30px;}","div.gig-comments-photoImageSmall{text-align:right;width:32px;height:32px;}","div.gig-comments-photoImageLarge{text-align:right;width:48px;height:48px;}","div.gig-comments-providerLogo{margin-top:-14px;text-align:right;}","div.gig-comments-photo-container {margin-right:8px;float:left;width:48px;}","div.gig-comments-comment-photo-container {margin-right:10px;width:32px;}","span.gig-comments-username{float:left;font-weight:bold;color:#2181CA}","span.gig-comments-comment-username {float:none}","span.gig-comments-comment-time{padding-left: 5px; white-space:nowrap;text-align:left;font-size:11px;color:#919191;padding-top:1px;}","span.gig-comments-comment-newIndicator {padding-left: 10px; color: #FF8900; font-weight: bold; font-size: 11px;}","span.gig-comments-comment-viaFacebook{white-space:nowrap;text-align:right; color:#808281;float:right}","span.gig-comments-comment-viaFacebook-text{color:#919191;font-size:11px;padding-left:5px}","textarea.gig-comments-textarea{overflow:auto;word-wrap:break-word;zoom:1;hasLayout:true;height:78px;padding:0px;resize: none;border:none;background-image:url('"+o+"1x1.png');}","div.gig-comments-textarea-wrapper{border-radius:3px;margin: 0 0 5px; zoom:1;hasLayout:true;background-color:white;border: 1px solid #C0C0C0;height:88px;box-shadow:inset 0 0 4px #DCDCDC; -moz-box-shadow:inset 0 0 4px #DCDCDC; -webkit-box-shadow:inset 0 0 4px #DCDCDC;}","div.gig-comments-headerText{color:#4d4d4d;padding: 3px 0 7px;overflow:hidden;}","span.gig-comments-logoutLink {cursor:pointer;font-size:11px;color:#2181CA}","div.gig-comments-checkboxImage{float:left;background-repeat:no-repeat;background-position:center;margin-right:5px;width: 11px; height: 16px;background-image:url('"+o+"checkbox.gif')}","div.gig-comments-checkboxProviderImage{background-repeat:no-repeat;width: 16px;height:16px;float:left;}","div.gig-comments-checkbox {float:left;cursor:pointer;margin-left:5px;margin-right:5px;overflow:hidden;width:34px;}","div.gig-comments-checkboxImage-checked{background-image:url('"+o+"checkbox_Checked.gif')}","div.gig-comments-loginUI, div.gig-comments-guestUI{z-index:99994;position:absolute;background-color:#FFFFFF;border: 1px solid #C5C7C7}","div.gig-comments-loginUI {height:110px;border-radius: 0 0 3px 3px;}","div.gig-comments-loginUI-pleaseLogin {margin-left:5px;margin:5px;font-size:11px;color: #4D4D4D}","div.gig-comments-guestUI {border-radius: 0 3px 3px 3px}","div.gig-comments-guestDropdown{overflow:hidden;width:150px;font-family:arial;font-size:10px;color:#919191;margin-top:16px;margin-left:13px;margin-right:13px;margin-bottom:8px;z-index:99995}","input.gig-comments-textbox{border-radius:3px;width: 145px; height:24px; line-height:22px;font-size:12px;color:#919191;border:1px solid #C0C0C0;padding-left:2px;}","input.gig-comments-textbox-nickname, input.gig-comments-textbox-email {width:100%;}","input.gig-comments-textbox-nickname {margin-bottom:10px;}","input.gig-comments-textbox-title {width:100%;height: 27px;line-height:25px; color: #4D4D4D;padding-left:5px;margin-bottom:10px;}","div.gig-comments-error-text{color:#e70707;font-weight:bold}","div.gig-comments-shareTo{white-space:nowrap;line-height:16px;zoom:1;}","div.gig-comments-replyBox{margin-top:5px;background-color:#F3F3F3;padding:10px;padding-top:12px;}","div.gig-comments-loginCanvas-container {zoom:1;overflow:hidden;margin-bottom:10px;}","div.gig-comments-close-icon{float:right;cursor:pointer;background-repeat:no-repeat;width: 15px; height: 15px;background-image:url('"+o+"close_icon.png')}","div.gig-comments-awaiting-moderation{font-weight:bold;font-size:11px;color:#4D4D4D;font-style:italic}","div.gig-comments-commentList-header{overflow:hidden;font-size:16px;color:#4d4d4d;font-weight:bold;line-height:20px;zoom:1;}","div.gig-comments-commentList-header-commentsCount{padding-top:30px;float:left;}","div.gig-comments-headerLinks{padding-top:30px;float:right;zoom:1;}","a.gig-comments-headerLinks-rss,a:hover.gig-comments-headerLinks-rss,a:link.gig-comments-headerLinks-rss,a:active.gig-comments-headerLinks-rss,a:visited.gig-comments-headerLinks-rss, ","a.gig-comments-headerLinks-subscribe, a:hover.gig-comments-headerLinks-subscribe,a:link.gig-comments-headerLinks-subscribe,a:active.gig-comments-headerLinks-subscribe,a:visited.gig-comments-headerLinks-subscribe {","font-weight:normal;color:#2181CA;text-decoration:underline;font-size:11px;cursor:pointer;}","span.gig-comments-vertical-seperator {color:#d8d9d9;margin:0 5px;}","div.gig-comments-dottedLine{background-image:url('"+o+"SepLine.gif');height: 1px;background-repeat: repeat-x;margin-top:5px}","div.gig-comments-expand-arrow{vertical-align:bottom;display:inline-block; *display:inline; zoom:1; background-repeat:no-repeat; background-position:center center; width: 10px; height:13px; background-image:url('"+o+"icon_ExpandReply.png')}","div.gig-comments-collapse-arrow{vertical-align:bottom;display:inline-block; *display:inline; zoom:1; background-repeat:no-repeat; background-position:center center; width: 10px; height:13px; background-image:url('"+o+"icon_CollapsReply.png')}","div.gig-comments-replies-length-container{zoom:1;padding-left:10px;display:inline-block;*display:inline;cursor:pointer; white-space:nowrap;}","a.gig-comments-link,a:hover.gig-comments-link,a:link.gig-comments-link,a:active.gig-comments-link,a:visited.gig-comments-link {font-family:arial; font-size:11px; color: #2181CA;text-decoration:underline}","span.gig-comments-replies-length {display:inline;font-family:arial; font-size:11px; color: #2181CA;text-decoration:underline}","div.gig-comments-guestError{color:#e70707;font-size:10px;width:150px;float:left}","div.gig-comments-email-not-displayed-publicly{font-size:10px;padding-top:5px;padding-bottom:5px;}","div.gig-comments-providers{float:left;}","div.gig-comments-providers-container{overflow:hidden;zoom:1;float:left;}","div.gig-comments-providerIcons{margin: 0 5px 0 11px;font-size:1px;background-position:center;height:22px;float:left;background-image:url('"+o+"ButtonLogin_Icons.png');background-repeat:no-repeat;width:57px;}","div.gig-comments-showMoreComments-container{width:100%}","div.gig-comments-showMoreComments{height:35px;cursor:pointer;text-align:center;margin-top:10px;color:#4D4D4D; border:1px solid #E5E5E5;background-color:#f9f9f9}","div.gig-comments-showMoreComments-over{height:35px;text-align:center;color:#f3f3f3;border:1px solid #CFCFCF;background-color:#F3F3F3}","div.gig-comments-showMoreComments-text{padding-top:10px;font-weight:bold;text-align:center;}","div.gig-comments-showMoreComments-progress, div.gig-comments-progress {margin:5px auto auto;width:24px;height:24px;background-repeat:no-repeat;background-image:url('"+o+"progress_ani.gif')}","div.gig-comments-comment-flag{cursor:pointer;visibility:hidden;text-align:right;float:right;width: 14px; height:14px;background-image:url('"+o+"flag_icon.png')}","div.gig-comments-comment-flag-over{visibility:visible}","div.gig-comments-comment-flag-submitted{text-align:right;float:right;width: 14px; height:14px;background-image:url('"+o+"flag_icon.png')}","div.gig-comments-comment-remove{cursor:pointer;visibility:hidden;text-align:right;float:right;width: 7px; height:7px;background-image:url('"+o+"remove_icon.gif');background-repeat:no-repeat;background-position:center;}","div.gig-comments-comment-remove-over{visibility:visible}","div.gig-comments-dialog-caption{background-color: #f3f3f3; padding: 5px 5px 5px 12px;overflow:auto;zoom:1;font-size: 14px;font-weight:bold;color: #4d4d4d;}","div.gig-comments-dialog-body{padding:24px 12px 12px 12px;}","div.gig-comments-dialog-buttons{margin-top:12px;}","a.gig-comments-button-cancel,a:hover.gig-comments-button-cancel,a:link.gig-comments-button-cancel,a:active.gig-comments-button-cancel,a:visited.gig-comments-button-cancel, ","a.gig-comments-button-flagThisComment,a:hover.gig-comments-button-flagThisComment,a:link.gig-comments-button-flagThisComment,a:active.gig-comments-button-flagThisComment,a:visited.gig-comments-button-flagThisComment ","a.gig-comments-button-remove,a:hover.gig-comments-button-remove,a:link.gig-comments-button-remove,a:active.gig-comments-button-remove,a:visited.gig-comments-button-remove ","{line-height:24px;font-size:12;padding:0 10px;}","a.gig-comments-button-subscribe,a:hover.gig-comments-button-subscribe,a:link.gig-comments-button-subscribe,a:active.gig-comments-button-subscribe,a:visited.gig-comments-button-subscribe {","line-height:22px;font-size:12;margin-left:7px;font-weight:bold;","}","div.gig-comments-dialog-subscribe-emailTextbox-container {float:left;}","div.gig-comments-dialog-subscribe-enterYourEmail {margin-bottom:10px;}","input.gig-comments-dialog-subscribe-emailTextbox {width: 260px;color: #4D4D4D}","a.gig-comments-button-cancel,a:hover.gig-comments-button-cancel,a:link.gig-comments-button-cancel,a:active.gig-comments-button-cancel,a:visited.gig-comments-button-cancel ","{margin-right: 10px;}","div.gig-comments-dialog-body-remove {font-weight:bold}","a.gig-comments-button-flagThisComment,a:hover.gig-comments-button-flagThisComment,a:link.gig-comments-button-flagThisComment,a:active.gig-comments-button-flagThisComment,a:visited.gig-comments-button-flagThisComment ","a.gig-comments-button-remove,a:hover.gig-comments-button-remove,a:link.gig-comments-button-remove,a:active.gig-comments-button-remove,a:visited.gig-comments-button-remove ","{font-weight:bold}","div.gig-comments-star {background-repeat:no-repeat;margin-right:3px; width: 13px; height:13px;float:left;background-image:url('"+o+"RateIcon_13.png')}","div.gig-comments-star-half {background-image:url('"+o+"RateIcon_13_half.png')}","div.gig-comments-star-full {background-image:url('"+o+"RateIcon_13_pressed.png')}","div.gig-comments-star-editable, div.gig-comments-star-editable-empty, div.gig-comments-addComment-ratings-error div.gig-comments-star-editable-empty, div.gig-comments-star-myRating {background-repeat:no-repeat;padding-right:4px; width: 21px; height:21px;float:left;background-image:url('"+o+"RateIcon_21.png')}","div.gig-comments-star-editable, div.gig-comments-star-editable-empty, div.gig-comments-addComment-ratings-error div.gig-comments-star-editable-empty {cursor:pointer;}","div.gig-comments-star-editable-half, div.gig-comments-star-myRating-half {background-image:url('"+o+"RateIcon_21_half.png')}","div.gig-comments-star-editable-full, div.gig-comments-star-myRating-full, div.gig-comments-addComment-ratings-error div.gig-comments-star-editable-full {background-image:url('"+o+"RateIcon_21_pressed.png')}","div.gig-comments-addComment-ratings-error .gig-comments-star-editable {background-image:url('"+o+"RateIcon_21_error.png');}","div.gig-comments-addComment-ratings-stars-container {float:left;margin-bottom:15px;}","div.gig-comments-addComment-ratings-ratingName {float:left;margin-right:15px;margin-top:4px;}","div.gig-comments-addComment-ratings-details {float:left;margin-left: 3px; color:#919191;margin-top:4px;}","div.gig-comments-addComment-ratings {overflow:hidden;zoom:1}","div.gig-comments-addComment-label {margin-bottom:3px;}","div.gig-comments-commentBox {margin-top:15px;overflow:hidden;zoom:1;}","div.gig-comments-commentBox-bottom {margin-top:35px;padding-top:5px;border-top:1px solid #CFCFCF}","div.gig-comments-rating {zoom:1;overflow:hidden;float:left;padding-bottom:12px;}","div.gig-comments-title {font-weight:bold; font-size: 14px;float:left;padding-bottom:12px;}","span.gig-comments-mandatoryMark {color:#e70707;font-weight:bold;}","div.gig-validation-error {display:none;color: #ce585a;text-align:center;line-height:22px;background:#fee9ea;margin-top:7px;}","a.gig-comments-button-post,a:hover.gig-comments-button-post,a:link.gig-comments-button-post,a:active.gig-comments-button-post,a:visited.gig-comments-button-post,","a.gig-comments-button-ok,a:hover.gig-comments-button-ok,a:link.gig-comments-button-ok,a:active.gig-comments-button-ok,a:visited.gig-comments-button-ok {","line-height:20px;font-weight:bold;font-size:12px;padding:0 10px;float:right;white-space:nowrap}","a.gig-comments-dropdown,a:hover.gig-comments-dropdown,a:link.gig-comments-dropdown,a:active.gig-comments-dropdown,a:visited.gig-comments-dropdown {","font-weight:bold;line-height: 22px;position:relative;border-radius: 3px; color:#4d4d4d;cursor:pointer;","font-size: 13px;padding-left: 10px; border: 1px solid #C5C7C7;display:inline-block;zoom:1; vertical-align:middle; text-align:center;","box-shadow:0 0 2px RGBA(0,0,0,0.15);-webkit-box-shadow:0 0 2px RGBA(0,0,0,0.15);-moz-box-shadow:0 0 2px RGBA(0,0,0,0.15);}","a.gig-comments-dropdown,a:link.gig-comments-dropdown,a:active.gig-comments-dropdown,a:visited.gig-comments-dropdown {",'background: #FFFFFF; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF", endColorstr="#EAEBEB");',"background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF), to(#EAEBEB));","background: -moz-linear-gradient(top,  #FFFFFF,  #EAEBEB)}","a:hover.gig-comments-dropdown, a.gig-comments-dropdown-down, a:hover.gig-comments-dropdown-down,a:link.gig-comments-dropdown-down,a:active.gig-comments-dropdown-down,a:visited.gig-comments-dropdown-down {",'background: #EAEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#EAEBEB", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#EAEBEB), to(#FFFFFF));","background: -moz-linear-gradient(top,  #EAEBEB,  #FFFFFF)}","div.gig-comments-dropdown-button {","border-radius: 0 3px 3px 0; margin-left:13px;float:lef;width: 21px; height: 22px; display:inline-block;zoom:1;",'background: #EAEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF", endColorstr="#DADADA");',"background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF), to(#DADADA));","background: -moz-linear-gradient(top,  #FFFFFF,  #DADADA)}","a.gig-comments-dropdown-login div.gig-comments-dropdown-button {margin-left:3px}","div.gig-comments-dropdown-login-text {min-width:34px}","a.gig-comments-dropdown-login-native,a:hover.gig-comments-dropdown-login-native,a:link.gig-comments-dropdown-login-native,a:active.gig-comments-dropdown-login-native,a:visited.gig-comments-dropdown-login-native {padding:0 10px;}","a:hover.gig-comments-dropdown div.gig-comments-dropdown-button, a.gig-comments-dropdown-down div.gig-comments-dropdown-button {",'background: #EAEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#DADADA", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#DADADA), to(#FFFFFF));","background: -moz-linear-gradient(top,  #DADADA,  #FFFFFF)}","div.gig-comments-login-container {zoom:1;overflow:hidden;line-height:24px;}","div.gig-comments-loginCanvas {zoom:1;overflow:hidden}","span.gig-comments-logoutLink-container {float:left;}","span.gig-comments-login {font-weight:bold;font-size:13px;}","div.gig-comments-addCommentFooter {zoom:1;overflow:hidden}","td.gig-comments-commentData {width:99%}","div.gig-comments-commentData-header {overflow:hidden;zoom:1;}","div.gig-comments-ratingAndTitle {overflow:hidden;zoom:1;}","div.gig-comments-replyButtonAndCount {float:left;overflow:hidden;zoom:1;}","div.gig-comments-dropdown-button-arrow {background-image:url('"+o+"arrow.gif');height:22px;width: 21px;background-repeat:no-repeat;background-position:center;}","div.gig-comments-dialog {border: 6px solid #858585; border-radius: 5px; background-color:#FFFFFF;xheight:140px;}","div.gig-comments-dialog-closeIcon {background-image:url('"+o+"close_icon.png');width:15px;height:15px; float:right;cursor:pointer;}","div.gig-comments-dialog-smallCloseIcon {background-image:url('"+o+"smallcloseicon.png');width:7px;height:15px; float:right;cursor:pointer;background-position:center;background-repeat:no-repeat;}","div.gig-comments-usernameAndTime {float:left;}","div.gig-comments-dropdown-text {float:left}","div.gig-comments-vote {float:right;text-align:right;font-size:11px;white-space:nowrap;margin-left:7px;vertical-align:middle;}","div.gig-comments-vote-up {background-image:url('"+o+"thumbsup_hover.png');width:15px;height:15px;}","div.gig-comments-vote-down {background-image:url('"+o+"thumbsdown_hover.png');width:15px;height:15px; }","div.gig-comments-vote-value {font-size:11px;vertical-align:middle;margin-left:4px;display:inline-block;*display:inline;*width:21px;text-align:right;}","div.gig-comments-vote-value-neg {width:auto;min-width: auto;margin-left:}","a.gig-comments-button-vote, a:hover.gig-comments-button-vote,a:link.gig-comments-button-vote,a:active.gig-comments-button-vote,a:visited.gig-comments-button-vote {","margin:0;padding:0;margin-left:4px; box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none}","div.gig-comments-dialog-subscribe-error {color: #ce585a;font-size:11px;margin-top:5px;}","div.gig-comments-dialog-body-confirmation {text-align:center;line-height:20px;padding-bottom:22px;}","div.gig-comments-dialog-subscribe-okIcon {background-image:url('"+o+"ok_icon.png');width:14px;height:14px;position:relative;top:2px;margin-right:2px;display:inline-block;}","a.gig-comments-follow, a:hover.gig-comments-follow,a:link.gig-comments-follow,a:active.gig-comments-follow,a:visited.gig-comments-follow ","{cursor:pointer;margin-left:27px;border-left:1px solid #d8d9d9; color:#4D4D4D;padding-left:20px;","background-image:url('"+o+"follow.png');background-repeat:no-repeat;background-position:5px;margin-right:5px;display:inline-block;}","a.gig-comments-following, a:hover.gig-comments-following,a:link.gig-comments-following,a:active.gig-comments-following,a:visited.gig-comments-following "," {background-image:url('"+o+"following.png')}","a.gig-comments-unfollow, a:hover.gig-comments-unfollow,a:link.gig-comments-unfollow,a:active.gig-comments-unfollow,a:visited.gig-comments-unfollow ","{background-image:url('"+o+"unfollow.png')}","a.gig-comments-moreProvider, a:hover.gig-comments-moreProvider,a:link.gig-comments-moreProvider,a:active.gig-comments-moreProvider,a:visited.gig-comments-moreProvider ","{display:inline-block;font-size:12px;width: 100px;cursor:pointer;margin-bottom:5px;line-height:20px;}","a.gig-comments-more, a:hover.gig-comments-mor,a:link.gig-comments-more,a:active.gig-comments-more,a:visited.gig-comments-more {margin-left:5px;line-height:20px;color:#2181CA;text-decoration:underline;line-height:16px;}","div.gig-comments-dialog-moreProviders {padding:0;width: 300px;}","div.gig-comments-dialog-caption-moreProviders {font-size:12px;padding:0 5px;}","div.gig-comments-dialog-body-moreProviders{padding:5px 5px 0 5px;}","div.gig-comments-dialog-caption-moreProviders {padding:3px 5px;}","div.gig-comments-moderator-edit-text {font-weight:bold;margin-bottom:10px;}","div.gig-comments-myRating {overflow:hidden;}","div.gig-comments-myRating-label {float:left;margin-top:5px;margin-right:5px;}","div.gig-comments-mySummary-label {}","div.gig-comments-mySummary-value, div.gig-comments-myReview-value {font-style: italic;}","div.gig-comments-mySummary-label, div.gig-comments-myReview-label {margin-bott: 10px;}","div.gig-comments-mySummary-value {margin-bottom:27px;}","div.gig-comments-updatesStrip {background-color: #FFFBCA;margin: 10px 0;text-align:center;padding:5px;}","span.gig-comments-updatesStrip-link {color:#2181CA;text-decorations:underline;cursor:pointer;font-size: inherit;}"],nonMobileCSS:[".gig-comments-container * {border:none;-moz-border-radius:0;border-radius:0;background:none;}",".gig-comments-container a:focus, .gig-comments-container input:focus, .gig-comments-container textarea:focus {outline: none;}","input.gig-comments-textbox {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;padding:0 4px;background-color:white;border: 1px solid #C0C0C0;height:24px;box-shadow:inset 0 0 4px #DCDCDC; -moz-box-shadow:inset 0 0 4px #DCDCDC; -webkit-box-shadow:inset 0 0 4px #DCDCDC;}","a:hover.gig-comments-button, a.gig-comments-button-down,a:link.gig-comments-button-down,a:active.gig-comments-button-down,a:visited.gig-comments-button-down {",'background: #EAEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#EAEBEB", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#EAEBEB), to(#FFFFFF));","background: -moz-linear-gradient(top,  #EAEBEB,  #FFFFFF)}","span.gig-comments-username{white-space:nowrap}","div.gig-comments-updatesStrip {font-size: 11px}"],mobileCSS:["div.gig-comments-comment-flag{display:none}","a.gig-comments-button-down,a:link.gig-comments-button-down,a:active.gig-comments-button-down,a:visited.gig-comments-button-down {",'background: #EAEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#EAEBEB", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#EAEBEB), to(#FFFFFF));","background: -moz-linear-gradient(top,  #EAEBEB,  #FFFFFF)}",".gig-comments-container *, div.gig-comments-container, .gig-comments-container span, .gig-comments-container a:hover, .gig-comments-container a:visited, .gig-comments-container a:link, .gig-comments-container a:active{","font-size:16px;font-family:sans-serif;}","span.gig-comments-comment-time {display:none}","a.gig-comments-button,a:hover.gig-comments-button,a:link.gig-comments-button,a:active.gig-comments-button,a:visited.gig-comments-button {","line-height: 28px;}","div.gig-comments-commentList-footer, div.gig-comments-commentList-header, div.gig-commentList, div.gig-comments-commentBox {margin-left:3px; margin-right:3px;}","div.gig-comments-commentList-header {font-size: 18px;}","a.gig-comments-button-reply, div.gig-comments-vote-value {font-size: 14px}","a.gig-comments-button-post, a:hover.gig-comments-button-post,a:link.gig-comments-button-post,a:active.gig-comments-button-post,a:visited.gig-comments-button-post {line-height:33px}","div.gig-comments-replies-length-container {display:none}","div.gig-comments-vote-up {background-image:url('"+o+"mobile_vote_up.png');width:28px;height:28px;}","div.gig-comments-vote-down {background-image:url('"+o+"mobile_vote_down.png');width:28px;height:28px; }","a.gig-comments-button-down div.gig-comments-vote-up {background-image:url('"+o+"mobile_vote_up_pressed.png');}","a.gig-comments-button-down div.gig-comments-vote-down {background-image:url('"+o+"mobile_vote_down_pressed.png'); }","a.gig-comments-button-vote-down, a:hover.gig-comments-button-vote-down,a:link.gig-comments-button-vote-down,a:active.gig-comments-button-vote-down,a:visited.gig-comments-button-vote-down {","margin-left:8px;}","a.gig-comments-rss-icon,a:hover.gig-comments-rss-icon,a:link.gig-comments-rss-icon,a:active.gig-comments-rss-icon,a:visited.gig-comments-rss-icon {display:none}","div.gig-comments-loginCanvas {margin-bottom:10px;}","a.gig-comments-dropdown-login div.gig-comments-dropdown-button {float:right;width:33px;height:33px}","div.gig-comments-dropdown-button-arrow {width: 32px;height:33px;}","a.gig-comments-dropdown,a:hover.gig-comments-dropdown,a:link.gig-comments-dropdown,a:active.gig-comments-dropdown,a:visited.gig-comments-dropdown {","line-height:33px;display:block;overflow:auto;","}","div.gig-comments-providerIcons {display:none}","div.gig-comments-loginUI {height:240px}","div.gig-comments-loginUI-content {margin-top:20px;}","div.gig-comments-headerText{padding-bottom:2px}","div.gig-comments-showMoreComments-text {padding-top:8px;}","div.gig-comments-checkbox {width:auto;}",".gig-comments-container textarea {width:100%;-moz-box-sizing: content-box;-webkit-box-sizing: content-box;box-sizing: content-box;}","div.gig-comments-title {font-size:17px;}","input.gig-comments-textbox {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin-bottom:10px;}","div.gig-comments-star {background-repeat:no-repeat;margin-right:3px; width: 21px; height:21px;float:left;background-image:url('"+o+"RateIcon_21.png')}","div.gig-comments-star-half {background-image:url('"+o+"RateIcon_21_half.png')}","div.gig-comments-star-full {background-image:url('"+o+"RateIcon_21_pressed.png')}","div.gig-comments-star-editable {background-repeat:no-repeat;margin-right:7px; width: 28px; height:28px;float:left;cursor:pointer;background-image:url('"+o+"RateIcon_28.png')}","div.gig-comments-star-editable-half {background-image:url('"+o+"RateIcon_28_half.png')}","div.gig-comments-star-editable-full, div.gig-comments-addComment-ratings-error div.gig-comments-star-editable-full {background-image:url('"+o+"RateIcon_28_pressed.png')}","div.gig-comments-addComment-ratings-error .gig-comments-star-editable {background-image:url('"+o+"RateIcon_28_error.png')}","div.gig-comments-rating {margin-right:3px;}","div.gig-comments-addComment-ratings-ratingName {margin-right:7px;}","label.gig-comments-checkboxProvider {margin-left:5px}","div.gig-comments-updatesStrip {margin: 10px 3px;}","span.gig-comments-updatesStrip-link {display:block;text-align:center;}"]},templates:{_map:{},get:function(e){return this._map[e]},getMapCopy:function(){return gigya.utils.object.clone(this._map)},set:function(e,t){this._map[e]=t instanceof Array?t.join(""):t}},createInstance:function(e,t,i){var o=document.getElementById(t.containerID);if(null!=o){o.innerHTML="",t.streamID||(t.streamID=0);var a=new n(e,t,i);a.id=t.containerID+"_"+s.instances_size,s.instances[a.id]=a,s.instances_size++,a.start()}},setDefaultTemplates:function(){s.templates.set("commentContainer",['<div style="overflow:hidden;zoom:1;" id="$commentContainerId">','<div onmouseover="$onmouseover" onmouseout="$onmouseout">${comment}</div>',"$commentReplyPlaceholder",'<div id="gig-replies-$commentID">$childComments<!-- empty divs=100% height IE --></div>',"$dottedLine","</div>"]),s.templates.set("comment",['<div class="gig-comments-$classname" style="margin-left:${marginLeft}px;">',"${ratings}${titlePlaceholder}",'<table cellspacing="0" cellpadding="0" style="width:100%"><tr>','<td style="vertical-align:top"><div class="gig-comments-photo-container gig-comments-$rootClass-photo-container">$photoDiv</div></td>','<td class="gig-comments-commentData">','<div class="gig-comments-commentData-header">','<div class="gig-comments-usernameAndTime">','<span class="gig-comments-username gig-comments-$rootClass-username">$username</span>','<span class="gig-comments-$rootClass-newIndicator" style="display:none">$newText</span>','<span class="gig-comments-$rootClass-time">$dateString</span>',"</div>","$remove","</div>","$errorPlaceholder",'<div class="gig-comments-comment-body">',"${outstandingBadgePlaceholder}","${moderatorEditTextPlaceholder}","${body}","${mediaItemPlaceholder}","</div>",'<div class="gig-comments-replyButtonAndCount">$replyButton $repliesCountPlaceholder</div>',"$vote $flag","</td></tr>","</table>","</div>"]),
s.templates.set("facebookComment",['<div class="gig-comments-$classname" style="margin-left:${marginLeft}px;">','<table cellspacing="0" cellpadding="0" style="width:100%"><tr>','<td style="vertical-align:top"><div class="gig-comments-photo-container gig-comments-$rootClass-photo-container">$photoDiv</div></td>','<td class="gig-comments-commentData">','<div class="gig-comments-commentData-header">','<div class="gig-comments-usernameAndTime">','<span class="gig-comments-username gig-comments-$rootClass-username">$username</span>','<span class="gig-comments-$rootClass-time">$dateString</span>',"</div>",'<span class="gig-comments-$rootClass-viaFacebook">','<img alt="" src="'+gigya._.getCdnResource("/gs/i/comments/FB_logo.gif")+'" /><span class="gig-comments-$rootClass-viaFacebook-text">Via Facebook</span>',"</span>","</div>",'<div class="gig-comments-comment-body">$body</div>',"</td>","</tr></table>","</div>"]),s.templates.set("flag",['<div id="gig-flag-$commentID" class="gig-comments-comment-flag" onclick="$onFlagClicked; return false;"></div>']),s.templates.set("remove",['<div id="gig-remove-$commentID" class="gig-comments-comment-remove" onclick="$onRemoveClicked; return false;"></div>']),s.templates.set("vote",function(e){return['<div class="gig-comments-vote" id="gig-vote-$commentID">',e.displayPosNegVotes?'<div id="gig-voteValuePos-$commentID" class="gig-comments-vote-value gig-comments-vote-value-pos"></div>':'<div id="gig-voteValue-$commentID" class="gig-comments-vote-value"></div>','<a id="gig-voteUp-$commentID" href="#" class="gig-comments-button gig-comments-button-vote gig-comments-button-vote-up" onclick="$onVoteUpClick; return false;"><div class="gig-comments-vote-up"></div></a>',(e.allowNegativeVoting?'<a href="#" id="gig-voteDown-$commentID" class="gig-comments-button gig-comments-button-vote gig-comments-button-vote-down" onclick="$onVoteDownClick; return false;"><div class="gig-comments-vote-down"></div></a>':"")+(e.displayPosNegVotes?'<div id="gig-voteValueNeg-$commentID" class="gig-comments-vote-value gig-comments-vote-value-neg"></div>':""),"</div>"].join("")}),s.templates.set("repliesCountPlaceholder",['<div id="gig-comments-comment-$commentID-repliesCountPlaceholder" style="display:inline-block;*display:inline;zoom:1;">$expand_collapse</div>']),s.templates.set("expand_collapse",['<div onclick="$onExapndCollapse" class="gig-comments-replies-length-container"><div id="gig-expand-$commentID" class="gig-comments-expand-arrow"></div><span class="gig-comments-replies-length">$replies_count</span></div>']),s.templates.set("pendingComment",['<div class="gig-comments-$classname" style="margin-left:${marginLeft}px;">',"$ratings $titlePlaceholder",'<table cellspacing="0" cellpadding="0" style="width:100%"><tr>','<td style="vertical-align:top"><div class="gig-comments-photo-container gig-comments-$rootClass-photo-container">$photoDiv</div></td>','<td class="gig-comments-commentData">','<div class="gig-comments-commentData-header">','<div class="gig-comments-usernameAndTime">','<span class="gig-comments-username gig-comments-$rootClass-username">$username</span>','<span class="gig-comments-$rootClass-time">$dateString</span>',"</div>","</div>",'<div class="gig-comments-comment-body gig-comments-awaiting-moderation">$awaiting_moderation_text</div>$errorPlaceholder',"$replyButton $repliesCountPlaceholder $flag","</td></tr>","</table>","</div>"]),s.templates.set("errorPlaceholder",['<div id="$id-error-$commentID" class="gig-comments-error-text"><!-- empty divs=100% height IE --></div>']),s.templates.set("outstandingBadgePlaceholder",['<div class="gig-comments-outstanding-badge"><!-- empty divs=100% height IE --></div>']),s.templates.set("moderatorEditTextPlaceholder",['<div class="gig-comments-moderator-edit-text">$moderatorEditText</div>']),s.templates.set("validationErrorPlaceholder",['<div id="$id-validationError" class="gig-validation-error"><!-- empty divs=100% height IE --></div>']),s.templates.set("mediaItemPlaceholder",['<a href="$mediaItemURL" target="_blank" class="gig-comments-comment-mediaItem">$mediaItemURL</div>']),s.templates.set("replyPlaceholder",['<div id="$id-reply-$commentID"></div>']),s.templates.set("replyButton",['<a href="#" id="$id-replybutton-$commentID" class="gig-comments-button gig-comments-button-reply" onclick="$onReplyClicked;return false;">$reply</a>']),s.templates.set("photoDiv32",'<div class="gig-comments-photoImageSmall gig-comments-$rootClass-photoImageSmall" style="overflow:hidden;visibility:hidden"><img alt="" onload="gigya.comments.plugins.comments.imgOnLoad(this, 32)" src="$photoURL" style="vertical-align:top" /><br />$providerImage</div>'),s.templates.set("photoDiv48",'<div class="gig-comments-photoImageLarge gig-comments-$rootClass-photoImageLarge" style="overflow:hidden;visibility:hidden"><img alt="" onload="gigya.comments.plugins.comments.imgOnLoad(this, 48)" src="$photoURL" style="vertical-align:top" /><br />$providerImage</div>'),s.templates.set("providerImage",'<div class="gig-comments-providerLogo gig-comments-$rootClass-providerLogo"><img alt="" src="$providerImageURL" style="vertical-align:top" /></div>'),s.templates.set("loginCanvas_loggedIn",['<div class="gig-comments-loginCanvas gig-comments-$rootClass-loginCanvas">','<div class="gig-comments-photo-container gig-comments-$rootClass-photo-container">$photoDiv</div>','<div class="gig-comments-headerText gig-comments-$rootClass-headerText">$post_a_new_comment</div>','<span class="gig-comments-username gig-comments-$rootClass-username">$username&#160;</span>$logoutLink',"$followLink","</div>"]),s.templates.set("loginCanvas_loggedIn_guest",['<div class="gig-comments-loginCanvas gig-comments-$rootClass-loginCanvas">','<div class="gig-comments-photo-container gig-comments-$rootClass-photo-container">$photoDiv</div>','<div class="gig-comments-headerText gig-comments-$rootClass-headerText">$post_a_new_comment</div>','<div class="gig-comments-login-container"><span class="gig-comments-username gig-comments-$rootClass-username">$username&#160;</span>$logoutLink','<span class="gig-comments-login gig-comments-or">&#160;&#160;-&#160;${or}&#160;-&#160;&#160;</span>${loginDropdown}</div>',"</div>"]),s.templates.set("logoutLink",['<span class="gig-comments-logoutLink-container">(<span class="gig-comments-logoutLink gig-comments-$rootClass-logoutLink" onclick="$onLogoutClick">$logout</span>)</span>']),s.templates.set("loginCanvas_loggedOut_mobile",['<div class="gig-comments-loginCanvas gig-comments-$rootClass-loginCanvas">','<div class="gig-comments-login-container">${loginDropdown}</div>',"</div>"]),s.templates.set("loginCanvas_loggedOut",['<div class="gig-comments-loginCanvas gig-comments-$rootClass-loginCanvas">','<div class="gig-comments-photo-container gig-comments-$rootClass-photo-container">$photoDiv</div>','<div class="gig-comments-headerText gig-comments-$rootClass-headerText">$post_a_new_comment</div>','<div class="gig-comments-login-container">${loginDropdown}</div>',"</div>"]),s.templates.set("loginCanvas_loggedOutWithGuest",['<div class="gig-comments-loginCanvas gig-comments-$rootClass-loginCanvas">','<div class="gig-comments-photo-container gig-comments-$rootClass-photo-container">$photoDiv</div>','<div class="gig-comments-headerText gig-comments-$rootClass-headerText">$post_a_new_comment</div>','<div class="gig-comments-login-container">${loginDropdown}<span class="gig-comments-login gig-comments-or">&#160;&#160;-&#160;${or}&#160;-&#160;&#160;</span>${guestDropdown}</div>',"</div>"]),s.templates.set("loginDropdown",['<a href="#" id="$id-loginDropdown" onclick="${onLoginClick};return false;" class="gig-comments-dropdown gig-comments-dropdown-login">','<div class="gig-comments-dropdown-text gig-comments-dropdown-login-text">$login</div>','<div class="gig-comments-providerIcons">&#160;</div>','<div class="gig-comments-dropdown-button"><div class="gig-comments-dropdown-button-arrow">&#160;</div></div>',"</a>"]),s.templates.set("loginDropdownNative",['<a href="#" id="$id-loginDropdown" onclick="${onLoginClick};return false;" class="gig-comments-dropdown gig-comments-dropdown-login gig-comments-dropdown-login-native">',"$login","</a>"]),s.templates.set("guestDropdown",['<a href="#" id="$id-guestDropdown" onclick="${onGuestClick};return false;" class="gig-comments-dropdown gig-comments-dropdown-guest">','<div class="gig-comments-dropdown-text gig-comments-dropdown-guest-text">$guest</div>','<div class="gig-comments-dropdown-button"><div class="gig-comments-dropdown-button-arrow">&#160;</div></div>',"</a>"]),s.templates.set("guestBox",['<div class="gig-comments-guestDropdown">',"<div>","$nicknameTextbox","$emailTextbox","</div>",'<div class="gig-comments-email-not-displayed-publicly">${email_not_displayed_publicly}</div>',"$okButton","$guestErrorPlaceholder","</div>"]),s.templates.set("guest-nicknameTextbox",['<input id="$id-nickname" onkeyup="if (this.value.length>=30) {this.value=this.value.substring(0,30);}" class="gig-comments-textbox gig-comments-textbox-nickname" type="textbox" value="$nickname" onblur="if (this.value==\'\') {this.watermarkCleared=false; this.value=\'$nickname\'}" onfocus="if(!this.watermarkCleared) {this.watermarkCleared=true; this.value=\'\';}" />']),s.templates.set("guest-emailTextbox",['<input id="$id-email" class="gig-comments-textbox gig-comments-textbox-email" type="textbox" value="$email" onblur="if (this.value==\'\') {this.watermarkCleared=false; this.value=\'$email\'}" onfocus="if(!this.watermarkCleared) {this.watermarkCleared=true; this.value=\'\';}" />']),s.templates.set("guestErrorPlaceholder",['<div class="gig-comments-guestError" id="$id-guestErrorPlaceholder"></div>']),s.templates.set("okButton",['<a href="#" onclick="$onGuestLogin;return false;" id="$id-okButton" class="gig-comments-button gig-comments-button-ok">$ok</a>']),s.templates.set("addComment",['<div class="gig-comments-$rootClass-commentBox">',"$ratings","$titleLabel","$titleTextbox","$commentLabel","$addCommentTextarea",'<div class="gig-comments-addCommentFooter">','<table cellpadding="0" cellspacing="0" style="width:100%"><tr>','<td><div id="$id-shareTo" class="gig-comments-shareTo gig-comments-$rootClass-shareTo">${share_to}</div></td>','<td style="width:99%;">$providersCheckboxes</td>','<td><div id="$id-postButton" class="gig-comments-postButton-container">$postButton</div></td>',"</tr></table>","</div>","<div>$validationErrorPlaceholder</div>","</div>"]),s.templates.set("addCommentLabel",['<div class="gig-comments-addComment-label gig-comments-addComment-$labelID gig-comments-$rootClass-addComment-label gig-comments-$rootClass-addComment-$labelID">$labelText</div>']),s.templates.set("providersCheckboxes",['<div id="${id}-providersCheckboxes" class="gig-comments-providers-container gig-comments-$rootClass-providers-container" style="visibility:hidden">$providersCheckboxesContent</div>']),s.templates.set("updatesStrip",['<div class="gig-comments-updatesStrip">${text} <span class="gig-comments-updatesStrip-link">${linkText}</span></div>']),s.templates.set("editableRating",function(e){var t=[];t.push('<div id="${id}" class="gig-comments-addComment-ratings">'),t.push('<div class="gig-comments-addComment-label gig-comments-addComment-ratings-ratingName">${name}</div><div class="gig-comments-addComment-ratings-stars-container">');for(var i=0;i<5;i++)t.push('<div id="${id}_'+i+'" gig-baseid="$id" gig-ratingID="$ratingID" gig-rating-details="'+e.details[i]+'" gig-rating="'+(i+1)+'" class="gig-comments-star-editable" $actionAttribute="$onClick" onmouseover="$onMouseOver" onmouseout="$onMouseOut"></div>');return t.push("</div>"),t.push('<div class="gig-comments-addComment-ratings-details" id="${id}_details"></div>'),t.push("</div>"),t.join("")}),s.templates.set("rating",function(e){var t=[];t.push('<div class="gig-comments-rating" title="'+e.value+'">');for(var i=1;i<=5;i++)i<=e.value?t.push('<div class="${starClassName} ${starClassName}-full"></div>'):i-e.value<=.5&&i-e.value>0?t.push('<div class="${starClassName} ${starClassName}-half"></div>'):t.push('<div class="${starClassName} ${starClassName}-empty"></div>');return t.push("</div>"),t.join("")}),s.templates.set("titlePlaceholder",['<div class="gig-comments-title">$title</div>']),s.templates.set("titleTextbox",['<input id="$id-titleTextbox" class="gig-comments-textbox gig-comments-textbox-title" type="textbox" />']),s.templates.set("commentBox",['<div class="gig-comments-$rootClass">',"$closeIcon","$loginCanvas","$addComment","</div>"]),s.templates.set("loginCanvas",['<div id="${id}-loginCanvas" class="gig-comments-loginCanvas-container">$loginCanvasContent</div>']),s.templates.set("closeIcon",['<div onclick="$onCloseClicked" class="gig-comments-close-icon"></div>']),s.templates.set("providersCheckboxesContent",['<div class="gig-comments-providers gig-comments-$rootClass-providers">$drawProviders()&#160;</div>']),s.templates.set("providerCheckbox",['<div id="$id" class="gig-comments-checkbox gig-comments-$rootClass-checkbox" onclick="$onCheckboxClicked;return false;" style="$style">','<div id="$id-image" class="gig-comments-checkboxImage gig-comments-$rootClass-checkboxImage"><!-- empty divs=100% height IE --></div>','<div class="gig-comments-checkboxProviderImage gig-comments-$rootClass-checkboxProviderImage" style="background-image:url(\'$iconURL\');"></div>',"</div>"]),s.templates.set("providerCheckbox-mobile",['<div id="$id" class="gig-comments-checkbox gig-comments-$rootClass-checkbox">','<input type="checkbox" id="$id-cb" class="gig-comments-checkboxProvider gig-comments-$rootClass-checkboxProvider" value="${post_to_provider}" onchange="$onCheckboxClicked;return false;" />','<label for="$id-cb" class="gig-comments-checkboxProvider gig-comments-$rootClass-checkboxProvider">${post_to_provider}</label>',"</div>"]),s.templates.set("addCommentTextarea",['<div class="gig-comments-textarea-wrapper gig-comments-$rootClass-textarea-wrapper"><div style="padding:5px"><textarea onmousedown="if (typeof event!=\'undefined\' && event.stopPropagationn) event.stopPropagation()" ontouchstart="if (typeof event!=\'undefined\' && event.stopPropagation) event.stopPropagation()" onkeyup="var c=gigya.pluginUtils.text.normalizeLinebreaks(this.value); if (c.length>=$maxLength) {this.value=c.substring(0,$maxLength);}" class="gig-comments-textarea gig-comments-$rootClass-textarea" id="$id-commentTextarea" ></textarea></div></div>']),s.templates.set("button",['<a href="#" class="gig-comments-button gig-comments-$id" onclick="$onClick;return false;">$text</a>']),s.templates.set("postButton",['<a href="#" class="gig-comments-button gig-comments-button-post gig-comments-$rootClass-button-post" onclick="$onPostButtonClicked;return false;">$post</a>']),s.templates.set("comments-header",['<div class="gig-comments-commentList-header">$comments_count</span> $rss</div>','<div class="gig-comments-updatesStripPlaceholder"></div>']),s.templates.set("commentsCountWrapper",['<div class="gig-comments-commentList-header gig-comments-commentList-header-commentsCount">$count</div>']),s.templates.set("rss",['<div class="gig-comments-headerLinks">','<a class="gig-comments-headerLinks-rss" rel="nofollow" href="$rssURL" type="application/rss+xml" title="RSS" onclick="return $onRssClick" oncontextmenu="$onRssRightClick">$rss_text</a>','<span class="gig-comments-vertical-seperator gig-comments-vertical-seperator-rss">|</span>','<a class="gig-comments-headerLinks-subscribe" href="#" title="$subscribe_text" onclick="$onSubscribeClick; return false;" id="$id-subscribeLink">$subscribe_text</a>',"</div>"]),s.templates.set("followLink",['<a class="gig-comments-follow" onclick="$onFollowClicked" id="$id-followLink"></a>']),s.templates.set("dottedLine",['<div class="gig-comments-dottedLine"><!-- empty divs=100% height IE --></div>']),s.templates.set("comments-footer",['<div class="gig-comments-commentList-footer">$showMoreComments</div>']),s.templates.set("showMoreComments",['<div class="gig-comments-showMoreComments-container"><div onmouseover="this.className=\'gig-comments-showMoreComments gig-comments-showMoreComments-over\'" onmouseout="this.className=\'gig-comments-showMoreComments\'" class="gig-comments-showMoreComments" onclick="$onMoreCommentsClick"><div class="gig-comments-showMoreComments-text">${show_more_comments}</div></div></div>']),s.templates.set("showMoreComments-progress",['<div class="gig-comments-showMoreComments"><span><div class="gig-comments-showMoreComments-progress">&#160;</div></span></div>']),s.templates.set("flagDialog",['<div class="gig-comments-dialog gig-comments-dialog-flag">','<div class="gig-comments-dialog-caption gig-comments-dialog-caption-flag">',"$report_comment_to_site_owner",'<div class="gig-comments-dialog-closeIcon" onclick="$onClose"></div>',"</div>",'<div class="gig-comments-dialog-body gig-comments-dialog-body-flag">',"$are_you_sure_you_want_to_mark_this_comment_as_inappropriate",'<div class="gig-comments-dialog-buttons gig-comments-dialog-buttons-flag">','<a class="gig-comments-button gig-comments-button-cancel" onclick="${onCancel}; return false;" href="#">$cancel</a>','<a class="gig-comments-button gig-comments-button-flagThisComment" onclick="${onFlag}; return false;" href="#">$yes_flag_this_comment</a>',"</div>","</div>","</div>"]),s.templates.set("removeDialog",['<div class="gig-comments-dialog gig-comments-dialog-remove">','<div class="gig-comments-dialog-caption gig-comments-dialog-caption-remove">',"$delete_comment",'<div class="gig-comments-dialog-closeIcon" onclick="$onCancel"></div>',"</div>",'<div class="gig-comments-dialog-body gig-comments-dialog-body-remove">',"$are_you_sure",'<div class="gig-comments-dialog-buttons gig-comments-dialog-buttons-remove">','<a class="gig-comments-button gig-comments-button-cancel" onclick="${onCancel}; return false;" href="#">$no</a>','<a class="gig-comments-button gig-comments-button-remove" onclick="${onRemove}; return false;" href="#">$yes</a>',"</div>","</div>","</div>"]),s.templates.set("subscribeDialog",['<div class="gig-comments-dialog gig-comments-dialog-subscribe">','<div class="gig-comments-dialog-caption gig-comments-dialog-caption-subscribe">',"$notifications_settings",'<div class="gig-comments-dialog-closeIcon" onclick="$onCancel"></div>',"</div>",'<div class="gig-comments-dialog-body gig-comments-dialog-body-subscribe">','<div class="gig-comments-dialog-subscribe-enterYourEmail">${enter_your_email}</div>','<div class="gig-comments-dialog-subscribe-emailTextbox-container">','<input id="$textboxID" onkeyup="${onKeyUp}" type="textbox" class="gig-comments-textbox gig-comments-dialog-subscribe-emailTextbox" value="$defaultEmail" />',"</div>",'<a href="#" class="gig-comments-button gig-comments-button-subscribe" onclick="${onSubscribe};return false;" id="$buttonID">$subscribe_text</a>','<div class="gig-comments-dialog-subscribe-error" id="${errorPlaceholderID}" style="visibility:hidden">${please_provide_a_valid_email_address}</div>',"</div>","</div>"]),s.templates.set("confirmationDialog",['<div class="gig-comments-dialog gig-comments-dialog-confirmation">','<div class="gig-comments-dialog-caption gig-comments-dialog-caption-confirmation">',"$title",'<div class="gig-comments-dialog-closeIcon" onclick="$onCancel"></div>',"</div>",'<div class="gig-comments-dialog-body gig-comments-dialog-body-confirmation">',"$text","</div>","</div>"]),s.templates.set("moreProvidersDialog",['<div class="gig-comments-dialog gig-comments-dialog-moreProviders">','<div class="gig-comments-dialog-caption gig-comments-dialog-caption-moreProviders">',"$more_share_destinations",'<div class="gig-comments-dialog-smallCloseIcon" onclick="$onCancel"></div>',"</div>",'<div class="gig-comments-dialog-body gig-comments-dialog-body-moreProviders">',"$moreProvidersHTML","</div>","</div>"]),s.templates.set("moreProvider",['<a class="gig-comments-moreProvider" onclick="${onClick};return false;" style="background-image:url(\'${iconURL}\');background-position:left center;background-repeat:no-repeat;padding:0 ${iconWidth}">',"$providerName","</a>"]),s.templates.set("moreLink",['<a href="#" onclick="${onClick};return false;" class="gig-comments-more">$more</a>']),s.templates.set("myRating",["$loginCanvas",'<div class="gig-comments-myRating">','<div class="gig-comments-myRating-label">${myRatingLabel}</div> $rating',"</div>",'<div class="gig-comments-mySummary">','<div class="gig-comments-mySummary-label">${mySummaryLabel}</div>','<div class="gig-comments-mySummary-value">${summary}</div>',"</div>",'<div class="gig-comments-myReview">','<div class="gig-comments-myReview-label">${myReviewLabel}</div>','<div class="gig-comments-myReview-value">${review}</div>',"</div>"])}},a=s.getText,m=function(e,t){this.data=e,this.id=e.ID,this.parentID=e.parentID,this.children=e.children,this.timestamp=e.timestamp,this.commentText=e.commentText?e.commentText:"",this.commentTitle=e.commentTitle?e.commentTitle:"",this.ratings=e.ratings,this.username=e.sender.name,this.username||(this.username="Anonymous"),this.photoURL=e.sender.photoURL,this.UID=e.UID,this.threadTimestamp=e.threadTimestamp,this.provider=e.sender.loginProvider,this.status=e.status,this.isTemp=e.isTemp,this.isPost=e.isPost,e.providerPostIDs&&(this.providerPostIDs=e.providerPostIDs),this.posVotes=e.posVotes?e.posVotes:0,this.negVotes=e.negVotes?e.negVotes:0,this.vote=e.vote?e.vote:0,this.plugin=t,this.containerID=this.plugin.containerID+"_"+this.id,this.plugin.commentsInstances||(this.plugin.commentsInstances={}),this.plugin.commentsInstances[this.id]=this};m.prototype={id:null,parentID:null,plugin:null,children:null,level:null,childrenCount:null,timestamp:null,provider:null,providerPostIDs:null,containerID:null,getContainer:function(){return document.getElementById(this.containerID)},getParentComment:function(){return this.plugin.commentsInstances[this.parentID]},isRemovedComment:function(){return!this.isPost&&["rejected","deleted","pending"].indexOf(this.data.status)!=-1},isPostPending:function(){return this.isPost&&this.data&&"pending"==this.data.status},expandCollapse:function(){var e=document.getElementById("gig-replies-"+this.id);e&&("none"==e.style.display?this.expand():this.collapse())},expand:function(){var e=document.getElementById("gig-expand-"+this.id),t=document.getElementById("gig-replies-"+this.id);e&&t&&(e.className="gig-comments-expand-arrow",gigya.utils.DOM.showByID(t.id))},collapse:function(){var e=document.getElementById("gig-expand-"+this.id),t=document.getElementById("gig-replies-"+this.id);e&&t&&(e.className="gig-comments-collapse-arrow",gigya.utils.DOM.hideByID(t.id))},updateRepliesCount:function(){var e=this.plugin._templates.expand_collapse,t="reviews"==this.plugin.textMode?"one_comment":"one_reply",i="reviews"==this.plugin.textMode?"num_comments":"num_replies",o=a(1==this.childrenCount?t:i,"%num",this.childrenCount||0);"fr"==this.plugin._p.lang&&"0"==this.childrenCount&&(o=a(t,"%num",this.childrenCount).replace("1","0"));var n={commentID:this.id,onExapndCollapse:this.getRefString()+".expandCollapse()",replies_count:o};document.getElementById("gig-comments-comment-"+this.id+"-repliesCountPlaceholder").innerHTML=this.childrenCount>0?gigya.utils.templates.fill(e,n):"";var s=this.getParentComment();s&&s.updateRepliesCount()},getCommentElementByClass:function(e){return gigya.utils.DOM.getElementsByClass(this.getContainer(),"gig-comments-comment-"+e)[0]},markAsNew:function(){var e=this.getCommentElementByClass("newIndicator");e&&(e.style.display="")},unmarkAsNew:function(){var e=this.getCommentElementByClass("newIndicator");e&&(e.style.display="none")},closeReplybox:function(){document.getElementById(this.plugin.containerID+"-reply-"+this.id).innerHTML="",document.getElementById(this.plugin.containerID+"-reply-"+this.id).style.display="none";var e=document.getElementById(this.plugin.containerID+"-replybutton-"+this.id);e.className="gig-comments-button gig-comments-button-reply",this.plugin.lastReplyId=null;var t=document.getElementById(this.plugin.containerID+"-reply-"+this.id+"-guestUI");t&&t.parentNode&&t.parentNode.removeChild(t);var i=document.getElementById(this.plugin.containerID+"-reply-"+this.id+"-login");i&&i.parentNode&&i.parentNode.removeChild(i)},showFlagDialog:function(){if(this.plugin.lastFlagComment&&this.plugin.lastFlagComment.hideFlagDialog(),!this.data.flagged){this.plugin.lastFlagComment=this,document.getElementById("gig-flag-"+this.id).style.visibility="visible";var e="reviews"==this.plugin.textMode&&0==this.level?"review":"comment",t=this.plugin._templates.flagDialog,i={report_comment_to_site_owner:a("report_"+e+"_to_site_owner"),are_you_sure_you_want_to_mark_this_comment_as_inappropriate:a("are_you_sure_you_want_to_mark_this_"+e+"_as_inappropriate"),cancel:a("cancel"),yes_flag_this_comment:a("yes_flag_this_"+e),onClose:this.getRefString()+".hideFlagDialog()",onCancel:this.getRefString()+".hideFlagDialog()",onFlag:this.getRefString()+".flag()"},o=this.plugin.containerID+"-"+this.id+"-flag",n=gigya.utils.DOM.createTopLevelDiv(o+"_container");n.style.position="absolute",n.className="gig-comments-container",n.innerHTML=gigya.utils.templates.fill(t,i),gigya.utils.DOM.setSize(n,400,150,!0)}},hideFlagDialog:function(e){e||(document.getElementById("gig-flag-"+this.id).style.visibility="");var t=document.getElementById(this.plugin.containerID+"-"+this.id+"-flag_container");t&&t.parentNode.removeChild(t)},showRemoveDialog:function(){if(this.data.sender.isSelf){var e="reviews"==this.plugin.textMode&&0==this.level?"review":"comment",t=this.plugin._templates.removeDialog,i={are_you_sure:a("are_you_sure_you_want_to_permanently_delete_your_"+e+"_qm"),no:a("no"),yes:a("yes"),onCancel:this.getRefString()+".hideRemoveDialog()",onRemove:this.getRefString()+".remove()",delete_comment:a("delete_"+e)},o=this.plugin.containerID+"-"+this.id+"-remove",n=gigya.utils.DOM.createTopLevelDiv(o+"_container");n.style.position="absolute",n.className="gig-comments-container",n.innerHTML=gigya.utils.templates.fill(t,i),gigya.utils.DOM.setSize(n,390,150,!0)}},hideRemoveDialog:function(){var e=document.getElementById(this.plugin.containerID+"-"+this.id+"-remove_container");e&&e.parentNode.removeChild(e)},markAsFlagged:function(){this.data.flagged=!0;var e=document.getElementById("gig-flag-"+this.id);e&&(e.className="gig-comments-comment-flag-submitted"),this.plugin._state.flags[this.id]=!0},remove:function(){gigya.comments.deleteComment(this.plugin._p,{commentID:this.id});for(var e=this.getParentComment(),t=0;t<this.plugin._commentsRawData.length;t++)if(this.plugin._commentsRawData[t].ID==this.id){this.plugin._commentsRawData.splice(t,1);break}for(;e;)e.childrenCount--,e.updateRepliesCount(),e=e.getParentComment();"reviews"==this.plugin.textMode&&0!=this.level||this.plugin._commentCount--,this.plugin.updateCount();var i=this.getContainer();if(i)if(this.childrenCount&&this.childrenCount>0)this.data.status="deleted",this.data.commentText="",i.innerHTML=this.getHTML();else{var o=i.parentNode;o.removeChild(i)}if(this.hideRemoveDialog(),this.plugin._userComments)for(var t=0;t<this.plugin._userComments.length;t++)if(this.plugin._userComments[t].ID==this.id){this.plugin._userComments.splice(t,1);break}"reviews"==this.plugin.textMode&&this.plugin._drawCommentBox()},voteUp:function(){"pos"==this.vote?this.setVote("none"):this.setVote("pos")},voteDown:function(){"neg"==this.vote?this.setVote("none"):this.setVote("neg")},setVote:function(e){var t=this;if(!this.plugin._user||!this.plugin._user.isConnected){var i="pos"==e?"gig-voteUp-"+this.id:"gig-voteDown-"+this.id;return void this.plugin.loginClicked(this.id+"-vote-"+e,document.getElementById(i),function(){t.setVote(e)},!0)}switch(this.voteInProgress=!0,gigya.comments.vote(this.plugin._c,{vote:e,commentID:this.id,callback:function(){t.voteInProgress=!1}}),e){case"pos":this.posVotes++;break;case"neg":this.negVotes++}switch(this.vote){case"pos":this.posVotes--;break;case"neg":this.negVotes--}this.vote=e,this.updateVoteUI();var o={eventName:"commentVoted",categoryID:this.plugin._p.categoryID,streamID:this.plugin._p.streamID,comment:this.data,vote:e,mode:this.plugin.textMode};this.data.vote=this.vote,this.data.posVotes=this.posVotes,this.data.negVotes=this.negVotes,gigya.events.dispatchForWidget(o,this.plugin._p),o=gigya.utils.object.clone(o),o.eventName="commentVote",gigya.events.dispatchForWidget(o,this.plugin._p)},loginClicked:function(e){this.plugin.loginClicked(this.id,e)},updateVoteUI:function(){var e=document.getElementById("gig-vote-"+this.id);e&&e.originalHTML&&(e.innerHTML=e.originalHTML),this.plugin._user&&this.plugin._user.isConnected||(this.vote="none");var t=document.getElementById("gig-voteUp-"+this.id),i=document.getElementById("gig-voteDown-"+this.id),o=document.getElementById("gig-voteValue-"+this.id),n=document.getElementById("gig-voteValuePos-"+this.id),s=document.getElementById("gig-voteValueNeg-"+this.id);switch(this.vote){case"pos":t&&(t.className="gig-comments-button gig-comments-button-down gig-comments-button-vote gig-comments-button-vote-up"),i&&(i.className="gig-comments-button gig-comments-button-vote gig-comments-button-vote-down");break;case"neg":t&&(t.className="gig-comments-button gig-comments-button-vote gig-comments-button-vote-up"),i&&(i.className="gig-comments-button gig-comments-button-down gig-comments-button-vote gig-comments-button-vote-down");break;case"none":default:t&&(t.className="gig-comments-button gig-comments-button-vote gig-comments-button-vote-up"),i&&(i.className="gig-comments-button gig-comments-button-vote gig-comments-button-vote-down")}if(o){var a=this.posVotes-this.negVotes;a>0&&(a="+"+a),(isNaN(a)||0==a)&&(a="0"),o.innerHTML=a}if(n){var a=this.posVotes;a&&(a=a),(isNaN(a)||0==a)&&(a="0"),n.innerHTML=a}if(s){var a=this.negVotes;a&&(a=a),(isNaN(a)||0==a)&&(a="0"),s.innerHTML=a}},flag:function(){gigya.comments.flagComment(this.plugin._c,{commentID:this.id}),this.hideFlagDialog(!0),this.markAsFlagged(),this.plugin.saveState()},listenForCombination:function(e){if(!e)var e=window.event;if(40==e.keyCode&&e.shiftKey){var t=gigya.utils.stringUtils.format('<div class="gig-comments-container">Stream ID: {0}<br />Comment ID: {1}</div>',this.plugin._p.streamID,this.id);gigya.global.putGMBalloonNextTo(this.getContainer(),t,"Comment Data",400,100),e.preventDefault&&e.preventDefault()}},mouseOver:function(){var e=this;if(!this.plugin.isMobileUI){if(this.keydownDelegate||(this.keydownDelegate=function(t){return e.listenForCombination(t)}),document.attachEvent?document.attachEvent("onkeydown",this.keydownDelegate):window.addEventListener&&window.addEventListener("keydown",this.keydownDelegate,!1),!this.data.flagged){var t=document.getElementById("gig-flag-"+this.id);t&&(t.className="gig-comments-comment-flag gig-comments-comment-flag-over")}if(this.plugin._settings.allowCommentDeletion&&this.data.sender.isSelf&&!this.plugin._user.isGuest){var i=document.getElementById("gig-remove-"+this.id);i&&(i.className="gig-comments-comment-remove gig-comments-comment-remove-over")}}},mouseOut:function(){try{window.detachEvent?document.detachEvent("onkeydown",this.keydownDelegate):window.removeEventListener&&window.removeEventListener("keydown",this.keydownDelegate,!1)}catch(e){}if(!this.data.flagged){var e=document.getElementById("gig-flag-"+this.id);e&&(e.className="gig-comments-comment-flag")}if(this.plugin._settings.allowCommentDeletion&&this.data.sender.isSelf&&!this.plugin._user.isGuest){var t=document.getElementById("gig-remove-"+this.id);t&&(t.className="gig-comments-comment-remove")}},getHTML:function(){var e=this.commentText.replace(/\$/g,"&#36;");e=gigya.global.wbr(e,15).replace(/\n/g,"<br />");var t=gigya.global.getPhotoURL(this.photoURL);t&&""!=t||(t=o+"avatar_32x32.gif");var i="reviews"==this.plugin.textMode?"one_comment":"one_reply",n="reviews"==this.plugin.textMode?"num_comments":"num_replies",m=a(1==this.childrenCount?i:n,"%num",this.childrenCount||0);"fr"==this.plugin._p.lang&&"0"==this.childrenCount&&(m=a(i,"%num",this.childrenCount).replace("1","0"));
var g=this.isRemovedComment()?a("anonymous"):this.username,r=this.plugin.isMobileUI?10:42,l={id:this.plugin.containerID,commentID:this.id,newText:a("new"),photoDiv:this.plugin._templates.photoDiv32,replyButton:this.plugin._templates.replyButton,reply:a("reviews"==this.plugin.textMode?"comment":"reply"),onReplyClicked:this.plugin.getRefString()+".replyClicked('"+this.id+"')",classname:this.parentID&&0!=this.parentID?"comment-child":"comment",rootClass:"comment",paddingLeft:this.level*r+"px",childComments:s.drawComments(this.children,this.plugin,this.level+1),photoURL:t,body:e,username:gigya.utils.sanitize.sanitizeHTML(gigya.global.wbr(g,20)).replace(/\$/g,"&#36;"),mediaItemPlaceholder:this.plugin._templates.mediaItemPlaceholder,mediaItemURL:this.data.mediaItems&&this.data.mediaItems.length>0?this.data.mediaItems[0].url:"",commentReplyPlaceholder:this.plugin._templates.replyPlaceholder,errorPlaceholder:this.plugin._templates.errorPlaceholder,moderatorEditTextPlaceholder:this.data.moderatorEdit?this.plugin._templates.moderatorEditTextPlaceholder:"",outstandingBadgePlaceholder:10==this.data.moderatorRating?this.plugin._templates.outstandingBadgePlaceholder:"",moderatorEditText:a("reviews"==this.plugin.textMode?"review_edited_by_a_moderator":"comment_edited_by_a_moderator"),dottedLine:"",repliesCountPlaceholder:this.plugin._templates.repliesCountPlaceholder,replies_count:m,expand_collapse:"",userImage:this.plugin._templates.userImage,providerImage:"",comment:this.plugin._templates.comment,flag:"",vote:"",remove:"",onVoteUpClick:this.getRefString()+".voteUp()",onVoteDownClick:this.getRefString()+".voteDown()",onFlagClicked:this.getRefString()+".showFlagDialog()",onRemoveClicked:this.getRefString()+".showRemoveDialog()",onmouseover:this.getRefString()+".mouseOver()",onmouseout:this.getRefString()+".mouseOut()",ratings:"",title:this.commentTitle&&!this.isRemovedComment()?this.commentTitle:"",titlePlaceholder:this.commentTitle?this.plugin._templates.titlePlaceholder:""};if(10==this.data.moderatorRating&&(l.classname+=" gig-comments-comment-outstanding"),this.ratings&&!this.isRemovedComment()){var c=this.plugin._templates.rating;l.starClassName="gig-comments-star",l.ratings=gigya.utils.templates.fill(c,{ratingID:"overall",value:this.ratings._overall})}if(l.width=this.plugin._p.width-this.level*r+"px",l.marginLeft=this.level*r+10*(this.level-1),l.marginLeft<0&&(l.marginLeft=0),this.data.fromFacebook&&(l.classname+=" gig-comments-comment-facebook",l.comment=this.plugin._templates.facebookComment),!this.plugin._settings.enableFlagging||this.isTemp||this.isPostPending()||this.isRemovedComment()||(l.flag=this.plugin._templates.flag),l.remove=this.plugin._templates.remove,!this.plugin._settings.enableVoting||this.isTemp||this.isPostPending()||this.isRemovedComment()||(l.vote=gigya.utils.templates.fill(this.plugin._templates.vote,{commentID:this.id,allowNegativeVoting:this.plugin._settings.allowNegativeVoting,displayPosNegVotes:this.plugin._settings.displayPosNegVotes})),("readOnly"==this.plugin.streamInfo.status||"disabled"==this.plugin._settings.enableCommentBody||this.isRemovedComment())&&(l.replyButton=""),this.provider){var d=gigya.socialize._getProviderByName(this.provider);d&&6002!=d.ID&&(l.providerImage=this.plugin._templates.providerImage,l.providerImageURL=o+"providers/"+this.provider+"User_14x14.gif")}0==this.level&&(l.paddingLeft="0px",l.dottedLine=this.plugin._templates.dottedLine),this.level+1>this.plugin._settings.threadingDepth&&(l.replyButton=""),this.children&&this.children.length>0&&(l.expand_collapse=this.plugin._templates.expand_collapse,l.onExapndCollapse=this.getRefString()+".expandCollapse()");var u=(new Date).getTime(),p=new Date;p.setTime(this.timestamp);var h=(u-this.timestamp)/1e3/60/60;this.isRemovedComment()?l.dateString="":60*h<1?l.dateString=a("less_than_a_minute_ago"):h<1?l.dateString=1==Math.round(60*h)?a("one_minute_ago"):a("num_minutes_ago","%num",Math.round(60*h)):h<24?l.dateString=1==Math.round(h)?a("one_hour_ago"):a("num_hours_ago","%num",Math.round(h)):l.dateString=1==Math.round(h/24)?a("one_day_ago"):a("num_days_ago","%num",Math.round(h/24));var v=this.plugin._templates.commentContainer;return l.commentContainerId=this.containerID,(this.isTemp||this.isPostPending()||this.isRemovedComment())&&(l.replyButton=""),this.isPostPending()?(l.comment=this.plugin._templates.pendingComment,l.awaiting_moderation_text=a("reviews"==this.plugin.textMode&&0==this.level?"your_review_is_awaiting_moderation":"your_comment_is_awaiting_moderation")):this.isRemovedComment()&&(l.comment=this.plugin._templates.pendingComment,"pending"==this.status?l.awaiting_moderation_text=a("reviews"==this.plugin.textMode&&0==this.level?"this_review_is_awaiting_moderation":"this_comment_is_awaiting_moderation"):l.awaiting_moderation_text=a("reviews"==this.plugin.textMode&&0==this.level?"this_review_has_been_deleted":"this_comment_has_been_deleted")),gigya.utils.templates.fill(v,l)},getRefString:function(){return this.plugin.getRefString()+".commentsInstances['"+encodeURIComponent(this.id)+"']"}},n.prototype={_comments:null,_user:null,_settings:null,_state:null,_lastCommentTimestamp:null,_previousLastCommentTimestamp:null,_refreshTimeout:null,_p:null,_container:null,_isPaused:null,_templates:{},saveState:function(){gigya.utils.localStorage.setObject("gig-comments",this._state)},loadState:function(){this._state=gigya.utils.localStorage.getObject("gig-comments",{flags:{}})},loadTemplates:function(e){this._templates=s.templates.getMapCopy(),e&&(null!=e.loginCanvas_loggedOut&&null==e.loginCanvas_loggedOutWithGuest&&(e.loginCanvas_loggedOutWithGuest=e.loginCanvas_loggedOut,e.loginCanvas_loggedOut_mobile=e.loginCanvas_loggedOut),this._templates=gigya.utils.object.merge([this._templates,e]),this._p.ctag+="_templates")},checkForNewComments:function(){var e=this;"off"==this._settings.refreshMode||this._isPaused||gigya.comments.getStreamInfo(this._p,{callback:function(t){if(t.streamInfo){var i="reviews"==e.textMode?t.streamInfo.ratingCount:t.streamInfo.commentCount,o=i-e._commentCount;o>0&&(e._lastCommentTimestamp=t.streamInfo.lastCommentTimestamp,e._newCommentsCount=(e._newCommentsCount||0)+o,e.onHasNewComments("countOnly"==e._settings.refreshMode?o:e._newCommentsCount,i))}}})},onHasNewComments:function(e,t){var i=this,o=this._settings.refreshMode,n=this._templates.updatesStrip,s=this.getElementByCommentsClass("updatesStripPlaceholder");"countOnly"==o?(s.style.visibility="",s.innerHTML=gigya.utils.templates.fill(n,{text:1==e?a("1_new_comment_was_recently_posted"):a("num_new_comments_were_recently_posted","%num",e),linkText:a("click_to_show")}),gigya.utils.DOM.addEventListener(this.getElementByCommentsClass("updatesStrip-link"),"click",function(){i.getNewComments(),i._commentCount=t,s.style.visibility="hidden"})):"full"==o&&(this.getNewComments(),this._commentCount=t,s.innerHTML=gigya.utils.templates.fill(n,{text:1==e?a("1_comment_was_recently_added"):a("num_comments_were_recently_added","%num",e),linkText:a("pause_stream")}),gigya.utils.DOM.addEventListener(this.getElementByCommentsClass("updatesStrip-link"),"click",function(){i._isPaused=!i._isPaused,this.innerHTML=a(i._isPaused?"resume_stream":"pause_stream")}))},getElementByCommentsClass:function(e){return gigya.utils.DOM.getElementsByClass(this.container,"gig-comments-"+e)[0]},getNewComments:function(){this._getComments(!0)},_getComments:function(e){var t=this,i=gigya.utils.object.removeUndefined({categoryID:this._p.categoryID,streamID:this._p.streamID,includeSettings:!0,includeUserOptions:!0,threaded:!1,tags:this._p.filterTags});t.nopaging&&(i.threadLimit=0),t._next?e||(i.start=t._next):i.includeStreamInfo=!0,e&&this.streamInfo&&this.streamInfo.lastCommentTimestamp&&(i.since=this.streamInfo.lastCommentTimestamp),i.callback=function(o){if(0!=o.errorCode)t.broadcastedError||(t.container&&!t._next&&(t.container.innerHTML=""),gigya.events.dispatchErrorFromResponse(t._p,o),t.broadcastedError=!0);else{o.settings&&(t._settings=o.settings),t._settings||(t._settings={}),o.userComments&&(t._userComments=o.userComments),t.textMode="ratingsOnly"==t._settings.mode||"reviews"==t._settings.mode?"reviews":"comments";var n=!1;if(i.start?t._commentsRawData=t._commentsRawData.concat(o.comments):e?t._commentsRawData=o.comments.concat(t._commentsRawData):t._commentsRawData=o.comments,t._hasMore=o.hasMore,o.streamInfo&&(t.streamInfo=o.streamInfo,t._commentCount="reviews"==t.textMode?o.streamInfo.ratingCount:o.streamInfo.commentCount,t._lastCommentTimestamp=o.streamInfo.lastCommentTimestamp),o.userOptions&&(t.userOptions=o.userOptions),null!=t._p.useSiteLogin&&(t._settings.useSiteLogin=t._p.useSiteLogin),t._settings.useSiteLogin=gigya.utils.validation.isExplicitTrue(t._settings.useSiteLogin),t._comments=s.buildCommentsTree(t._commentsRawData,o.settings.sortBy,t,n),t._next)t.drawNewComments(t._comments,e);else{"bottom"==t._settings.newCommentPosition?document.getElementById(t.containerID).innerHTML='<div id="'+t.containerID+'-comments-header"></div><div class="gig-commentList" id="'+t.containerID+'-comments"></div><div id="'+t.containerID+'-comments-footer"></div><div class="gig-comments-separator"></div><div class="gig-comments-commentBox-bottom" id="'+t.containerID+'-commentBox"></div>':document.getElementById(t.containerID).innerHTML='<div id="'+t.containerID+'-commentBox"></div><div id="'+t.containerID+'-comments-header"></div><div class="gig-commentList" id="'+t.containerID+'-comments"></div><div id="'+t.containerID+'-comments-footer"></div>';var a=t._settings.refreshMode,m=t._settings.refreshInterval?1e3*t._settings.refreshInterval:0;m>0&&"off"!=a&&(this._refreshTimeout=window.setInterval(function(){t.checkForNewComments()},m)),t.redraw()}e||(t._next=o.next),t._drawFooter()}},gigya.comments.getComments(this._c,i)},getMoreComments:function(){var e=this._templates["showMoreComments-progress"];document.getElementById(this.containerID+"-comments-footer").innerHTML=gigya.utils.templates.fill(e,{id:this.containerID}),this._getComments()},_drawFooter:function(){var e=this._templates["comments-footer"],t={id:this.containerID,showMoreComments:"",onMoreCommentsClick:this.getRefString()+".getMoreComments()"};if(this._hasMore){var i=new Image;i.src=o+"progress_ani.gif",t.showMoreComments=this._templates.showMoreComments,t.show_more_comments=a("reviews"==this._settings.mode?"show_more_reviews":"ratingsOnly"==this._settings.mode?"show_more_ratings":"show_more_comments")}document.getElementById(this.containerID+"-comments-footer").innerHTML=gigya.utils.templates.fill(e,t)},_drawHeader:function(){var e=this._templates["comments-header"],t={id:this.containerID,comments_count:this._settings.disableCommentsCount?"":gigya.utils.templates.fill(this._templates.commentsCountWrapper,{}),rss:this._settings.disableRSS||this.isMobileUI?"":this._templates.rss,rss_text:a("rss"),subscribe_text:a("subscribe"),category_id:this._p.categoryID?this._p.categoryID:0,stream_id:this._p.streamID?encodeURIComponent(this._p.streamID):0,rssURL:this.streamInfo.rssURL,onRssClick:this.getRefString()+".onRssClick(true)",onSubscribeClick:this.getRefString()+".onSubscribeClick()",onRssRightClick:this.getRefString()+".onRssClick()"};document.getElementById(this.containerID+"-comments-header").innerHTML=gigya.utils.templates.fill(e,t),this.updateSubscribeUI(),this.updateCount()},onRssClick:function(e){return e?this.setStreamInfoIfNeeded(this.streamInfo.rssURL):void this.setStreamInfoIfNeeded()},onSubscribeClick:function(){var e=this,t=function(t){return e.onUnsubscribe(t)};if(this.streamInfo.isUserSubscribed)gigya.comments.unsubscribe(this._c,{callback:t});else if(this.unsubscribeToken)gigya.comments.unsubscribe(this._c,{unsubscribeToken:this.unsubscribeToken,callback:t});else{var i="reviews"==this.textMode?"review":"comment";this.showSubscribeDialog(a("enter_your_email_to_subscribe_to_new_"+i+"s_in_this_stream_colon"),a("subscribe"),this.getRefString()+".subscribe")}},onFollowClicked:function(){if(this.userOptions&&"immediate"==this.userOptions.replyNotifications)this.unfollow();else{var e="reviews"==this.textMode?"review":"comment",t=a("review"==e?"enter_your_email_to_receive_notifications_when_someone_replies_to_your_comments_colon":"enter_your_email_to_receive_notifications_when_someone_replies_to_your_"+e+"s_colon");this.showSubscribeDialog(t,a("follow"),this.getRefString()+".follow")}},updateFollowStatus:function(){var e=this;gigya.comments.getUserOptions(this._c,{callback:function(t){403005==t.errorCode&&(t.userOptions={}),t.userOptions&&(e.userOptions=t.userOptions,e.updateFollowUI())}})},updateFollowUI:function(){var e=document.getElementById(this.containerID+"-followLink");if(e)if(!this._user.isConnected&&!this._user.isGuest||this._user.isTempUser)e.style.display="none";else{var t=this.userOptions&&"immediate"==this.userOptions.replyNotifications;e.className=t?"gig-comments-follow gig-comments-following":"gig-comments-follow",e.style.display="",e.title=t?"":a("reviews"==this.textMode?"notify_me_when_someone_comments_on_my_review":"notify_me_when_someone_replies_to_my_comments"),e.innerHTML=a(t?"following":"reviews"==this.textMode?"follow_replies_to_my_reviews":"follow_replies_to_my_comments"),e.onmouseover=t?function(){t&&(this.innerHTML=a("unfollow")),this.className="gig-comments-follow gig-comments-unfollow"}:null,e.onmouseout=t?function(){t&&(this.innerHTML=a("following")),this.className="gig-comments-follow gig-comments-following"}:null}},follow:function(e){var t=document.getElementById(this.containerID+"_subscribeTextbox");!e&&t&&(e=t.value),this.hideSubscribeDialog(),gigya.comments.setUserOptions(this._c,{replyNotifications:"immediate",notificationsEmail:e,notificationsLanguage:this._c.lang}),this.userOptions||(this.userOptions={}),this.userOptions.replyNotifications="immediate",this.updateFollowUI()},unfollow:function(){gigya.comments.setUserOptions(this._c,{replyNotifications:"disabled"}),this.userOptions.replyNotifications="disabled",this.updateFollowUI()},showSubscribeDialog:function(e,t,i){this.hideSubscribeDialog();var o=this._templates.subscribeDialog,n={notifications_settings:a("notifications_settings"),enter_your_email:e,subscribe_text:t,onCancel:this.getRefString()+".hideSubscribeDialog()",onSubscribe:this.getRefString()+".onSubscribeOK("+i+")",please_provide_a_valid_email_address:a("please_provide_a_valid_email_address"),textboxID:this.containerID+"_subscribeTextbox",buttonID:this.containerID+"_subscribeTextboxButton",errorPlaceholderID:this.containerID+"_subscribeErrorPlaceholder",onKeyUp:this.getRefString()+".subscribeEmailKeyUp(event)",bodyID:this.containerID+"_subscribeBody",defaultEmail:this._user.email?this._user.email:""},s=this.containerID+"-subscribe",m=gigya.utils.DOM.createTopLevelDiv(s+"_container");m.style.position="absolute",m.className="gig-comments-container",m.innerHTML=gigya.utils.templates.fill(o,n),gigya.utils.DOM.setSize(m,390,m.offsetHeight,!0)},onSubscribeOK:function(e){var t=document.getElementById(this.containerID+"_subscribeTextbox");if(gigya.pluginUtils.validation.isEmailValid(t.value))e.apply(this);else{var i=document.getElementById(this.containerID+"_subscribeErrorPlaceholder");i&&(i.style.visibility=""),t.focus&&t.focus()}},hideSubscribeDialog:function(){var e=document.getElementById(this.containerID+"-subscribe_container");e&&e.parentNode.removeChild(e)},subscribeEmailKeyUp:function(e){var t=(document.getElementById(this.containerID+"_subscribeTextbox"),document.getElementById(this.containerID+"_subscribeErrorPlaceholder"));t&&(t.style.visibility="hidden");var i;e&&e.which?(e=e,i=e.which):(e=event,i=e.keyCode);var o=document.getElementById(this.containerID+"_subscribeTextboxButton");13==i&&o&&o.onclick()},showConfirmationDialog:function(e,t){var i=this,o=this._templates.confirmationDialog,n={text:t,title:e,onCancel:this.getRefString()+".hideConfirmationDialog()"},s=this.containerID+"-confirmation",a=gigya.utils.DOM.createTopLevelDiv(s+"_container");a.style.position="absolute",a.className="gig-comments-container",a.innerHTML=gigya.utils.templates.fill(o,n),gigya.utils.DOM.setSize(a,390,150,!0),window.setTimeout(function(){i.hideConfirmationDialog()},3e3)},hideConfirmationDialog:function(){var e=document.getElementById(this.containerID+"-confirmation_container");e&&e.parentNode.removeChild(e)},subscribe:function(){var e=document.getElementById(this.containerID+"_subscribeTextbox");if(e){var t=this;gigya.comments.subscribe(this._c,{email:e.value,callback:function(e){t.onSubscribe(e)}}),this.hideSubscribeDialog();var i="reviews"==this.textMode&&0==this.level?"review":"comment",o='<div class="gig-comments-dialog-subscribe-okIcon"></div>'+a("thank_you_for_subscribing")+"<br />"+a("new_"+i+"s_will_be_sent_directly_to_your_email_inbox");this.showConfirmationDialog(a("notifications_settings"),o)}},updateSubscribeStatus:function(){if(!this._settings.disableRSS){var e=this;this._user.isConnected?gigya.comments.getStreamInfo(this._c,{callback:function(t){t.streamInfo&&(e.streamInfo=t.streamInfo,e.updateSubscribeUI())}}):(e.streamInfo.isUserSubscribed=!1,e.updateSubscribeUI())}},updateSubscribeUI:function(){var e=document.getElementById(this.containerID+"-subscribeLink");if(e){var t=a(this.streamInfo.isUserSubscribed||this.unsubscribeToken?"unsubscribe":"subscribe");e.title=e.innerHTML=t}},onSubscribe:function(e){e&&e.unsubscribeToken&&(this.unsubscribeToken=e.unsubscribeToken),e.unsubscribeToken||(this.streamInfo.isUserSubscribed=!0),this.updateSubscribeUI()},onUnsubscribe:function(e){0==e.errorCode&&(this.showConfirmationDialog(a("notifications_settings"),a("you_have_successfully_unsubscribed")),delete this.unsubscribeToken,this.streamInfo.isUserSubscribed=!1,this.updateSubscribeUI())},setStreamInfoIfNeeded:function(e){var t=this._p.streamTitle;t||(t=document.title),t&&""!=t||(t="Site");var i=this._p.streamURL;i||(i=document.location.href);var o=this;return!(!this.streamInfo.streamURL||this._p.streamInfoSig&&(t!=this.streamInfo.streamTitle||i!=this.streamInfo.streamURL))||(gigya.comments.setStreamInfo(this._c,{streamTitle:t,streamURL:i,callback:function(){o.streamInfo.streamTitle=t,o.streamInfo.streamURL=i,e&&(document.location=e)}}),!1)},_drawComments:function(){this.lastReplyId=null,this._drawHeader(),this._drawFooter();var e=s.drawComments(this._comments,this);document.getElementById(this.containerID+"-comments").innerHTML=e;for(var t in this.commentsInstances){var i=this.commentsInstances[t];this._settings.repliesCollapsed&&i.collapse(),this._state&&this._state.flags&&this._state.flags[t]&&i.markAsFlagged(),i.updateVoteUI()}},logout:function(){gigya.socialize.logout(this._c,{context:this._p.context})},guestLogout:function(){var e=document.getElementById(this.containerID+"-login");e&&e.parentNode.removeChild(e),document.cookie="_gig_comments_email=x;expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/",document.cookie="_gig_comments_nickname=x;expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/",this._user={UID:""},this._updateUserInfo()},guestClicked:function(e){var t=document.getElementById(e+"-guestUI");if(null!=t);else{var i=document.getElementById(e+"-guestDropdown");t=document.createElement("div"),t.id=e+"-guestUI";var o=gigya.global._GetElementPos(i);t.style.left=""+(gigya.localInfo.quirksMode?o.left-2:o.left)+"px",t.style.top=""+(o.top+i.offsetHeight-2+(gigya.localInfo.quirksMode?-2:0))+"px",t.className="gig-comments-container gig-comments-guestUI";var n=this._templates.guestBox,s={id:e+"-guestUI",nickname:a("nickname"),email:gigya.utils.sanitize.sanitizeAttribute(a(this._settings.isGuestEmailRequired?"email":"email_optional")),ok:a("ok"),email_not_displayed_publicly:a("email_not_displayed_publicly"),okButton:this._templates.okButton,guestErrorPlaceholder:this._templates.guestErrorPlaceholder,nicknameTextbox:this._templates["guest-nicknameTextbox"],emailTextbox:this._templates["guest-emailTextbox"],onGuestLogin:this.getRefString()+".guestLoginClicked('"+e+"-guestUI')"};t.innerHTML=gigya.utils.templates.fill(n,s),document.body.appendChild(t),t.fncHide=function(e){if(e){if(e.target&&e.target.id.indexOf(t.id)!=-1)return;if(e.srcElement&&e.srcElement.id.indexOf(t.id)!=-1)return}i.className="gig-comments-dropdown gig-comments-dropdown-guest",document.attachEvent?document.detachEvent("onclick",t.fncHide):document.addEventListener&&document.removeEventListener("click",t.fncHide,!1),t&&t.parentNode&&t.parentNode.removeChild(t),t=null},t.fncShow=function(){i.className="gig-comments-dropdown gig-comments-dropdown-guest gig-comments-dropdown-down gig-comments-dropdown-guest-down",window.setTimeout(function(){document.attachEvent?document.attachEvent("onclick",t.fncHide):document.addEventListener&&document.addEventListener("click",t.fncHide,!1)},50)},t.fncShow()}},getCommentByID:function(e){if(this.commentsInstances)return this.commentsInstances[e]},onRatingClick:function(e){var t=e.getAttribute("gig-baseid"),i=e.getAttribute("gig-ratingID");this.selectedRatings||(this.selectedRatings={}),this.selectedRatings[i]={value:e.getAttribute("gig-rating"),details:this.isMobileUI?"":e.getAttribute("gig-rating-details"),baseID:t},e.onmouseout(e),this.validatePost(null,!0)},onRatingMouseOver:function(e){if(!this.isMobileUI){for(var t=e.getAttribute("gig-rating"),i=e.getAttribute("gig-baseid"),o=0;o<5;o++){var n=document.getElementById(i+"_"+o);n&&(o<t?n.className="gig-comments-star-editable-empty gig-comments-star-editable-full":n.className="gig-comments-star-editable-empty")}var s=document.getElementById(e.getAttribute("gig-baseid")+"_details");s&&(s.innerHTML=e.getAttribute("gig-rating-details"))}},onRatingMouseOut:function(e){for(var t=(e.getAttribute("gig-rating"),e.getAttribute("gig-baseid")),i=e.getAttribute("gig-ratingID"),o=0;o<5;o++){var n=document.getElementById(t+"_"+o);n&&(this.selectedRatings&&this.selectedRatings[i]&&o<this.selectedRatings[i].value?n.className="gig-comments-star-editable gig-comments-star-editable-full":n.className="gig-comments-star-editable")}var s=document.getElementById(e.getAttribute("gig-baseid")+"_details");s&&(this.selectedRatings&&this.selectedRatings[i]?s.innerHTML=this.selectedRatings[i].details:s.innerHTML="")},clearRatings:function(){for(var e in this.selectedRatings){for(var t=this.selectedRatings[e].baseID,i=0;i<5;i++){var o=document.getElementById(t+"_"+i);o&&(o.className="gig-comments-star-editable")}var n=document.getElementById(t+"_details");n&&(n.innerHTML="")}this.selectedRatings={}},validatePost:function(e,t){var i=this.containerID;e&&(i=this.containerID+"-reply-"+e);var o=document.getElementById(i+"-validationError");if(!t||!o||"none"!=o.style.display&&""!=o.style.display){var n,s=this,m=function(){s.validatePost(e)},g=document.getElementById(i+"-commentTextarea"),r=document.getElementById(i+"-titleTextbox"),l=document.getElementById(i+"_rating__overall"),c=!0;return g&&(g.parentNode.parentNode.style.borderColor=""),r&&(r.style.borderColor=""),l&&(l.className="gig-comments-addComment-ratings"),!e&&"mandatory"!=this._settings.enableCommentBody.split("_")[1]||g&&""!=g.value.replace(/ /g,"").replace(/\n/g,"").replace(/\r/g,"")||(g.parentNode.parentNode.style.borderColor="#e70707",n=g,g.onchange=m,c=!1),"mandatory"==this._settings.enableCommentTitles.split("_")[1]&&r&&""==r.value.replace(/ /g,"").replace(/\n/g,"").replace(/\r/g,"")&&(r.style.borderColor="#e70707",n=r,r.onchange=m,c=!1),e||"mandatory"!=this._settings.enableRatings.split("_")[1]||this.selectedRatings&&this.selectedRatings._overall||(l.className="gig-comments-addComment-ratings gig-comments-addComment-ratings-error",c=!1),o&&(c?(o.style.display="none",o.innerHTML=""):(o.innerHTML=a("ratingsOnly"==this._settings.mode?"please_select_your_rating":"please_fill_required_fields"),o.style.display="block")),{v:c,el:n}}},postButtonClicked:function(e,t){var i=this.containerID;e&&(i=this.containerID+"-reply-"+e),this._user.isGuest&&(document.cookie="_gig_comments_locked=1; path=/",this._user.locked=!0);var o=document.getElementById(i+"-commentTextarea"),n=document.getElementById(i+"-titleTextbox"),s=o?gigya.pluginUtils.text.normalizeLinebreaks(o.value):"",m=n?n.value:null,g=this.validatePost(e);if(!g.v)return void(g.el&&g.el.focus());if(!this._user.isGuest&&!this._user.isConnected){var r=this,l=this.isMobileUI?i:i+"-postButton",c=this.isMobileUI?null:document.getElementById(l);return void this.loginClicked(l,c,function(){r.postButtonClicked(e,!0)},!this.isMobileUI)}if(n&&(n.value=""),o&&(o.value=""),!e){var d={};for(var u in this.selectedRatings)d[u]=parseInt(this.selectedRatings[u].value)}this.clearRatings();var p=this.saveCheckedProviders(i).join(","),h=(new Date).getTime(),v="pending_"+h,b=this.getCommentByID(e);null!=b&&b.closeReplybox();var f=this._user.thumbnailURL;f&&""!=f||(f=this._user.photoURL),f=gigya.global.getPhotoURL(f);var _=this._user.nickname;""==_&&(_="Anonymous");var x=this.getLoginProvider(),y={timestamp:h,commentText:s,threadTimestamp:h,ID:v,parentID:e,sender:{photoURL:f,loginProvider:x,name:_},isTemp:!0,commentTitle:m,isPost:!0};"reviews"==this.textMode&&"disabled"!=this._settings.enableRatings&&(y.ratings=d),1==this._settings.moderationState&&(y.isPending=!0);var r=this,C=gigya.utils.object.removeUndefined({categoryID:this._p.categoryID,streamID:this._p.streamID,cid:this._p.cid,commentText:s,parentID:e,commentTitle:m,ratings:d});this._user.isGuest&&(C.guestName=this._user.nickname,C.guestEmail=this._user.email);var w=gigya.utils.object.clone(C);if(w.guestName||(w.guestName=""),w.guestEmail||(w.guestEmail=""),w.eventName="beforeCommentSubmitted",0!=gigya.events.dispatchForWidget(w,this._p)){C=w,""==w.guestName&&delete w.guestName,""==w.guestEmail&&delete w.guestEmail;var k,I=this.addComment(y);k=e?document.getElementById("gig-replies-"+e):document.getElementById(this.containerID+"-comments"),"dateasc"==this._settings.sortBy.toLowerCase()?k.appendChild(I):k.insertBefore(I,k.firstChild),C.callback=function(t){if(r._user.isGuest&&r._drawCommentBox(),t.errorCode>0){var i;switch(t.errorCode){case 403037:i=a("only_one_review_per_product_is_allowed");break;default:i=a("an_error_has_occurred_please_try_again_later","%errorCode",t.errorCode)}var o=document.getElementById(r.containerID+"-error-"+v);o&&i&&(o.innerHTML=i),gigya.events.dispatchErrorFromResponse(r._p,t)}else{var n=gigya.utils.object.clone(y,!0);for(var g in t.comment)n[g]=t.comment[g];n.isTemp=!1,n.isPost=!0,"reviews"==r.textMode&&0!=n.level||r._commentCount++;for(var l=0;l<r._commentsRawData.length;l++)if(r._commentsRawData[l].ID==v){r._commentsRawData.splice(l,1);break}delete r.commentsInstances[v],r.addComment(n,I);var c=r.getCommentByID(n.ID);c.updateVoteUI(),r.updateCount(),e&&c.getParentComment().updateRepliesCount();var u={eventName:"commentSubmitted",streamID:r._p.streamID,categoryID:r._p.categoryID,commentText:s,comment:t.comment,mode:r.textMode};d&&(u.ratings=d),m&&(u.commentTitle=m),t.comment&&t.comment.providerPostIDs&&(u.providerPostIDs=t.comment.providerPostIDs),""!=r._user.UID?u.user=r._user:r._user.isGuest&&(u.guestUser={nickname:r._user.nickname,email:r._user.email}),"reviews"==r.textMode&&(r._userComments||(r._userComments=[]),r._userComments.push(t.comment),r._drawCommentBox()),gigya.events.dispatchForWidget(u,r._p)}},"dateasc"==this._settings.sortBy.toLowerCase()&&(this.nopaging=!0),C.userAction=this.getUserAction(y),C.enabledProviders=p,this._p.commentTags&&(C.tags=this._p.commentTags),!t&&p||(C.enabledProviders=" "),gigya.comments.postComment(this._c,C),this.setStreamInfoIfNeeded()}},addComment:function(e,t){"dateasc"==this._settings.sortBy.toLowerCase()?this._commentsRawData.push(e):this._commentsRawData.unshift(e),this._comments=s.buildCommentsTree(this._commentsRawData,this._settings.sortBy,this);var i=this.getCommentByID(e.ID),o=document.createElement("div");return o.innerHTML=s.drawComments([i],this,i.level),o=o.firstChild,t&&(t.parentNode.insertBefore(o,t),t.parentNode.removeChild(t)),o},drawNewComments:function(e,t){for(var i,o=0;o<e.length;o++){var n=e[o],a=n.getContainer();if(a)t&&n.children&&this.drawNewComments(n.children,t);else{var m=document.createElement("div");m.innerHTML=s.drawComments([n],this,n.level),a=m.firstChild;var g=document.getElementById("gig-replies-"+n.parentID);g||(g=document.getElementById(this.containerID+"-comments")),i?i.nextSibling?g.insertBefore(a,i.nextSibling):g.appendChild(a):g.insertBefore(a,g.firstChild),n.updateVoteUI(),n.updateRepliesCount(),t&&n.markAsNew(),this._settings.repliesCollapsed&&n.collapse(),this._state.flags[n.id]&&n.markAsFlagged()}i=a}this.updateCount()},updateCount:function(){var e=this.getElementByCommentsClass("commentList-header-commentsCount");if(e){var t="";this._settings.disableCommentsCount||null==this._commentCount||(t=1==this._commentCount?a("reviews"==this.textMode?"one_review":"one_comment"):a("reviews"==this.textMode?"num_reviews":"num_comments","%num",this._commentCount),"fr"==this._p.lang&&"0"==this._commentCount&&(t=a("reviews"==this.textMode?"one_review":"one_comment").replace("1","0"))),e.innerHTML=t}},getUserAction:function(e){var t=this._p.userAction;e.level>0&&(t=this._p.replyUserAction),t=t?t.clone():new gigya.socialize.UserAction,t.title&&""!=t.title||("reviews"!=this.textMode||e.level?t.title=a("commented_on_colon_pagetitle","%pageTitle",document.title):e.ratings&&e.ratings._overall?t.title=a("i_rated_pagetitle_as_rating_5","%rating",e.ratings._overall).replace("%pageTitle",document.title):t.title=a("my_review_on_colon_pagetitle","%pageTitle",document.title)),t.linkBack&&""!=t.linkBack||(t.linkBack=document.location.href),t.userMessage=e.commentText;var i={commentTitle:e.commentTitle,commentText:e.commentText,rating:e.ratings?e.ratings._overall:null};return i.ratingDescription=[a("i_hate_it"),a("i_dont_like_it"),a("its_ok"),a("i_like_it"),a("i_love_it")][i.rating-1],gigya.global.fillUserActionTemplate(t,i)},saveCheckedProviders:function(e){var t=[];if(this.isMobileUI){var i=document.getElementById(e+"-checkbox-provider-cb");if(i){var o=this.getLoginProvider();i.checked&&t.push(o),document.cookie="_gig_comments_cb_"+o+"="+(i.checked?1:0)+';expires=Wed, 01 Jan 2020 12:00:00 GMT";path=/;"'}}else for(var o in this._user.identities){var i=document.getElementById(e+"-checkbox-"+o+"-image");i&&(i.checked&&t.push(o),document.cookie="_gig_comments_cb_"+o+"="+(i.checked?1:0)+';expires=Wed, 01 Jan 2020 12:00:00 GMT";path=/;"')}return t},getSingleShareProvider:function(){var e=this.getLoginProvider();if(e&&gigya.socialize.getProvidersForRequiredCapabilities(gigya.socialize.getProvidersByName(e),["actions"]).length>0)return e;var t=gigya.socialize.getProvidersByName(this._p.enabledProviders?this._p.enabledProviders:"*");t=gigya.socialize.hideProvidersByName(t,this._p.disabledProviders?this._p.disabledProviders:"");var i=gigya.socialize.getProvidersForRequiredCapabilities(t,["actions"]);return i.length>0?i[0].name:t.length>0?t[0].name:void 0},getLoginProvider:function(){var e=this._user.loginProvider;if(!e)for(var t in this._user.identities){e=t;break}return e},checkboxClicked:function(e,t){var i=document.getElementById(e);if(i){var o=e.split("-"),n=this.isMobileUI?this.getSingleShareProvider():o[o.length-1],s=this._user.identities[n],a=s&&s.missingPermissions&&s.missingPermissions.toLowerCase().indexOf("actions")!=-1,m=document.getElementById(e+"-image"),g=(m?m.className:"",this.isMobileUI?i.checked:m.checked);if(g&&t)return;var r=e.indexOf("-reply-")!=-1?"replyBox":"commentBox";if(g||s&&!a)this.isMobileUI||(g?m.className="gig-comments-checkboxImage gig-comments-"+r+"-checkboxImage":m.className="gig-comments-checkboxImage gig-comments-"+r+"-checkboxImage gig-comments-checkboxImage-checked gig-comments-"+r+"-checkboxImage-checked",m.checked=!g);else{var l=this,c={pendingRegistration:this._p.pendingRegistration,cid:this._p.cid,context:this._p.context,permissions:"actions",provider:n};a?(c.callback=function(e){0==e.errorCode&&(l.isMobileUI?i.checked=!0:(m.checked=!0,m.className="gig-comments-checkboxImage gig-comments-"+r+"-checkboxImage gig-comments-checkboxImage-checked gig-comments-"+r+"-checkboxImage-checked"));
},gigya.socialize.requestPermissions(this._c,c)):(c.callback=function(e){e.user&&(l._user=e.user,this.isMobileUI?i.checked=!0:(m.checked=!0,m.className="gig-comments-checkboxImage gig-comments-"+r+"-checkboxImage gig-comments-checkboxImage-checked gig-comments-"+r+"-checkboxImage-checked"))},gigya.socialize.addConnection(this._c,c))}}},updateCheckboxesDisplay:function(){for(var e=0;e<this.arProviders.length;e++){var t=arProviders[e];if(this._user.identities&&this._user.identities[t.name]){var i=document.getElementById(this.containerID+"-checkbox-"+arProviders[e]);i.style.display="",this.lastReplyId&&(i=document.getElementById(this.containerID+"-reply-"+this.lastReplyId+"-checkbox-"+arProviders[e]),i&&(i.style.display=""))}}},isEmail:function(e){return e=e.replace(/(^[ ]+|[ ]+$)/g,""),!!gigya.global.isEmail(e)},guestLoginClicked:function(e){var t=document.getElementById(e+"-nickname"),i=document.getElementById(e+"-email");if(t.value.replace(/ /g,"").length<3||!t.watermarkCleared){var o=a("nickname_should_be_at_least_3_characters");document.getElementById(e+"-guestErrorPlaceholder").innerHTML=o}else if(!this._settings.isGuestEmailRequired&&!i.watermarkCleared||this.isEmail(i.value))document.cookie="_gig_comments_nickname="+escape(t.value)+"; path=/",""!=i.value&&i.watermarkCleared&&(document.cookie="_gig_comments_email="+escape(i.value)+"; path=/"),this._user=this._getGuestUser(),this._updateUserInfo();else{var o=a("please_provide_a_valid_email_address");document.getElementById(e+"-guestErrorPlaceholder").innerHTML=o}},closeLastReply:function(){null!=this.lastReplyId&&this.getCommentByID(this.lastReplyId).closeReplybox()},replyClicked:function(e,t){if(this.lastReplyId==e)return void this.closeLastReply();this._user;this.closeLastReply();var i=this.containerID+"-reply-"+e,o=this.buildCommentBoxItem(o,e);o.width=this._p.width;var n=this._templates.commentBox;document.getElementById(i).innerHTML=gigya.utils.templates.fill(n,o),document.getElementById(i).style.display="block",t&&(document.getElementById(i+"-commentTextarea").value=t);var s=document.getElementById(this.containerID+"-replybutton-"+e);s.className="gig-comments-button gig-comments-button-reply gig-comments-button-down gig-comments-button-reply-down",this._checkProviders(i);var a=document.getElementById(i+"-commentTextarea");a&&a.focus(),this.lastReplyId=e},buildCommentBoxItem:function(e,t){var i;t&&(i=this.getCommentByID(t).username),e||(e={});var n=this,m=this._user;t?(e.id=this.containerID+"-reply-"+t,e.rootClass="replyBox",e.closeIcon=this.isMobileUI?"":this._templates.closeIcon,e.onCloseClicked=this.getCommentByID(t).getRefString()+".closeReplybox()",e.onPostButtonClicked=this.getRefString()+".postButtonClicked('"+t+"')",e.post_a_new_comment=a("reviews"==this.textMode?"comment_on_username_review":"reply_to_username","%username",gigya.utils.sanitize.sanitizeHTML(gigya.global.wbr(i,20)))):(e.id=this.containerID,e.rootClass="commentBox",e.onPostButtonClicked=this.getRefString()+".postButtonClicked()",e.post_a_new_comment=a("reviews"==this.textMode?"post_your_review":"post_a_new_comment"),e.closeIcon=""),e.login=a(this.isMobileUI?"reviews"==this.textMode?"login_to_review":"login_to_comment":"login"),e.or=a("or"),e.guest=a("guest"),e.guestDropdown=this._settings.allowGuest?this._templates.guestDropdown:"",e.loginDropdown=this._templates.loginDropdown,e.userImage=this._templates.userImage,e.photoDiv=this._templates.photoDiv48,e.addComment=this._templates.addComment,e.postButton=this._templates.postButton,e.followLink=this.isMobileUI||t?"":this._templates.followLink,e.validationErrorPlaceholder=this._templates.validationErrorPlaceholder,e.ratings="",e.titleTextbox="",e.addCommentTextarea="",this._settings.enableCommentBody&&"disabled"==this._settings.enableCommentBody||(e.addCommentTextarea=this._templates.addCommentTextarea),e.maxLength=this._settings.maxCommentLength;var g="ratingsOnly"==this._settings.mode?"":'<span class="gig-comments-mandatoryMark">&#160;*</span>';if(!t){if(this._settings.enableRatings&&"disabled"!=this._settings.enableRatings){this._settings.ratings={_overall:a("overall_rating")};var r=this._templates.editableRating;for(var l in this._settings.ratings)e.ratings+=gigya.utils.templates.fill(r,{id:e.id+"_rating_"+l,ratingID:l,details:this.isMobileUI?[]:[a("i_hate_it"),a("i_dont_like_it"),a("its_ok"),a("i_like_it"),a("i_love_it")],name:this._settings.ratings[l]+":"+("mandatory"==this._settings.enableRatings.split("_")[1]?g:""),onClick:this.getRefString()+".onRatingClick(this)",onMouseOver:this.getRefString()+".onRatingMouseOver(this)",onMouseOut:this.getRefString()+".onRatingMouseOut(this)",actionAttribute:this.isMobileUI?"ontouchstart":"onclick"})}this._settings.enableCommentTitles&&"disabled"!=this._settings.enableCommentTitles&&(e.titleTextbox=this._templates.titleTextbox)}var c=this._templates.addCommentLabel,d=e.titleTextbox&&"reviews"==this.textMode?a("summary_colon"):"";""!=d&&"mandatory"==this._settings.enableCommentTitles.split("_")[1]&&(d+=g),e.titleLabel=""!=d?gigya.utils.templates.fill(c,{labelID:"titleLabel",labelText:d,rootClass:e.rootClass}):"";var u=t||!e.addCommentTextarea?"":"reviews"==this.textMode?a("review_colon"):"";""!=u&&"mandatory"==this._settings.enableCommentBody.split("_")[1]&&(u+=g),e.commentLabel=""!=u?gigya.utils.templates.fill(c,{labelID:"commentLabel",labelText:u,rootClass:e.rootClass}):"",e.providersCheckboxes=this._templates.providersCheckboxes,e.providersCheckboxesContent=this._templates.providersCheckboxesContent,e.onLoginClick=this.getRefString()+".loginClicked('"+e.id+"')",e.onGuestClick=this.getRefString()+".guestClicked('"+e.id+"')";var p=this._user.photoURL;p&&""!=p||(p=this._user.thumbnailURL),p=gigya.global.getPhotoURL(p),p&&""!=p||(p=o+"avatar_48x48.gif"),e.photoURL=p;var h=m.nickname;h&&(h=gigya.utils.sanitize.sanitizeHTML(gigya.global.wbr(h,20)).replace(/\$/g,"&#36;")),""==h&&(h="Anonymous"),e.username=h,e.providerImage="",e.drawProviders=function(){return n._drawProviders(e.id)},e.share_to=this.isMobileUI?"":a("share_to"),e.post=a("post"),e.onLogoutClick=this.getRefString()+".logout()",e.onCheckboxClicked=this.getRefString()+".checkboxClicked(this.id)",e.onFollowClicked=this.getRefString()+".onFollowClicked()",s.isSharePossible()||(e.share_to="",e.providersCheckboxes=""),this._user.isConnected||(e.share_to="");var v=this.getLoginProvider();if(v){var b=gigya.socialize._getProviderByName(v);b&&6002!=b.ID&&(e.providerImage=this._templates.providerImage,e.providerImageURL=o+"providers/"+v+"User_14x14.gif")}return this._settings.useSiteLogin&&(e.loginDropdown=this._templates.loginDropdownNative),this._user.locked?e.logoutLink="":e.logoutLink=this._templates.logoutLink,e.loginCanvas=this._templates.loginCanvas,this._user.isGuest||this._user.isConnected?this._user.isGuest?(e.logout=a("change"),e.onLogoutClick=this.getRefString()+".guestLogout()",e.loginCanvasContent=this._templates.loginCanvas_loggedIn_guest):(e.logout=a("logout"),e.onLogoutClick=this.getRefString()+".logout()",e.loginCanvasContent=this._templates.loginCanvas_loggedIn):this.isMobileUI?e.loginCanvasContent=this._templates.loginCanvas_loggedOut_mobile:this._settings.allowGuest?e.loginCanvasContent=this._templates.loginCanvas_loggedOutWithGuest:e.loginCanvasContent=this._templates.loginCanvas_loggedOut,e},loginClicked:function(e,t,i,o){if(this._settings.useSiteLogin)gigya.events.dispatchForWidget({eventName:"siteLoginClicked"},this._p);else{var n=document.getElementById(e+"-login"),s=document.getElementById(e+"-loginDropdown"),m=-1;if(t||(t=s,m=-2),!t)return;if(n)"none"!=n.style.display?n.fncHide():n.fncShow();else{var g=t.offsetWidth<140?140:t.offsetWidth;this.isMobileUI&&g<250&&(g=document.body.offsetWidth-6),n=document.createElement("div"),n.id=e+"-login",n.className="gig-comments-container gig-comments-loginUI",n.innerHTML=(this.isMobileUI?"":'<div class="gig-comments-loginUI-pleaseLogin" id="'+n.id+'-pleaseLogin">'+a("please_login")+"</div>")+'<div id="'+n.id+'-loginUI" class="gig-comments-loginUI-content"></div>',n.fncHide=function(e){if(e){if(e.target&&(e.target.id.indexOf(n.id)!=-1||e.target==t))return;if(e.srcElement&&(e.srcElement.id.indexOf(n.id)!=-1||e.srcElement==t))return}gigya.utils.DOM.hideByID(n.id),document.attachEvent?document.detachEvent("onclick",n.fncHide):document.addEventListener&&document.removeEventListener("click",n.fncHide,!1),s&&(s.className="gig-comments-dropdown gig-comments-dropdown-login"),n.fncHide=null,n&&n.parentNode&&n.parentNode.removeChild(n)},n.fncShow=function(){gigya.utils.DOM.showByID(n.id),window.setTimeout(function(){gigya.pluginUtils.DOM.removeElementOnDocClick(n,null,null)},50);var e=gigya.global._GetElementPos(t);n.style.left=""+(gigya.localInfo.quirksMode?e.left-2:e.left)-g+t.offsetWidth+"px",n.style.top=""+(e.top+(o?0:t.offsetHeight+m+(gigya.localInfo.quirksMode?-2:0)))+"px",parseInt(n.style.left)<0&&(n.style.left="3px"),s&&(s.className="gig-comments-dropdown gig-comments-dropdown-login gig-comments-dropdown-down gig-comments-dropdown-login-down")},document.body.appendChild(n);var r={pendingRegistration:this._p.pendingRegistration,context:this._p.context,permissions:"actions",UIConfig:this._p.addConnectionsUIConfig?this._p.addConnectionsUIConfig:this._p.loginUIConfig,sessionExpiration:this._p.sessionExpiration,enabledProviders:this._p.enabledProviders,disabledProviders:this._p.disabledProviders,containerID:n.id+"-loginUI",useHTML:!0,showTermsLink:!1,hideGigyaLink:!0,width:g-2,height:this.isMobileUI?200:65,buttonsStyle:this.isMobileUI?"fulllogo":"standard",cid:this._p.cid,timestamp:this._p.timestamp,signature:this._p.signature,onButtonClicked:function(){window.setTimeout(n.fncHide,1e3)},requiredCapabilities:"",onConnectionAdded:i,onLogin:i,buttonSize:this.isMobileUI?45:null,useLargeArrows:!!this.isMobileUI||null};gigya.socialize.showAddConnectionsUI(this._c,r),n.fncShow()}}},redraw:function(){if(this._settings&&this._user){var e=this._getGuestUser();!this._user.isConnected&&e.nickname&&this._settings.allowGuest&&(this._user=e),this._drawComments(),this._drawCommentBox(),this.updateFollowUI(),this.updateSubscribeUI(),this.firedLoadEvent||(this.firedLoadEvent=!0,gigya.events.dispatchForWidget({eventName:"load",version:i.comments.version},this._p),gigya.utils.DOM.enableSafeCopy(document.getElementById(this.containerID)))}},_updateUserInfo:function(e){var t=this.containerID;e&&(t=this.containerID+"-reply-"+e);var i=this.buildCommentBoxItem(i,e),o=document.getElementById(t+"-loginCanvas");o&&(o.innerHTML=gigya.utils.templates.fill(i.loginCanvasContent,i));var n=document.getElementById(t+"-providersCheckboxes");n&&(this._user.isConnected?(this.isMobileUI&&(n.innerHTML=gigya.utils.templates.fill(i.providersCheckboxesContent,i)),n.style.visibility="visible"):(n.innerHTML=gigya.utils.templates.fill(i.providersCheckboxesContent,i),n.style.visibility="hidden"));var s=document.getElementById(t+"-postButton");s&&(s.innerHTML=gigya.utils.templates.fill(i.postButton,i));var a=document.getElementById(t+"-shareTo");a&&(a.innerHTML=i.share_to),this._checkProviders(this.containerID);var m=document.getElementById(t+"-guestUI");m&&m.parentNode.removeChild(m);var g=document.getElementById(t+"-login");if(g&&g.parentNode.removeChild(g),this.lastReplyId&&e!=this.lastReplyId&&this._updateUserInfo(this.lastReplyId),!e){for(var r in this.commentsInstances)this.commentsInstances[r].updateVoteUI();this._updateSelfComments(),this.updateFollowStatus(),this.updateSubscribeStatus(),this.updateCheckboxesDisplay()}},_updateSelfComments:function(){if(this._settings.allowCommentDeletion||"reviews"==this.textMode){var e=this;gigya.comments.getUserComments(this._p,{includeReplies:!0,callback:function(t){if(t&&t.comments){e._userComments=t.comments;for(var i=0;i<t.comments.length;i++){var o=t.comments[i].ID;e.commentsInstances[o]&&(e.commentsInstances[o].data.sender.isSelf=!0)}}else{e._userComments=[];for(var o in e.commentsInstances)e.commentsInstances[o].data.sender.isSelf=!1}"reviews"==e.textMode&&e._drawCommentBox()}})}},_updateVotes:function(){if(this._settings.enableVoting){var e=this;gigya.comments.getUserVotes(this._c,{callback:function(t){if(t.userVotes)for(var i in e.commentsInstances){var o=e.getCommentByID(i);o.voteInProgress||(o.vote=t.userVotes[i],o.updateVoteUI())}}})}},_getGuestUser:function(){var e,t;this._settings.allowGuest&&(e=this._getCookie("_gig_comments_nickname"),t=this._getCookie("_gig_comments_email"),null!=e&&(e=unescape(e)),null!=t&&(t=unescape(t)));var i={UID:"",nickname:e,isGuest:null!=e,email:t,locked:this._getCookie("_gig_comments_locked")};return i},_getInfo:function(){var e=this,t={};t.oauth_token=this._p.oauth_token,t.cid=this._p.cid,t.callback=function(t){0==t.errorCode?(e._user=t.user,e.redraw()):e.broadcastedError||(this.container&&(this.container.innerHTML=""),gigya.events.dispatchErrorFromResponse(e._p,t),e.broadcastedError=!0)},gigya.socialize.getUserInfo(this._c,t)},_drawCommentBox:function(){var e,t=this.buildCommentBoxItem();if(!this._settings.allowMultipleReviewsPerUser&&this._userComments)for(var i=0;i<this._userComments.length;i++)if(!this._userComments[i].parentID){e=this._userComments[i];break}if("reviews"==this.textMode&&e){gigya.utils.object.add(t,{post_a_new_comment:a("your_review"),myRatingLabel:e.ratings&&e.ratings._overall?a("my_rating_colon"):"",mySummaryLabel:e.commentTitle?a("summary_colon"):"",myReviewLabel:e.commentText?a("review_colon"):"",rating:"",summary:e.commentTitle?e.commentTitle:"",review:e.commentText?e.commentText:""});var o=this._templates.rating;e.ratings&&e.ratings._overall&&(t.rating=gigya.utils.templates.fill(o,{value:e.ratings?e.ratings._overall:0,starClassName:"gig-comments-star-myRating"}));var n=this._templates.myRating;document.getElementById(this.containerID+"-commentBox").innerHTML=gigya.utils.templates.fill(n,t)}else if(null!=this._settings&&"readOnly"!=this.streamInfo.status&&!this._settings.readOnly){t.width=this._p.width;var n=this._templates.commentBox,s="",m=document.getElementById(this.containerID+"-commentTextarea");m&&(ommentText=m.value),document.getElementById(this.containerID+"-commentBox").innerHTML=gigya.utils.templates.fill(n,t),document.getElementById(this.containerID+"-commentTextarea")&&(document.getElementById(this.containerID+"-commentTextarea").value=s),this._checkProviders(this.containerID)}var g=document.getElementById(this.containerID+"-guestUI");g&&g.parentNode.removeChild(g);var r=document.getElementById(this.containerID+"-login");r&&r.parentNode.removeChild(r)},_getCookie:function(e){for(var t=document.cookie.split(";"),i=0;i<t.length;i++){for(var o=t[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(e))return o.substring(e.length+1,o.length)}return null},_checkProviders:function(e,t){var i=document.getElementById(e+"-providersCheckboxes");if(i&&this._user.isConnected&&(i.style.visibility="visible"),t||this._settings.shareToSNCheckboxChecked)if(this.isMobileUI){if(this._user.isConnected){var o=this.getSingleShareProvider(),n=this._user.identities[o];if(!n.missingPermissions||n.missingPermissions.toLowerCase().indexOf("actions")==-1){var s=this._getCookie("_gig_comments_cb_"+o);null!=s&&1!=s||this.checkboxClicked(e+"-checkbox-provider-cb",!0)}}}else for(var o in this._user.identities){var n=this._user.identities[o];if(!n.missingPermissions||n.missingPermissions.toLowerCase().indexOf("actions")==-1){var s=this._getCookie("_gig_comments_cb_"+o);null!=s&&1!=s||this.checkboxClicked(e+"-checkbox-"+o,!0)}}},_drawProviders:function(e){var t=[],i=this._p.enabledShareProviders?this._p.enabledShareProviders:this._p.enabledProviders;i||(i="*");var o=this._p.disabledShareProviders?this._p.disabledShareProviders:this._p.disabledProviders;o||(o=""),arProviders=gigya.socialize.getProvidersByName(i),arProviders=gigya.socialize.hideProvidersByName(arProviders,o),arProviders=gigya.socialize.getProvidersForRequiredCapabilities(arProviders,["actions"]);for(var n=[],s=[],m=0;m<arProviders.length;m++)this._user.identities&&this._user.identities[arProviders[m].name]?n.push(arProviders[m]):s.push(arProviders[m]);arProviders=n.concat(s),this.arProviders=arProviders;var g=this._p.minShareOptions?this._p.minShareOptions:2,r=Math.max(g,n.length);if(this.isMobileUI){var l=this.getSingleShareProvider();l=gigya.socialize.getProvidersByName(l)[0].displayName;var c={id:e+"-checkbox-provider",post_to_provider:a("post_to_provider","%provider",l)},d=this._templates["providerCheckbox-mobile"];t.push(gigya.utils.templates.fill(d,c))}else{for(var m=0;m<arProviders.length;m++){var u=arProviders[m],c={id:e+"-checkbox-"+u.name,iconURL:gigya._.getCdnResource("/gs/i/shareBar/icons/"+u.name+".png"),style:m>r-1?"display:none;":""},d=this._templates.providerCheckbox;t.push(gigya.utils.templates.fill(d,c))}arProviders.length>r&&t.push(gigya.utils.templates.fill(this._templates.moreLink,{more:a("more"),onClick:this.getRefString()+".showMoreProvidersDialog(this, '"+e+"')"}))}return t.join("")},showMoreProvidersDialog:function(e,t){for(var i=[],o=0;o<this.arProviders.length;o++){var n=document.getElementById(t+"-checkbox-"+arProviders[o].name);n&&"none"==n.style.display&&i.push(this.arProviders[o])}this.hideMoreProvidersDialog();for(var s=[],o=0;o<i.length;o++){var m=i[o];s.push(gigya.utils.templates.fill(this._templates.moreProvider,{providerName:m.displayName,iconWidth:"22px",onClick:this.getRefString()+".onMoreProviderClick('"+m.name+"','"+t+"')",iconURL:gigya._.getCdnResource("/gs/i/edit/"+m.name+".png")}))}var g=this._templates.moreProvidersDialog,r={more_share_destinations:a("more_share_destinations"),moreProvidersHTML:s.join(""),onCancel:this.getRefString()+".hideMoreProvidersDialog()"},l=this.containerID+"-moreProvidersDialog",c=gigya.utils.DOM.createTopLevelDiv(l+"_container");c.style.position="absolute",c.className="gig-comments-container",c.innerHTML=gigya.utils.templates.fill(g,r);var d=gigya.global._GetElementPos(e),u=gigya.utils.viewport.getScroll().top+gigya.utils.viewport.getInnerSize().h;d.top+c.offsetHeight>u?c.style.top=d.top-c.offsetHeight+"px":c.style.top=d.top+e.offsetHeight+"px",c.style.left=d.left+"px";var p=this;c.fncHide=function(){p.hideMoreProvidersDialog()},window.setTimeout(function(){document.attachEvent?document.attachEvent("onclick",c.fncHide):document.addEventListener&&document.addEventListener("click",c.fncHide,!1)},50)},hideMoreProvidersDialog:function(){var e=document.getElementById(this.containerID+"-moreProvidersDialog_container");e&&(e.parentNode.removeChild(e),document.detachEvent?document.detachEvent("onclick",e.fncHide):document.removeEventListener&&document.removeEventListener("click",e.fncHide,!1))},onMoreProviderClick:function(e,t){this.hideMoreProvidersDialog(),this.checkboxClicked(t+"-checkbox-"+e,!0)},start:function(){this.commentsInstances||(this.commentsInstances={});var e=this._p.deviceType?this._p.deviceType.toLowerCase():"desktop";this.isMobileUI="mobile"==e||"auto"==e&&gigya.localInfo.isMobile,(this._p.cssPrefix||1==s.instances_size)&&(gigya.global.addCSS(s.defaults.css,this._p.cssPrefix),this.isMobileUI?gigya.global.addCSS(s.defaults.mobileCSS,this._p.cssPrefix):gigya.global.addCSS(s.defaults.nonMobileCSS,this._p.cssPrefix),gigya.localInfo.isMobile&&gigya.localInfo.isSafari&&gigya.global.addCSS(".gig-comments-container * {-webkit-text-size-adjust:none;}",this._p.cssPrefix));var t=this._p.width;document.getElementById(this.containerID).style.width=this.isMobileUI?"100%":t+"px",document.getElementById(this.containerID).className="gig-comments-container",this.isMobileUI||(gigya.global.addCSS("#"+this.containerID+" textarea.gig-comments-replyBox-textarea {width:"+(gigya.localInfo.quirksMode?t-37:t-30)+"px}"),gigya.global.addCSS("#"+this.containerID+" textarea.gig-comments-commentBox-textarea {width:"+(gigya.localInfo.quirksMode?t-17:t-10)+"px}")),document.getElementById(this.containerID).innerHTML='<div class="gig-comments-progress"></div>',this._getInfo(),this._getComments();var i=this;gigya.socialize.addEventHandlers({listenerType:"component"},{listenerDescription:"listener for updating a comments widget",onLogout:function(){i._user=i._getGuestUser(),i._updateUserInfo()},onLogin:function(e){i._user=e.user,i._updateUserInfo(),i._updateVotes()},onConnect:function(e){var t=i._user.isConnected;i._user=e.user,t!=i._user.isConnected&&i._updateUserInfo(),i._updateVotes()},onDisconnect:function(e){i._user=e.user,i._user.isConnected||i._updateUserInfo()}})},getRefString:function(){return"gigya.comments.plugins.comments.instances['"+encodeURIComponent(this.id)+"']"}},i.comments={showCommentsUI:function(e,i,o){"undefined"!=typeof e.commentsServer&&(t=e.commentsServer),s.setDefaultTemplates(),s.lang=i.lang,s.createInstance(e,i,o)},instances:s.instances,version:"1",imgOnLoad:function(e,t){gigya.global.scaleImage(e,t,!0,function(){e.parentNode.style.visibility=""})}}}}(gigya.comments);
});

// Combined services: gigya.services.plugins.base, gigya.services.comments.plugins.comments
// Failed services: 