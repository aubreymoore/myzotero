window.__tnt||(window.__tnt={});
(function(m,n,d,g,v){var h=g.ads||(g.ads={}),t=function(a){switch(a){case "slow":return 1E3;case "medium":return 500;case "fast":return 250;case "instant":return 0;default:return 500}},q=function(a){var e=new d.Deferred;switch(a.start_open){case "1":k(a,0);if("0"!==a.auto_limit)setTimeout(function(){k(a)},1E3*a.auto_limit);else d(a.positionDiv).find(".tnt-expandable-small").on("click",function(){k(a)});break;case "2":d(a.positionDiv).on("mouseover mouseout",function(){k(a)});break;case "3":k(a,0);
d(a.positionDiv).find(".tnt-expandable-small").addClass("click-to-close");if("0"!==a.auto_limit)setTimeout(function(){k(a)},1E3*a.auto_limit),d(a.positionDiv).on("mouseover mouseout",function(){k(a)});else if(d(a.positionDiv).find(".tnt-expandable-small").hasClass("click-to-close"))d(a.positionDiv).find(".tnt-expandable-small").on("click hover",function(){k(a)});break;default:d(a.positionDiv).find(".tnt-expandable-small").on("click",function(){k(a)})}e.resolve(a);return e.promise()},u=function(a){var e=
new d.Deferred;a.clickuri&&(d(a.positionDiv).find(".tnt-expandable-big img").wrap('<a href="'+a.clickuri+'"></a>'),0!=a.start_open&&d(a.positionDiv).find(".tnt-expandable-small img").wrap('<a href="'+a.clickuri+'"></a>'));e.resolve(a);return e.promise()},r=function(a){var e=new d.Deferred;d(a.positionDiv).css({position:"relative"});e.resolve(a);return e.promise()},k=function(a,e){var c=new d.Deferred,b=d(a.positionDiv).find(".tnt-expandable-big"),f=0===e?e:t(a.transition_speed);switch(a.overlay_content){case "0":b.addClass("noOverlay");
break;case "1":b.addClass("overlay")}switch(a.transition_direction){case "left":b.css({position:"absolute",top:0,"z-index":999,right:a.width}).stop().animate({width:"toggle"},f);break;case "right":b.css({position:"absolute",top:0,left:a.width,"z-index":999}).stop().animate({width:"toggle"},f);break;case "up":b.css({position:"absolute",bottom:a.height,left:0,"z-index":999}).stop().slideToggle(f);break;default:b.css({left:0,"z-index":999}).stop().slideToggle(f)}c.resolve(a);return c.promise()};h.video=
function(a){if("_popup"==a.region)return!1;if(a.embed)g.video||(g.video={}),g.video.blox||(g.video.blox={}),g.video.blox.ads||(g.video.blox.ads={postroll:[],preroll:[]}),"post"==a.rolltype?g.video.blox.ads.postroll.push(a):g.video.blox.ads.preroll.push(a);else{var e=function(){var c="video/mp4";null!=a.asseturl.match(/\.flv\?/)&&(c="video/x-flv");d(a.positionDiv).addClass("tnt-video-ad-wrapper").append('<video class="tnt-video-ad vjs-ad video-js vjs-default-skin vjs-big-play-centered video-responsive"><source src="'+
a.asseturl+'" type="'+c+'" preload="metadata"/></video>').attr("data-videoclickuri",a.clickuri);a.autoplay=0<a.autoplay?!0:!1;a.volume/=100;videojs(d(a.positionDiv).find("video")[0],{preload:"metadata",controls:!0,fluid:!0,autoplay:a.autoplay,volume:a.volume},function(){function b(){g.trackEvent({category:"tnt-video-ad",action:"standalone playing",label:"user watching: "+player.src(),value:"1"});player.on("click",function(a){0.2<player.currentTime()&&(g.trackEvent({category:"tnt-video-ad",action:"standalone clicked",
label:"user clicked: "+player.src(),value:"1"}),m.open(decodeURIComponent(d(a.target).parents(".tnt-video-ad-wrapper").attr("data-videoclickuri"))),player.trigger("ended"))});player.one("ended",function(a){player.off("click");player.currentTime(player.duration());g.trackEvent({category:"tnt-video-ad",action:"standalone ended",label:"user watched: "+player.src(),value:"1"});player.trigger("__tnt.video.standalone.initialize")})}player=this;player.hasStarted_&&b(a);player.on("__tnt.video.standalone.initialize",
function(){player.one("play",function(c){b(a)})});player.trigger("__tnt.video.standalone.initialize")})};d(function(){var a=d(".video-ad").attr("data-video-js"),b=d(".video-ad").attr("data-video-swf"),f=d(".video-ad").attr("data-video-js-css"),g=d(".video-ad").attr("data-video-blox-css");"undefined"==typeof videojs?d.getScript(a,function(a,c,h){videojs.options.flash.swf=b;d("body").append('<link rel="stylesheet" href="'+f+'" />').append('<link rel="stylesheet" href="'+g+'" />');e()}):(videojs.options.flash.swf=
b,e())})}};h.expandable=function(a){l(a,'<div class="tnt-expandable-small" style="cursor: pointer"><img src="'+a.smallImage+'"/></div>'+('<div class="tnt-expandable-big" style="display: none;"><img src="'+a.largeImage+'" /></div>')).then(r(a)).then(u(a)).then(q(a)).then()};h.flashcurl=function(a){if("undefined"!==typeof a.clickuri)var e=a.clickuri.replace(/"/g,"&quot;");var c;c='<div class="small-ad">'+('<object type="application/x-shockwave-flash" data="'+a.smallFlash+'">');c+='<param name="wmode" value="opaque" />';
c+='<param name="movie" value="'+a.smallFlash+'" />';c+="</object>";c+="</div>";var b;b='<div class="large-ad">'+('<object type="application/x-shockwave-flash" data="'+a.largeFlash+'">');b+='<param name="wmode" value="opaque" />';b+='<param name="movie" value="'+a.largeFlash+'" />';b+="</object>";b+="</div>";l(a,a.clickuri?'<div class="hidden-sm hidden-xs page-curl page-curl-flash"><a target="_blank" href="'+e+'"><div class="cover"></div></a>'+c+b+'<div style="z-index: 997; display: block; background-color: #fff; top: 0px; right: 0px; position: absolute; height: 99%; width: 99%;"></div></div>':
'<div class="hidden-sm hidden-xs page-curl page-curl-flash"><div class="cover"></div>'+c+b+'<div style="z-index: 997; display: block; background-color: #fff; top: 0px; right: 0px; position: absolute; height: 99%; width: 99%;"></div></div>')};h.curl=function(a){if("undefined"!==typeof a.clickuri)var e=a.clickuri.replace(/"/g,"&quot;");var c='<div class="small-ad"><img src="'+a.smallImage+'"/></div>',b='<div class="large-ad"><img src="'+a.largeImage+'"/></div>';l(a,a.clickuri?'<div class="hidden-sm hidden-xs page-curl page-curl-image"><a target="_blank" href="'+
e+'"><div class="cover"></div></a>'+c+b+"</div>":'<div class="hidden-sm hidden-xs page-curl page-curl-image"><div class="cover"></div>'+c+b+"</div>")};h.html=function(a){a.width||(a.width=d(a.positionDiv).closest(".tncms-region-ads").prev().data("tnt-ads-tmp").width);l(a,a.html)};h.flash=function(a){var e=(d(a.positionDiv).width()<=a.width?d(a.positionDiv).width():a.width)/a.width,c=e*a.width,b=e*a.height,e="undefined"!==typeof a.clickuri[0]?"http://"+a.clickuri[0].replace(/"/g,"&quot;"):null,f="undefined"!==
typeof a.clickuri[1]?"http://"+a.clickuri[1].replace(/"/g,"&quot;"):null,c=""+('<object type="application/x-shockwave-flash" data="'+a.asseturl+'" width="'+c+'" height="'+b+'">');e&&!f?c+='<param name="flashvars" value="clickTAG='+encodeURIComponent(e)+'&clickTarget=_blank" />':e&&f&&(c+='<param name="flashvars" value="clickTAG='+encodeURIComponent(e)+"&clickTAG2="+encodeURIComponent(f)+'&clickTarget=_blank" />');c+='<param name="allowScriptAccess" value="always" /><param name="wmode" value="opaque" />';
c+='<param name="movie" value="'+a.asseturl+'" />';c+="</object>";l(a,c)};h.flashexpand=function(a){var e='<div style="width:'+a.width+"px; height:"+a.height+'px; " class="hidden-sm hidden-xs tnt-expandable-small" style="cursor: pointer"><object type="application/x-shockwave-flash" data="'+a.smallFlash+'" width="'+a.width+'" height="'+a.height+'"><param name="movie" value="'+a.asseturl+'" /><param name="wmode" value="opaque" /></object></div>',c='<div class="hidden-sm hidden-xs tnt-expandable-big" style="display: none;"><object type="application/x-shockwave-flash" data="'+
a.largeFlash+'" width="'+a.largewidth+'" height="'+a.largeheight+'"><param name="flashvars" value="clickTAG='+encodeURIComponent("http:"+a.clickuri)+'&clickTarget=_blank" /><param name="wmode" value="opaque" /><param name="allowScriptAccess" value="always" /><param name="movie" value="'+a.largeFlash+'" /></object></div>';l(a,e+c).then(r(a)).then(q(a)).then()};h.popup=function(a){function e(){d("#blox-ad-position-_popup1").remove();d("#BlackOutDiv").remove()}var c=n.createElement("div");c.setAttribute("id",
"BlackOutDiv");c.style.position="fixed";c.style.top=0;c.style.left=0;c.style.width="100%";c.style.height="100%";c.style.zIndex=99998;c.style.backgroundColor="black";c.style.opacity=0.9;c.style.filter="alpha(opacity=90)";var b;b='<span><i class="fa fa-2x fa-close"></i></span>';if("video"==a.type){var f="video/mp4";null!=a.asseturl.match(/\.flv\?/)&&(f="video/x-flv");a.clickuri&&(b+='<a style="display: block; height: 100%; position: absolute; width: 100%;" target="_blank" href="'+a.clickuri+'"></a>');
b+='<video class="tnt-popup-video" autoplay><source src="'+a.asseturl+'" type="'+f+'"/></video>'}else if("text"==a.type){f=p(a);if("undefined"===typeof f||null===f)f="Advertisement";if(a.clickuri){var g=a.clickuri.replace(/"/g,"&quot;");b+='<div class="tnt-text-ad-container"><a href="'+g+'" target="'+a.target+'">'+a.title+"</a><br/>"+a.text+'<br/><span class="tnt-text-ad-flag">'+f+"</span></div>"}else b+='<div class="tnt-text-ad-container"><strong>'+a.title+"</strong><br/>"+a.text+'<br/><span class="tnt-text-ad-flag">'+
f+"</span></div>"}else"flash"==a.type?(f="undefined"!==typeof a.clickuri[0]?"http://"+a.clickuri[0].replace(/"/g,"&quot;"):null,g="undefined"!==typeof a.clickuri[1]?"http://"+a.clickuri[1].replace(/"/g,"&quot;"):null,b+='<object type="application/x-shockwave-flash" data="'+a.asseturl+'" width="'+a.width+'" height="'+a.height+'">',f&&!g?b+='<param name="flashvars" value="clickTAG='+encodeURIComponent(f)+'&clickTarget=_blank" />':f&&g&&(b+='<param name="flashvars" value="clickTAG='+encodeURIComponent(f)+
"&clickTAG2="+encodeURIComponent(g)+'&clickTarget=_blank" />'),b+='<param name="allowScriptAccess" value="always" /><param name="wmode" value="opaque" />',b+='<param name="movie" value="'+a.asseturl+'" />',b+="</object>"):"image"==a.type?("undefined"!==typeof a.clickuri&&(f="http://"+a.clickuri.replace(/"/g,"&quot;")),b+=""===a.clickuri?'<img class="img-responsive" width="'+a.width+'" height="'+a.height+'" src="'+a.asseturl+'">':'<a target="'+a.target+'" href="'+f+'"><img class="img-responsive" width="'+
a.width+'" height="'+a.height+'" src="'+a.asseturl+'"></a>'):"html"==a.type?(b+='<div style="width: 100%; height: 100%; max-width:'+a.width+"px; max-height:"+a.height+'px;">',b+=a.html,b+="</div>"):"html5"==a.type&&(f=""+("//"+a.cdn+"/content/tncms/ads/__html5/"+a.uuid+"/"+a.html5_id+"/"+a.htmlfile),a.clickuri&&(f+="?clickTag="+encodeURIComponent(a.clickuri)),b+='<div style="width: 100%; height: 100%; max-width:'+a.width+"px; max-height:"+a.height+'px;">',b+='<iframe id="html5-ad-frame-'+a.uuid+'" width="'+
a.width+'" height="'+a.height+'" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="no" src="'+f+'">',b+="</iframe>",b+="</div>");b+="</div>";"undefined"!=typeof c.addEventListener?c.addEventListener("click",e,!1):("BackCompat"==n.compatMode&&(c.style.width="110%",c.style.height="110%",c.style.position="absolute"),c.attachEvent("onclick",e));n.getElementsByTagName("body")[0].appendChild(c);TNCMS.AdManager.renderAd(a);l(a,b)};h.image=function(a){if("undefined"!==typeof a.clickuri)var e=
a.clickuri.replace(/"/g,"&quot;");if("wallpaper"==a.display){var c="",e="",b=a.height,d=n.getElementsByTagName("body")[0],c=c+(d.style.backgroundImage="url("+a.asseturl+")"),c=c+(d.style.height=b+"px"),c=c+(d.className+=" wallpaper-ad ");a.clickuri&&(e+='<a href="'+a.clickuri+'" target="'+a.target+'" style="width:100%; height: 100%; display:block"></a>')}else e="anchor"==a.display?""===a.clickuri?'<a href="#" class="close" data-dismiss="alert"><span class="fa fa-close"></span></a><img style="width: '+
a.width+'px; height: auto; " src="'+a.asseturl+'" />':'<a href="#" class="close" data-dismiss="alert"><span class="fa fa-close"></span></a><a href="'+e+'" target="'+a.target+'" style="display:block"><img style="width: '+a.width+'px; height: auto; " src="'+a.asseturl+'" /></a>':""===a.clickuri?'<img src="'+a.asseturl+'" style="width: 100%;" />':'<a href="'+e+'" target="'+a.target+'" style="display:block"><img src="'+a.asseturl+'" style="width: 100%;" /></a>';l(a,e,c)};h.text=function(a){a.width||(a.width=
d(a.positionDiv).closest(".tncms-region-ads").prev().data("tnt-ads-tmp").width);var e=p(a);if("undefined"===typeof e||null===e)e="Advertisement";e=a.clickuri?'<div class="tnt-text-ad-container"><a href="'+a.clickuri.replace(/"/g,"&quot;")+'" target="'+a.target+'">'+a.title+"</a><br/>"+a.text+'<br/><span class="tnt-text-ad-flag">'+e+"</span></div>":'<div class="tnt-text-ad-container"><strong>'+a.title+"</strong><br/>"+a.text+'<br/><span class="tnt-text-ad-flag">'+e+"</span></div>";l(a,e)};h._resize=
function(){var a,e=d(m).width();d(m).on("resize",function(){d(m).width()!=e&&(clearTimeout(a),a=setTimeout(function(){h._render()},500),e=d(m).width())})};h._render=function(){d("div[data-tnt-ads]").each(function(a,e){var c=-1<e.id.indexOf("-debug-")?d("#"+e.id.replace("-debug","")):d(this),b=d(this).data("tnt-ads"),c=c.width()>=b.width,f=320>=b.width&&320==d(m).width(),g=728>=b.width&&768==d(m).width(),h=d(this).is(":visible"),k="wallpaper"==b.display,l="popup"==b.display&&!1==s;if((c||f||g)&&h||
k||l)s=!0,"position"==b.type&&TNCMS.AdManager.render({region:b.region,slot:b.slot,fold:b.fold,width:b.width,display:b.display})})};var p=function(a){if(d(a.positionDiv).closest(".tncms-region-ads").prev().attr("data-tnt-ads-tmp"))var e=d(a.positionDiv).closest(".tncms-region-ads").prev().data("tnt-ads-tmp").overline;else d(a.positionDiv).attr("data-tnt-ads")&&(e=d(a.positionDiv).data("tnt-ads").overline);return e},l=function(a,e){var c=new d.Deferred,b="";"anchor"==a.display&&(b+=" tnt-ads-anchor  alert ");
"popup"==a.display&&(b+=" tnt-ads-popup ");b+="tnt-"+a.type+"-ad-wrapper";b=["tnt-ads",b].join(" ");"wallpaper"==a.display?(d("#wallpaper-left").empty().append(e),d("#wallpaper-right").empty().append(e)):"popup"==a.display?d(a.positionDiv).empty().removeAttr("style").removeClass().addClass(b).css({"max-width":a.width+"px","max-height":a.height+"px"}).append(e):(d(a.positionDiv).empty().removeAttr("style").removeClass().addClass(b).css({"max-width":a.width+"px"}).append(e),320==d(m).width()&&320>=
a.width&&a.width>d(a.positionDiv).width()&&(b=Math.round((d(a.positionDiv).width()-a.width)/2),d(a.positionDiv).css({margin:"0 "+b+"px"})));"text"!=a.type&&(b=p(a))&&1>d(a.positionDiv).siblings(".tnt-ads-overline").length&&(b='<div class="tnt-ads-overline">'+b+"</div>",d(a.positionDiv).before(b));c.resolve(a);return c.promise()},s=!1})(window,document,jQuery,__tnt);
