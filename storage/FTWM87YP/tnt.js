var __tnt=window.__tnt||{};googletag=window.googletag||{},gptAdSlots=window.gptAdSlots||[],__tnt.ads=window.__tnt.ads||{},__tnt.ads.slots=__tnt.ads.slots||{},googletag.cmd=window.googletag.cmd||[],function(e,t,i,n,a){var d,r=function(){var i={};return i.characterCount=function(t){return 1==t?580:e.innerWidth<768?776:e.innerWidth<992?1164:1552},i.debugMode=function(){return/[?&]ads_log/.test(e.location.search)?!0:!1},i.filterSizes=function(t,i,n){var a=i.offsetWidth;return"/132916964/cen"===n&&(t=t.filter(function(e){return 2===e[0]&&1===e[1]?!1:!0})),e.innerWidth>=768&&(t=t.filter(function(e){return 320===e[0]&&50===e[1]||300===e[0]&&50===e[1]?!1:!0})),t=t.filter(function(e){return e[0]<=a?!0:!1})},i.getMeta=function(){for(var e=t.getElementsByTagName("meta"),i=0;i<e.length;i++)if("tncms:ads"===e[i].getAttribute("property"))return e[i].getAttribute("content");return!1},i.hasPrebid=function(t){var i=!1;if("undefined"!=typeof e.adUnits)for(var n in e.adUnits)if(e.adUnits.hasOwnProperty(n)&&e.adUnits[n].code==t)return i=!0,!1;return i},i.inViewport=function(i){if(t.getElementById(i)){var n=t.getElementById(i).getBoundingClientRect();return Math.round(n.top)>=0&&Math.round(n.left)>=0&&Math.round(n.bottom)<=(e.innerHeight||t.documentElement.clientHeight)&&Math.round(n.right)<=(e.innerWidth||t.documentElement.clientWidth)}},i.limitRefreshSizes=function(e,i){var n=t.getElementById(e).querySelector("iframe");if(n)for(var a=[],d=0;d<i.length;d++)if((2!==i[d][0]||1!==i[d][1])&&i[d][0]===n.offsetWidth&&i[d][1]===n.offsetHeight)return a.push(i[d]),a;return!1},i.log=function(t){e.console&&e.console.log(t)},i}(),o={_init:function(){try{var e=r.getMeta().split(","),t=-1!=e.indexOf("dmp")?!0:!1,i=-1!=e.indexOf("lazyload")?!0:!1,n=-1!=e.indexOf("refresh")?!0:!1,a=-1!=e.indexOf("smart")?!0:!1;(i||n||a)&&(a&&o.initAdInjection(),(i||n)&&o.getEligibleSlots(),t&&o.progTargeting(),o.observeAds())}catch(d){return f&&r.log(d),!1}},createAdTag:function(e){var i=t.createElement("div"),n=t.createElement("div"),a=t.createDocumentFragment();return i.id=e,i.className="tnt-ads dfp-smart-ad",n.className="tnt-ads-container text-center",a.appendChild(n),a.querySelector(".tnt-ads-container").appendChild(i),a},defineGAMSlot:function(e,t,i,d){n.cmd.push(function(){var r=n.sizeMapping().addSize([0,0],i).build();a[t]=n.defineSlot(e,[2,1],t).defineSizeMapping(r).setCollapseEmptyDiv(!0).addService(n.pubads()),a[t].setTargeting("pos",d)})},destroySlot:function(e){n.cmd.push(function(){n.destroySlots([a[e]])})},fetchAds:function(e){for(var t=[],i=[],d=0;d<e.length;d++)"blox"===e[d].vendor?t.push(e[d]):"gam"===e[d].vendor&&i.push(e[d]);if(t.length>0)for(var d=0;d<t.length;d++)TNCMS.AdManager.refresh({region:t[d].region});if(i.length>0){for(var o=[],s=[],l=[],d=0;d<i.length;d++)r.hasPrebid(i[d].id)&&(i[d].initLoad||i[d].biddingRefresh)?l.push(i[d].id):"undefined"!=typeof apstag&&(i[d].initLoad||i[d].biddingRefresh)?o.push(i[d].id):s.push(i[d].id),i[d].initLoad&&(i[d].initLoad=!1),i[d].viewableImpression&&(i[d].viewableImpression=!1);o.length>0&&n.cmd.push(function(){for(var e=[],t=0;t<o.length;t++)e.push(a[o[t]]);apstag.fetchBids({slots:e,timeout:2e3},function(){apstag.setDisplayBids(),n.pubads().refresh(e)})}),s.length>0&&n.cmd.push(function(){for(var e=[],t=0;t<s.length;t++)e.push(a[s[t]]);n.pubads().refresh(e)}),l.length>0&&pbjs_refreshBid(l)}},getEligibleSlots:function(){for(var e=t.querySelectorAll(".dfp-ad, .blox-ad, [data-tnt-ads-tmp]"),n=0;n<e.length;n++)if("fixed-big-ad-gallery"!=e[n].id&&"fixed-big-ad-paging-gallery"!=e[n].id)if("none"==e[n].style.display&&e[n].classList.contains("dfp-ad")||"none"==e[n].style.display&&e[n].classList.contains("blox-ad"))e[n].remove();else{var a=e[n].classList.contains("dfp-ad")?"gam":"blox",d=o.verifySlot(e[n],a);d&&(f&&r.log(d),i[d.id]=d)}},initAdInjection:function(){if("undefined"!=typeof __tnt.ads.dfp.dmp&&"undefined"!=typeof __tnt.ads.dfp.dmp.hideAudience&&"object"==typeof d&&d.length>0){for(var e=0;e<d.length;e++)d[e]=d[e].replace("keyword:","");if(__tnt.compareArray(d,__tnt.ads.dfp.dmp.hideAudience))return!1}var i=t.getElementById("asset-content"),n=i.querySelector(".asset-content"),a=n.childNodes;s=i.dataset.smartAdunit,a.length>0&&(l=r.filterSizes(c,n,s),o.insertAds(a))},insertAds:function(e){for(var t=1,n=0,a=0;a<e.length;a++)if("P"==e[a].tagName||"DIV"==e[a].tagName&&e[a].classList.contains("subscriber-preview")||"DIV"==e[a].tagName&&e[a].classList.contains("subscriber-only")){if("DIV"==e[a].tagName&&"P"!=e[a].firstChild.tagName)continue;var d="DIV"==e[a].tagName?e[a].firstChild:e[a],c=d.innerHTML.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim().length;if(n+=c,f){var h={"Paragraph Count":a,"Paragraph Length":c,"Character Count":n,"Character Count Minimum":r.characterCount(t)};r.log(h)}if(n>=r.characterCount(t)){var g="tnt-smart-ad-"+t,u={alwaysLoad:!1,id:g,initLoad:!1,count:t,lazyload:!0,refresh:!0,timestamp:null,type:"injected",vendor:"gam",viewableImpression:!1};1===t&&(u.delayRefresh=!0),d.parentNode.insertBefore(o.createAdTag(g,t),d.nextSibling),f&&r.log("Ad was inserted after paragraph "+a+". Eligible character count was "+n),o.defineGAMSlot(s,g,l,["fixed_automatic_ad","fixed_automatic_ad"+t]),i[g]=u,t++,n>0&&(n=0)}}},interactionRefresh:function(){var n=[],a=Date.now(),d=0;for(var c in i)if(i.hasOwnProperty(c)&&r.inViewport(i[c].id)&&null!=i[c].timestamp)if(e.innerWidth>=992&&"injected"===i[c].type){if(i[c].delayRefresh){var h=t.getElementById("asset-photo-carousel");if(h){var g=h.querySelector(".owl-carousel");if(!g)continue;if(!g.classList.contains("owl-loaded"))continue;i[c].delayRefresh=!1,i[c].timestamp=a}else i[c].delayRefresh=!1}if(i[c].timestamp<a-2e4)if(i[c].viewableImpression===!0){var u=r.limitRefreshSizes(i[c].id,l);u?(t.getElementById(i[c].id).style["min-height"]=u[0][1]+"px",o.destroySlot(i[c].id),o.defineGAMSlot(s,i[c].id,u,["fixed_automatic_ad","fixed_automatic_ad"+i[c].count]),n.push(i[c]),f&&r.log("Ad "+i[c].id+" is visible and has been refreshed.")):f&&r.log("Ad "+i[c].id+" is visible but could not be refreshed. The size of the initally loaded ad could not be determined."),i[c].timestamp=a}else f&&r.log("Ad: "+i[c].id+" cannot be refreshed until the ad is visible.");else f&&(d=Math.round((i[c].timestamp+2e4-a)/1e3*10)/10,r.log("Ad "+i[c].id+" is visible and has a remaining life of "+d+" seconds."))}else e.innerWidth>=992||e.innerWidth<992&&i[c].mobileRefresh?i[c].timestamp<a-2e4?"gam"===i[c].vendor&&1==i[c].viewableImpression||"blox"===i[c].vendor?(f&&r.log("Ad: "+i[c].id+" is visible and has been refreshed."),i[c].timestamp=a,n.push(i[c])):f&&r.log("Ad: "+i[c].id+" cannot be refreshed until the ad is visible."):f&&(d=Math.round((i[c].timestamp+2e4-a)/1e3*10)/10,r.log("Ad: "+i[c].id+" is visible and has a remaining life of "+d+" seconds.")):(f&&r.log("Ad "+i[c].id+" : Ad refresh is disabled in the mobile viewport."),delete i[c]);n.length>0&&o.fetchAds(n)},observeAds:function(){var n=[],a=new IntersectionObserver(function(e){var t=[];e.forEach(function(e){(i[e.target.id].alwaysLoad||e.intersectionRatio>0)&&((i[e.target.id].alwaysLoad||i[e.target.id].lazyload)&&(f&&i[e.target.id].alwaysLoad&&r.log("Ad "+e.target.id+" has been immediately loaded due to header bidding."),f&&i[e.target.id].lazyload&&r.log("Ad "+e.target.id+" is visible and has been lazyloaded."),i[e.target.id].initLoad=!0,t.push(i[e.target.id])),i[e.target.id].refresh&&(i[e.target.id].timestamp=Date.now()),a.unobserve(e.target))}),t.length>0&&o.fetchAds(t)},{rootMargin:"300px"});for(var d in i)i.hasOwnProperty(d)&&n.push(t.getElementById(i[d].id));n.forEach(function(e){a.observe(e)}),e.addEventListener("scroll",o.throttle(o.interactionRefresh,500)),e.addEventListener("focus",o.throttle(o.interactionRefresh,500));var s=Array.from(t.querySelectorAll(".photo-carousel-control"));s.forEach(function(e){e.addEventListener("click",o.interactionRefresh)})},progTargeting:function(){if("undefined"!=typeof __tnt.ads.dfp.dmp&&"object"==typeof d){for(var e=0;e<d.length;e++)d[e]=d[e].replace("keyword:","");n.cmd.push(function(){n.pubads().setTargeting("las",d)})}},throttle:function(t,i){var n=this,a=Date.now(),d=0;return function(){var r=e.pageYOffset;r>d&&a+i-Date.now()<0&&(t.apply(n),a=Date.now()),d=r}},verifySlot:function(e,t){try{var i={alwaysLoad:!1,id:e.id,initLoad:!1,lazyload:!1,refresh:!1,timestamp:null,type:"inline",vendor:t,viewableImpression:!1};if("gam"===t){if(!e.id)throw["No id on the "+t+"-ad div:",e.outerHTML];if(i.id=e.id,!(e.dataset.lazy||e.dataset.refresh||e.dataset.biddingRefresh||e.dataset.alwaysLoad))throw["Ad has already been loaded and is not refreshable",e.outerHTML];e.dataset.lazy&&(i.lazyload=!0),e.dataset.refresh&&(i.refresh=!0,e.dataset.mobileRefresh&&(i.mobileRefresh=!0)),e.dataset.biddingRefresh&&(i.biddingRefresh=!0),e.dataset.alwaysLoad&&(i.alwaysLoad=!0)}else if("blox"===t){var n;if(!e.dataset.tntAds&&!e.dataset.tntAdsTmp)throw["No settings defined the blox-ad div:",e.outerHTML];if(n=JSON.parse(e.dataset.tntAds?e.dataset.tntAds:e.dataset.tntAdsTmp),!n.refresh)throw["Ad has already been loaded and is not refreshable",e.outerHTML];i.refresh=!0,i.id="position"==n.type?"blox-ad-position-"+n.region+n.slot:"blox-ad-position-"+n.region+"1",i.region=n.region}return i}catch(a){for(var d=0;d<a.length;d++)f&&r.log(a[d]);return!1}}},s="",l=[],f=r.debugMode(),c=[[970,250],[970,90],[728,90],[300,250],[320,50],[300,50],[2,1]];"undefined"==typeof __tnt.ads.dfp||"undefined"==typeof __tnt.ads.dfp.dmp||"undefined"==typeof __tnt.ads.dfp.dmp.hideAudience&&-1==r.getMeta().split(",").indexOf("dmp")?t.addEventListener("DOMContentLoaded",o._init):e.addEventListener("tnt-dmp-audience-extracted",function(e){d=e.detail.userAudience,o._init()})}(window,document,__tnt.ads.slots,googletag,gptAdSlots);
//# sourceMappingURL=tnt.ads.core.7db7c30ec731c03d1ae42ec7770ac1ed.js.map