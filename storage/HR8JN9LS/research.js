(window.wjp=window.wjp||[]).push([[720],{5726:function(e,t,n){},5727:function(e,t,n){},5728:function(e,t,n){},5736:function(e,t){},5737:function(e,t){},5738:function(e,t){},5739:function(e,t){},5801:function(e,t,n){"use strict";var r=n(10),o=n(18),a=n(6),i=n(3),c=(n(1),n(0)),s=n.n(c),l=n(19),u=n(5452),d=n(850),f=n(21),h=n(168),m=n(9),p=n.n(m),g=n(755),v=n.n(g),b=n(293),P=n.n(b),w=n(35),R=n(1504),y=n(438),E=new p.a("react-pdf-viewer"),O=function(e){var t=e.pageNumber;return s.a.createElement("div",E("page-header"),s.a.createElement(f.a,{color:"grey-700"},"Page ",t))},j=n(169),L=n(201),S=n(31),M=n(1771),C=n(12);function I(e,t,n){var r,o,a=function(e){return function(e,t){var n=e.split(",").map((function(e){return Math.round(e*t)})),r=n[0],o=n[1];return{left:r,top:o,right:r+n[2],bottom:o+n[3]}}(function(e){return e.replace(/[()]/g,"")}(e),n)};switch(e){case"rectangle":o=[a(t)];break;case"multirectangle":o=(null!=(r=t.match(/\([^()]+\)/g))?r:[]).map(a);break;default:throw new Error("Invalid rg-path type. Must be one of type 'rectangle' or 'multirectangle'")}return o}var D=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).processedReferences=void 0,t.state={previouslyHoveredReference:void 0,hoveredReferenceTimeoutId:void 0,cursorNeedsManualHoverStyle:void 0},t.setCursorManualHoverStyle=function(e){if(t.state.cursorNeedsManualHoverStyle!==e){var n=window.getComputedStyle(event.target,null).getPropertyValue("cursor");(e&&"pointer"!==n||!e&&("pointer"===n||"help"===n))&&t.setState({cursorNeedsManualHoverStyle:e})}},t.handleMouseMove=function(e){if(t.processedReferences){var n=t.props,a=n.dispatch,i=n.hoveredMilestones,c=t.state.previouslyHoveredReference,s=e.currentTarget.getBoundingClientRect(),l=e.clientX-s.left,u=e.clientY-s.top,d=t.processedReferences.map((function(e){var t=e.contexts,n=Object(o.a)(e,["contexts"]);return Object(r.a)({context:t.filter((function(e){return e.rectangles.filter((function(e){var t=e.left,n=e.top,r=e.right,o=e.bottom;return t<=l&&l<r&&n<=u&&u<o})).length>0}))[0]},n)})).filter((function(e){return!!e.context}));if(d.length>0){var f=d[0];if(t.setCursorManualHoverStyle(!0),t.getReferenceId(f)!==t.getReferenceId(c)){t.clearTimeout();var h=window.setTimeout((function(){f.context.isInList?i.referenceInList&&Object(C.a)(i.referenceInList):i.reference&&Object(C.a)(i.reference),a(Object(y.D)(f)),a(Object(y.B)(y.b))}),500);t.setState({hoveredReferenceTimeoutId:h,previouslyHoveredReference:f})}}else if("pointer"===window.getComputedStyle(e.target,null).getPropertyValue("cursor")){t.clearTimeout();var m=window.setTimeout((function(){i.linkNotReference&&Object(C.a)(i.linkNotReference),a(Object(y.D)(void 0)),a(Object(y.B)(y.b))}),500);t.setState({hoveredReferenceTimeoutId:m,previouslyHoveredReference:void 0})}else t.clearTimeout(),t.setState({previouslyHoveredReference:void 0}),t.setCursorManualHoverStyle(!1)}},t}Object(i.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(){var e=this.props,t=e.pageNumber,n=e.references,a=e.dimensionsCoefficient;n&&(this.processedReferences=n.map((function(e){var n=e.contexts,i=Object(o.a)(e,["contexts"]);return Object(r.a)({contexts:n.filter((function(e){return e.documentPath.value===t})).map((function(e){var t=e.documentPath,n=Object(o.a)(e,["documentPath"]),i=t.subPath,c=I(i.type,i.value,a);return Object(r.a)({rectangles:c},n)})).filter((function(e){var t=e.rectangles;return Array.isArray(t)}))},i)})).filter((function(e){return e.contexts.length>0})))},n.getReferenceId=function(e){if(e)return e.publication?e.publication.id:e.legacyCitation.id},n.clearTimeout=function(){var e=this.state.hoveredReferenceTimeoutId;e&&(window.clearTimeout(e),this.setState({hoveredReferenceTimeoutId:void 0}))},n.render=function(){return s.a.createElement("div",{onMouseMove:this.handleMouseMove,style:this.state.cursorNeedsManualHoverStyle?{cursor:"help"}:{}},this.props.children)},t}(c.Component);D.displayName="ReactPDFViewerPageLayerReferences";var x=Object(l.connect)((function(e){return{hoveredMilestones:Object(M.d)(e)}}))(D),N=n(5398),k=(n(5726),!1),A=Object(c.memo)((function(e){var t=e.dimensionsCoefficient,n=Object(c.useRef)(null);Object(c.useEffect)((function(){(null==n?void 0:n.current)&&!k&&(n.current.scrollIntoView({block:"center"}),k=!0)}));var r=Object(c.useContext)(N.a).subPath;return I(r.type,r.value,t).map((function(e,t){var r=e.left,o=e.top,a=r,i=o,c=e.right-r,l=e.bottom-o;return c<100&&(a-=(100-c)/2,c=100),l<20&&(i-=(20-l)/2,l=20),s.a.createElement("span",{ref:0===t?n:null,key:t,className:"react-pdf-viewer-page-layer-citation",style:{left:a,top:i,width:c,height:l}})}))})),T=(n(5727),new p.a("react-pdf-viewer-page")),z=function(e){function t(t){var n;(n=e.call(this,t)||this).state={isHidden:!0},n.root=void 0,n.noData=void 0,n.loading=void 0,n.error=void 0,n.handleResize=function(e){n.setState({pageWidth:e})},n.handleChange=function(e){var t="boolean"==typeof e.isIntersecting?e.isIntersecting:!(0===e.intersectionRatio&&0===e.intersectionRect.top);n.setState({isHidden:!t})},n.handleError=function(e){Object(w.default)(e)},n.handleSuccess=function(e){n.setState({dimensionsCoefficient:parseFloat((e.width/e.originalWidth).toFixed(5))})},n.handleAnnotationLayerSuccess=function(){var e=n.root.querySelectorAll('a[href]:not([href^="mailto:"])');e.length>0&&Array.prototype.forEach.call(e,(function(e){e.setAttribute("href",Object(L.a)(e.getAttribute("href")))}))};var r=s.a.createElement(f.a,{size:"s",color:"grey-700",style:{margin:25,textAlign:"center"}},"–");return n.noData=Object(c.cloneElement)(r,{children:"Page not available."}),n.loading=Object(c.cloneElement)(r,{children:"Loading page…"}),n.error=Object(c.cloneElement)(r,{children:"Failed to load the page."}),n}Object(i.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.resizing.addListener(this.handleResize)},n.componentWillUnmount=function(){this.props.resizing.removeListener(this.handleResize)},n.render=function(){var e=this,t=this.props,n=t.pageNumber,r=(t.resizing,t.initialWidth),i=t.references,l=t.onRenderSuccess,d=t.useMarkedCitation,f=Object(o.a)(t,["pageNumber","resizing","initialWidth","references","onRenderSuccess","useMarkedCitation"]),h=this.state,m=h.pageWidth,p=void 0===m?r:m,g=h.dimensionsCoefficient,v=h.isHidden,b=T({modifier:v?"hidden":null}).className,P=s.a.createElement(u.Page,Object(a.a)({inputRef:function(t){e.root=t},pageNumber:n,width:p,loading:this.loading,error:this.error,noData:this.noData,onLoadError:this.handleError,onRenderError:this.handleError,onRenderAnnotationLayerSuccess:this.handleAnnotationLayerSuccess,onRenderSuccess:Object(S.c)(this.handleSuccess,l),onGetAnnotationsError:this.handleError,onGetTextError:this.handleError},f)),w=s.a.createElement(j.b,{onChange:this.handleChange,rootMargin:"100%"},d&&g?s.a.createElement("div",{className:b},s.a.createElement(A,{dimensionsCoefficient:g}),P):Object(c.cloneElement)(P,{className:b}));return(null==i?void 0:i.length)>0?s.a.createElement(x,{pageNumber:n,references:i,dimensionsCoefficient:null!=g?g:1},w):w},t}(c.Component);z.displayName="ReactPDFViewerPage";var W=z,F=(n(5728),new p.a("react-pdf-viewer")),H=function(e){function t(t){var n;(n=e.call(this,t)||this).state={numPages:0,forceLoadingAllPages:!1,currentPageNumber:void 0},n.documentRef=void 0,n.pageIntersections={},n.handleItemIntersectionObserverChange=function(e){return function(t){var r=t.intersectionRatio;n.pageIntersections[e]=r,n.updateCurrentPageNumber()}},n.handleDocumentLoadSuccess=function(e){var t=e.numPages,r=n.props.onLoadSuccess;r&&r(t),n.setState({numPages:t})},n.handleDocumentError=function(e){var t=n.props.onLoadError;Object(w.default)(e),t&&t(e)},n.handleResize=v()((function(){n.resizing.dispatch(n.getMonitoredWidth())}),250),n.handleItemClick=function(e){var t=e.pageNumber,r=n.props.onLoadAllPages;n.setState({forceLoadingAllPages:!0}),r&&r(),window.setTimeout((function(){var e=n.documentRef.pages[t-1];e&&e.scrollIntoView()}),100)},n.itemsRenderer=function(e,t){return s.a.createElement("article",Object(a.a)({ref:t},F()),e)},n.itemRenderer=function(e){return function(t){var r=t+1,o=n.props,a=o.onLoadPage,i=o.onRenderPage,c=o.references;return s.a.createElement(R.a,{key:"page_"+r,onChange:n.handleItemIntersectionObserverChange(r),threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]},s.a.createElement("div",F("page"),s.a.createElement(O,{pageNumber:r}),s.a.createElement(W,{pageNumber:r,initialWidth:n.iframe?n.getMonitoredWidth():0,references:c,onLoadSuccess:a,onRenderSuccess:i,resizing:n.resizing,useMarkedCitation:e===r})))}},"Worker"in window&&(u.pdfjs.GlobalWorkerOptions.workerSrc=t.workerSrc),n.noData=s.a.createElement(d.a,{color:"yellow",align:"center"},"No PDF specified."),n.loading=s.a.createElement(f.a,null,"Loading PDF…"),n.error=s.a.createElement(d.a,{color:"red",align:"center"},"Failed to load PDF file.");var r=(new P.a).setMaxListeners(1/0);return n.resizing={addListener:r.addListener.bind(r,"resize"),removeListener:r.removeListener.bind(r,"resize"),dispatch:r.emit.bind(r,"resize")},n}Object(i.a)(t,e);var n=t.prototype;return n.updateCurrentPageNumber=function(){var e=this.props,t=e.references,n=e.dispatch,a=this.state.currentPageNumber,i=Number(Object.entries(this.pageIntersections).reduce((function(e,t){return e[1]>t[1]?e:t}))[0]);if(i!==a&&(this.setState({currentPageNumber:i}),t)){var c=t.map((function(e){var t=e.contexts,n=Object(o.a)(e,["contexts"]);return Object(r.a)({contexts:t.filter((function(e){return e.documentPath.value===i}))},n)})).filter((function(e){return e.contexts.length>0}));n(Object(y.w)(i,c))}},n.getMonitoredWidth=function(){return this.getWidthMonitor().innerWidth},n.getWidthMonitor=function(){return this.iframe.contentWindow},n.componentDidMount=function(){this.getWidthMonitor().addEventListener("resize",this.handleResize)},n.componentWillUnmount=function(){this.getWidthMonitor().removeEventListener("resize",this.handleResize)},n.render=function(){var e,t=this,n=this.props,r=n.fileUrl,o=n.cMapsUrl,i=n.maxPages,c=n.onLoadProgress,l=this.state,d=l.numPages,f=l.forceLoadingAllPages,m={cMapsUrl:o,cMapPacked:!0,disableRange:!0},p=this.context,g=f?d:Math.min(d,i),v="page"===(null==p?void 0:p.type)?Math.max(p.value,1):null;return e=v&&1===g?this.itemsRenderer(this.itemRenderer(v)(v-1)):s.a.createElement(h.default,{itemCount:g,pageSize:f?d:1,threshold:"200%",itemsRenderer:this.itemsRenderer,renderItem:this.itemRenderer(v)}),s.a.createElement(s.a.Fragment,null,s.a.createElement(u.Document,{ref:function(e){t.documentRef=e},file:r,onLoadProgress:c,onLoadError:this.handleDocumentError,onLoadSuccess:this.handleDocumentLoadSuccess,onSourceError:this.handleDocumentError,onItemClick:this.handleItemClick,externalLinkTarget:"_blank",externalLinkRel:"nofollow noopener",options:m,loading:this.loading,error:this.error,noData:this.noData},e),s.a.createElement("iframe",Object(a.a)({ref:function(e){return t.iframe=e}},F("width-monitor"))))},t}(c.Component);H.displayName="ReactPDFViewer",H.contextType=N.a,H.defaultProps={maxPages:1/0};t.a=Object(l.connect)()(H)},5849:function(e,t,n){"use strict";n.r(t),function(e){var r=n(3),o=(n(1),n(0)),a=n.n(o),i=n(32),c=n(8),s=n(12),l=n(54),u=n(292),d=n(438),f=n(1771),h=n(5801),m=n(643),p=function(){return n.e(707).then(n.bind(null,5788))},g=function(t){function o(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).state={showAllPages:e.props.showAllPagesInitially||Object(m.e)(),showSlurpInterstitial:!1,numPages:0},e.scrollToFullText=function(){return Object(m.f)(m.a)},e.handleLoadDocument=function(t){var n=e.props,r=n.references,o=n.dispatch,a=n.onLoadSuccess,i=e.state.showAllPages,c=Date.now();e.setState({numPages:t},(function(){return e.trackTiming(c)})),(null==r?void 0:r.length)>=10&&o(Object(d.C)(!0)),i&&(null==r?void 0:r.length)>0&&(o(Object(d.A)(!0)),Object(m.d)()),a&&a({numPages:t})},e.handleLoadPage=function(t){var n=t.pageNumber,r=e.props.slurpMetadata;r&&r.croppedAfter===n+1&&e.setState({showSlurpInterstitial:!0})},e.handleLoadMore=function(){var t=e.props,n=t.references,r=t.goalViewAndExpandFulltext,o=t.dispatch,a=t.onLoadMore;e.setState({showAllPages:!0}),(null==n?void 0:n.length)>0&&o(Object(d.A)(!0)),r&&Object(s.a)(r),a&&a()},e}Object(r.a)(o,t);var c=o.prototype;return c.componentDidMount=function(){Object(m.e)()&&this.scrollToFullText(),this.mountTimestamp=Date.now()},c.trackTiming=function(e){var t=e-this.mountTimestamp,n=this.props.monitoringEndpoint;requestIdleCallback((function(){RGCommons.monitoring.trackByImage(n,{key:"pdfJS",timer:t})}))},c.render=function(){var t=this.props,r=t.publicationUid,o=t.publicationKey,c=t.fileUrl,s=t.workerSrc,d=t.cMapsUrl,f=t.references,m=t.onLoadError,g=t.onLoadProgress,v=t.onRenderPage,b=this.state,P=b.numPages,w=b.showAllPages,R=b.showSlurpInterstitial;return a.a.createElement(i.a,{direction:"column",alignItems:"center",gutter:"none"},a.a.createElement(i.a.Item,{alignSelf:"stretch"},a.a.createElement(h.a,{onLoadSuccess:this.handleLoadDocument,onLoadError:m,onLoadProgress:g,onLoadPage:this.handleLoadPage,onLoadAllPages:this.handleLoadMore,onRenderPage:v,maxPages:w?void 0:1,fileUrl:c,workerSrc:s,cMapsUrl:d,references:f})),R?a.a.createElement(i.a.Item,null,a.a.createElement(l.a,{url:"publication.detailPromos.PublicationDetailPdfSlurpInterstitial.html",widgetParams:{publicationUid:r},renderPreloader:!1,__internalLoadComponent:p})):null,w?null:a.a.createElement(i.a.Item,null,a.a.createElement(u.a,{src:"modules/research/components/ResearchDetailPDFLoadMore",renderPreloader:!1,id:o,hidden:P<2,onClick:this.handleLoadMore,resolveComponentInternalDoNotSetOrYouWillBeFired:function(){return n.e(721).then(n.bind(null,5789))},hmrAccept:e.hot&&!1})))},o}(o.Component);g.displayName="ResearchDetailPDF",t.default=Object(c.a)((function(e){return{goalViewAndExpandFulltext:Object(f.e)(e)}}))(g)}.call(this,n(56)(e))}}]);