var cswidgetoverR=cswidgetoverR||{};(function(window,document,rootUrl,wRootUrl){for(var jp=function(url,callback){var method,timestamp,generatedFunction,jsonpScript;url=url||"";method="callback";callback=callback||function(){};Date.now||(Date.now=function(){return(new Date).getTime()});timestamp=Date.now();generatedFunction="jsonp"+Math.round(timestamp+Math.random()*1000001);window[generatedFunction]=function(json){callback(json);delete window[generatedFunction]};url=url.indexOf("?")===-1?url+"?":url+"&";jsonpScript=document.createElement("script");jsonpScript.setAttribute("src",url+method+"="+generatedFunction);document.getElementsByTagName("head")[0].appendChild(jsonpScript)},widgets=document.querySelectorAll("[data-cswidget]"),runScriptTypes=["application/javascript","application/x-javascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/x-javascript"],preservedScriptAttributes={type:!0,src:!0,noModule:!0,async:!0},x=widgets.length-1;x>-1;x--)(function(){var widgetNode=widgets.item(x),widgetId=widgetNode.getAttribute("data-cswidget"),widgetInt=parseInt(widgetId,10);widgetInt&&widgetInt>1?jp(wRootUrl+"api/widgets/widgetinfo?wid="+widgetId,function(data){var iFrameHolder=widgetNode,adHolder,scripts,iframe;data.AdContent&&data.LayoutTemp&&(widgetNode.innerHTML=data.LayoutTemp,adHolder=widgetNode.querySelectorAll(".csadholder").item(0),iFrameHolder=widgetNode.querySelectorAll(".cswidholder").item(0),adHolder.innerHTML=data.AdContent,scripts=adHolder.querySelectorAll("script"),[].forEach.call(scripts,function($script){var typeAttr=$script.getAttribute("type"),s,i;if(!typeAttr||runScriptTypes.indexOf(typeAttr)!==-1){s=document.createElement("script");for(i in preservedScriptAttributes)$script[i]&&(s[i]=$script[i]);$script.src||(s.textContent=$script.innerText);document.head.appendChild(s).parentNode.removeChild(s)}}));iframe=document.createElement("iframe");iframe.frameBorder="0";iframe.width=data.FillContainer?"100%":window.csWidgetWidth?window.csWidgetWidth:data.Width+"px";iframe.height=data.Height+"px";iframe.scrolling="no";iFrameHolder.appendChild(iframe);iframe.contentWindow.document.open();iframe.contentWindow.document.write(data.Content);iframe.contentWindow.document.close()}):jp(rootUrl+"api/widgets/widgetinfo?wid="+widgetId,function(data){var iframe=document.createElement("iframe");iframe.frameBorder="0";iframe.width=data.FillContainer?"100%":window.csWidgetWidth?window.csWidgetWidth:data.Width+"px";iframe.height=data.Height+"px";iframe.scrolling="no";iframe.setAttribute("src",data.Link);widgetNode.appendChild(iframe)})})(x)})(window,document,cswidgetoverR.portal||"//portal.cityspark.com/",cswidgetoverR.wportal||"//p.cityspark.com/");